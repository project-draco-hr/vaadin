{
  if (idToButton.containsKey(id)) {
    removeMode(id);
  }
  Button b=new Button();
  if (caption != null) {
    b.setCaption(caption);
  }
  if (description != null) {
    b.setDescription(description);
  }
  if (icon != null) {
    b.setIcon(icon);
  }
  b.setData(id);
  b.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      setMode(event.getButton().getData());
    }
  }
);
  idToButton.put(id,b);
  layout.addComponent(b);
  updateStyles();
}
