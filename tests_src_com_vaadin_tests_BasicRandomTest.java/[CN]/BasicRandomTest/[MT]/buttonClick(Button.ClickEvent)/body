{
  final String value=buttonValues.get(event.getButton());
  eventCounter++;
  try {
    current=current * 10 + Double.parseDouble(value);
    display.setValue(Double.toString(current));
    statusLabel.setValue("#" + eventCounter + ": button "+ value+ ", value "+ Double.toString(current));
    System.out.println("#" + eventCounter + ": button "+ value+ ", value "+ Double.toString(current));
  }
 catch (  final java.lang.NumberFormatException e) {
    if (operation.equals("+")) {
      stored+=current;
    }
    if (operation.equals("-")) {
      stored-=current;
    }
    if (operation.equals("*")) {
      stored*=current;
    }
    if (operation.equals("/")) {
      stored/=current;
    }
    if (operation.equals("C")) {
      stored=current;
    }
    if (value.equals("C")) {
      stored=0.0;
    }
    operation=value;
    current=0.0;
    display.setValue(Double.toString(stored));
    statusLabel.setValue("#" + eventCounter + ": button "+ value+ ", value "+ Double.toString(stored));
    System.out.println("#" + eventCounter + ": button "+ value+ ", value "+ Double.toString(stored));
  }
}
