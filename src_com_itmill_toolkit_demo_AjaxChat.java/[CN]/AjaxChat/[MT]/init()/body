{
  setMainWindow(main);
  if (messagePane == null) {
    messagePane=new Panel();
    messagePane.setCaption("Messages:");
    messagePane.addComponent(new ChatMessage("SERVER","Chat started"));
  }
  say.dependsOn(sayText);
  say.addListener((Button.ClickListener)this);
  Panel controls=new Panel("",new OrderedLayout(OrderedLayout.ORIENTATION_HORIZONTAL));
  controls.addComponent(sayText);
  sayText.setColumns(40);
  controls.addComponent(say);
  controls.addComponent(loginName);
  loginName.focus();
  controls.addComponent(loginButton);
  loginButton.dependsOn(loginName);
  loginButton.addListener(this);
  leaveButton=new Button("Leave",this,"leave");
  controls.addComponent(leaveButton);
  say.setVisible(false);
  sayText.setVisible(false);
  this.connectionstatus=new ProgressIndicator();
  this.connectionstatus.setIndeterminate(true);
  this.connectionstatus.setPollingInterval(2000);
  main.addComponent(this.connectionstatus);
  main.addComponent(controls);
  main.addComponent(messagePane);
  main.addComponent(userlist);
}
