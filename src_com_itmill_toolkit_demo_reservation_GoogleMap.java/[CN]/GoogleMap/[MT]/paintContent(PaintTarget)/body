{
  super.paintContent(target);
  if (null != mapCenter) {
    target.addAttribute("centerX",mapCenter.getX());
    target.addAttribute("centerY",mapCenter.getY());
  }
  target.addAttribute("zoom",zoomLevel);
  target.addAttribute("width",width);
  target.addAttribute("height",height);
  if (this.dataSource != null) {
    target.startTag(TAG_MARKERS);
    Collection itemIds=this.dataSource.getItemIds();
    for (Iterator it=itemIds.iterator(); it.hasNext(); ) {
      Object itemId=it.next();
      Item item=this.dataSource.getItem(itemId);
      Property p=item.getItemProperty(getItemMarkerXPropertyId());
      Float x=(Float)(p != null ? p.getValue() : null);
      p=item.getItemProperty(getItemMarkerYPropertyId());
      Float y=(Float)(p != null ? p.getValue() : null);
      if (x == null || y == null) {
        continue;
      }
      target.startTag(TAG_MARKER);
      target.addAttribute("x",x.floatValue());
      target.addAttribute("y",y.floatValue());
      p=item.getItemProperty(getItemMarkerHtmlPropertyId());
      String h=(String)(p != null ? p.getValue() : null);
      target.addAttribute("html",h);
      target.endTag(TAG_MARKER);
    }
    target.endTag(TAG_MARKERS);
  }
}
