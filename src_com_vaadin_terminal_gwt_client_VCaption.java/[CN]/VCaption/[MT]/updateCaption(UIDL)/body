{
  setVisible(!uidl.getBooleanAttribute("invisible"));
  boolean wasPlacedAfterComponent=placedAfterComponent;
  placedAfterComponent=true;
  String style=CLASSNAME;
  if (uidl.hasAttribute("style")) {
    final String[] styles=uidl.getStringAttribute("style").split(" ");
    for (int i=0; i < styles.length; i++) {
      style+=" " + CLASSNAME + "-"+ styles[i];
    }
  }
  if (uidl.hasAttribute("disabled")) {
    style+=" " + "v-disabled";
  }
  setStyleName(style);
  if (uidl.hasAttribute(ATTRIBUTE_ICON)) {
    if (icon == null) {
      icon=new Icon(client);
      icon.setWidth("0");
      icon.setHeight("0");
      DOM.insertChild(getElement(),icon.getElement(),getInsertPosition(ATTRIBUTE_ICON));
    }
    placedAfterComponent=false;
    iconOnloadHandled=false;
    icon.setUri(uidl.getStringAttribute(ATTRIBUTE_ICON));
  }
 else   if (icon != null) {
    DOM.removeChild(getElement(),icon.getElement());
    icon=null;
  }
  if (uidl.hasAttribute(ATTRIBUTE_CAPTION)) {
    if (captionText == null) {
      captionText=DOM.createDiv();
      captionText.setClassName("v-captiontext");
      DOM.insertChild(getElement(),captionText,getInsertPosition(ATTRIBUTE_CAPTION));
    }
    String c=uidl.getStringAttribute(ATTRIBUTE_CAPTION);
    placedAfterComponent=false;
    if (c == null || c.trim().equals("")) {
      captionText.setInnerHTML("&nbsp;");
    }
 else {
      DOM.setInnerText(captionText,c);
    }
  }
 else   if (captionText != null) {
    DOM.removeChild(getElement(),captionText);
    captionText=null;
  }
  if (uidl.hasAttribute(ATTRIBUTE_DESCRIPTION)) {
    if (captionText != null) {
      addStyleDependentName("hasdescription");
    }
 else {
      removeStyleDependentName("hasdescription");
    }
  }
  if (uidl.getBooleanAttribute(ATTRIBUTE_REQUIRED)) {
    if (requiredFieldIndicator == null) {
      requiredFieldIndicator=DOM.createDiv();
      requiredFieldIndicator.setClassName("v-required-field-indicator");
      DOM.setInnerText(requiredFieldIndicator,"*");
      DOM.insertChild(getElement(),requiredFieldIndicator,getInsertPosition(ATTRIBUTE_REQUIRED));
    }
  }
 else   if (requiredFieldIndicator != null) {
    DOM.removeChild(getElement(),requiredFieldIndicator);
    requiredFieldIndicator=null;
  }
  if (uidl.hasAttribute(ATTRIBUTE_ERROR) && !uidl.getBooleanAttribute(ATTRIBUTE_HIDEERRORS)) {
    if (errorIndicatorElement == null) {
      errorIndicatorElement=DOM.createDiv();
      DOM.setInnerHTML(errorIndicatorElement,"&nbsp;");
      DOM.setElementProperty(errorIndicatorElement,"className","v-errorindicator");
      DOM.insertChild(getElement(),errorIndicatorElement,getInsertPosition(ATTRIBUTE_ERROR));
    }
  }
 else   if (errorIndicatorElement != null) {
    DOM.removeChild(getElement(),errorIndicatorElement);
    errorIndicatorElement=null;
  }
  if (clearElement == null) {
    clearElement=DOM.createDiv();
    DOM.setStyleAttribute(clearElement,"clear","both");
    DOM.setStyleAttribute(clearElement,"width","0");
    DOM.setStyleAttribute(clearElement,"height","0");
    DOM.setStyleAttribute(clearElement,"overflow","hidden");
    DOM.appendChild(getElement(),clearElement);
  }
  return (wasPlacedAfterComponent != placedAfterComponent);
}
