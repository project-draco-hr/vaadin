{
  target.startTag("error");
  if (level == ErrorLevel.INFORMATION) {
    target.addAttribute("level","info");
  }
 else   if (level == ErrorLevel.WARNING) {
    target.addAttribute("level","warning");
  }
 else   if (level == ErrorLevel.ERROR) {
    target.addAttribute("level","error");
  }
 else   if (level == ErrorLevel.CRITICAL) {
    target.addAttribute("level","critical");
  }
 else {
    target.addAttribute("level","system");
  }
switch (mode) {
case CONTENT_TEXT:
    target.addText(AbstractApplicationServlet.safeEscapeForHtml(msg));
  break;
case CONTENT_UIDL:
target.addUIDL(msg);
break;
case CONTENT_PREFORMATTED:
target.addText("<pre>" + AbstractApplicationServlet.safeEscapeForHtml(msg) + "</pre>");
break;
case CONTENT_XHTML:
target.addText(msg);
break;
}
target.endTag("error");
}
