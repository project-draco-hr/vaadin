{
  List rids=resourcePanel.getSelectedResources();
  if (rids != null && rids.size() > 0) {
    for (Iterator it=rids.iterator(); it.hasNext(); ) {
      Item resource=(Item)it.next();
      int id=((Integer)resource.getItemProperty(SampleDB.Resource.PROPERTY_ID_ID).getValue()).intValue();
      if (db.isAvailableResource(id,(Date)reservedFrom.getValue(),(Date)reservedTo.getValue())) {
        return resource;
      }
    }
    throw new ResourceNotAvailableException("No available resource");
  }
 else {
    return null;
  }
}
