{
  if (datefield.getCurrentDate() == null) {
    Date now=datefield.getShowingDate();
    if (now == null) {
      now=new Date();
      datefield.setShowingDate(now);
    }
    datefield.setCurrentDate(new Date(now.getTime()));
    notifyServerOfChanges();
  }
  if (event.getSource() == hours) {
    int h=hours.getSelectedIndex();
    if (datefield.getDateTimeService().isTwelveHourClock()) {
      h=h + ampm.getSelectedIndex() * 12;
    }
    datefield.getShowingDate().setHours(h);
    updateTime(false);
  }
 else   if (event.getSource() == mins) {
    final int m=mins.getSelectedIndex();
    datefield.getShowingDate().setMinutes(m);
    updateTime(false);
  }
 else   if (event.getSource() == sec) {
    final int s=sec.getSelectedIndex();
    datefield.getShowingDate().setSeconds(s);
    updateTime(false);
  }
 else   if (event.getSource() == msec) {
    final int ms=msec.getSelectedIndex();
    datefield.setShowingMilliseconds(ms);
    updateTime(false);
  }
 else   if (event.getSource() == ampm) {
    final int h=hours.getSelectedIndex() + (ampm.getSelectedIndex() * 12);
    datefield.getShowingDate().setHours(h);
    updateTime(false);
  }
}
