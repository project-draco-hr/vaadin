{
  detectAndApplyPositionFunction();
  getLogger().info("Using " + position.getClass().getSimpleName() + " for position");
  final Element root=DOM.createDiv();
  setElement(root);
  root.appendChild(verticalScrollbar.getElement());
  root.appendChild(horizontalScrollbar.getElement());
  verticalScrollbar.setScrollbarThickness(Util.getNativeScrollbarSize());
  horizontalScrollbar.setScrollbarThickness(Util.getNativeScrollbarSize());
  tableWrapper=DOM.createDiv();
  root.appendChild(tableWrapper);
  final Element table=DOM.createTable();
  tableWrapper.appendChild(table);
  table.appendChild(headElem);
  table.appendChild(bodyElem);
  table.appendChild(footElem);
  setStylePrimaryName("v-escalator");
  addAttachHandler(new AttachEvent.Handler(){
    @Override public void onAttachOrDetach(    final AttachEvent event){
      if (event.isAttached()) {
        header.paintInsertRows(0,header.getRowCount());
        footer.paintInsertRows(0,footer.getRowCount());
        recalculateElementSizes();
        body.paintInsertRows(0,body.getRowCount());
        scroller.attachScrollListener(verticalScrollbar.getElement());
        scroller.attachScrollListener(horizontalScrollbar.getElement());
        scroller.attachMousewheelListener(getElement());
        scroller.attachTouchListeners(getElement());
      }
 else {
        scroller.detachScrollListener(verticalScrollbar.getElement());
        scroller.detachScrollListener(horizontalScrollbar.getElement());
        scroller.detachMousewheelListener(getElement());
        scroller.detachTouchListeners(getElement());
      }
    }
  }
);
  setHeight(null);
  setWidth(null);
}
