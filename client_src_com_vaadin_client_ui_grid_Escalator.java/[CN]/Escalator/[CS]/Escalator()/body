{
  detectAndApplyPositionFunction();
  getLogger().info("Using " + position.getClass().getSimpleName() + " for position");
  final Element root=DOM.createDiv();
  setElement(root);
  ScrollHandler scrollHandler=new ScrollHandler(){
    @Override public void onScroll(    ScrollEvent event){
      scroller.onScroll();
      fireEvent(new ScrollEvent());
    }
  }
;
  root.appendChild(verticalScrollbar.getElement());
  verticalScrollbar.addScrollHandler(scrollHandler);
  verticalScrollbar.getElement().setTabIndex(-1);
  verticalScrollbar.setScrollbarThickness(Util.getNativeScrollbarSize());
  root.appendChild(horizontalScrollbar.getElement());
  horizontalScrollbar.addScrollHandler(scrollHandler);
  horizontalScrollbar.getElement().setTabIndex(-1);
  horizontalScrollbar.setScrollbarThickness(Util.getNativeScrollbarSize());
  horizontalScrollbar.addVisibilityHandler(new ScrollbarBundle.VisibilityHandler(){
    @Override public void visibilityChanged(    ScrollbarBundle.VisibilityChangeEvent event){
      applyHeightByRows();
    }
  }
);
  tableWrapper=DivElement.as(DOM.createDiv());
  root.appendChild(tableWrapper);
  final Element table=DOM.createTable();
  tableWrapper.appendChild(table);
  table.appendChild(headElem);
  table.appendChild(bodyElem);
  table.appendChild(footElem);
  Style hCornerStyle=headerCorner.getStyle();
  hCornerStyle.setWidth(Util.getNativeScrollbarSize(),Unit.PX);
  hCornerStyle.setDisplay(Display.NONE);
  root.appendChild(headerCorner);
  Style fCornerStyle=footerCorner.getStyle();
  fCornerStyle.setWidth(Util.getNativeScrollbarSize(),Unit.PX);
  fCornerStyle.setDisplay(Display.NONE);
  root.appendChild(footerCorner);
  Style hWrapperStyle=horizontalScrollbarBackground.getStyle();
  hWrapperStyle.setDisplay(Display.NONE);
  hWrapperStyle.setHeight(Util.getNativeScrollbarSize(),Unit.PX);
  root.appendChild(horizontalScrollbarBackground);
  setStylePrimaryName("v-escalator");
  setHeight(null);
  setWidth(null);
}
