{
  panel.clear();
  optionsEnabled.clear();
  if (isMultiselect()) {
    Roles.getGroupRole().set(getElement());
  }
 else {
    Roles.getRadiogroupRole().set(getElement());
  }
  for (final Iterator<?> it=uidl.getChildIterator(); it.hasNext(); ) {
    final UIDL opUidl=(UIDL)it.next();
    CheckBox op;
    String itemHtml=opUidl.getStringAttribute("caption");
    if (!htmlContentAllowed) {
      itemHtml=Util.escapeHTML(itemHtml);
    }
    String icon=opUidl.getStringAttribute("icon");
    if (icon != null && icon.length() != 0) {
      String iconUrl=client.translateVaadinUri(icon);
      itemHtml="<img src=\"" + iconUrl + "\" class=\""+ Icon.CLASSNAME+ "\" alt=\"\" />"+ itemHtml;
    }
    if (isMultiselect()) {
      op=new VCheckBox();
      op.setHTML(itemHtml);
    }
 else {
      op=new RadioButton(paintableId,itemHtml,true);
      op.setStyleName("v-radiobutton");
    }
    if (icon != null && icon.length() != 0) {
      Util.sinkOnloadForImages(op.getElement());
      op.addHandler(iconLoadHandler,LoadEvent.getType());
    }
    op.addStyleName(CLASSNAME_OPTION);
    op.setValue(opUidl.getBooleanAttribute("selected"));
    boolean optionEnabled=!opUidl.getBooleanAttribute(OptionGroupConstants.ATTRIBUTE_OPTION_DISABLED);
    boolean enabled=optionEnabled && !isReadonly() && isEnabled();
    op.setEnabled(enabled);
    optionsEnabled.add(optionEnabled);
    setStyleName(op.getElement(),ApplicationConnection.DISABLED_CLASSNAME,!(optionEnabled && isEnabled()));
    op.addClickHandler(this);
    optionsToKeys.put(op,opUidl.getStringAttribute("key"));
    panel.add(op);
  }
}
