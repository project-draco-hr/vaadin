{
  super.onClick(event);
  if (event.getSource() instanceof CheckBox) {
    final boolean selected=((CheckBox)event.getSource()).getValue();
    final String key=optionsToKeys.get(event.getSource());
    if (!isMultiselect()) {
      selectedKeys.clear();
    }
    if (selected) {
      selectedKeys.add(key);
    }
 else {
      selectedKeys.remove(key);
    }
    client.updateVariable(paintableId,"selected",getSelectedItems(),isImmediate());
    for (    CheckBox item : optionsToKeys.keySet()) {
      CheckedValue value=item.getValue() ? CheckedValue.TRUE : CheckedValue.FALSE;
      Roles.getCheckboxRole().setAriaCheckedState(item.getElement(),value);
    }
  }
}
