{
  if (newValue == null && !uiHasValidDateString) {
    setInternalValue(null);
    notifyFormOfValidityChange();
    requestRepaint();
    return;
  }
  if (newValue == null || newValue instanceof Date) {
    super.setValue(newValue,repaintIsNotNeeded);
  }
 else {
    try {
      final SimpleDateFormat parser=new SimpleDateFormat();
      final TimeZone currentTimeZone=getTimeZone();
      if (currentTimeZone != null) {
        parser.setTimeZone(currentTimeZone);
      }
      final Date val=parser.parse(newValue.toString());
      super.setValue(val,repaintIsNotNeeded);
    }
 catch (    final ParseException e) {
      uiHasValidDateString=false;
      throw new Property.ConversionException(getParseErrorMessage());
    }
  }
}
