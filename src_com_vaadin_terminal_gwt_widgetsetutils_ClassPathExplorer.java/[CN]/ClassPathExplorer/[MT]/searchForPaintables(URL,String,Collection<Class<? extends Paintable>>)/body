{
  File directory=new File(location.getFile());
  if (directory.exists() && !directory.isHidden()) {
    String[] files=directory.list();
    for (int i=0; i < files.length; i++) {
      if (files[i].endsWith(".class")) {
        String classname=files[i].substring(0,files[i].length() - 6);
        String packageName=locationString.substring(locationString.lastIndexOf("/") + 1);
        classname=packageName + "." + classname;
        tryToAdd(classname,paintables);
      }
    }
  }
 else {
    try {
      URLConnection openConnection=location.openConnection();
      if (openConnection instanceof JarURLConnection) {
        JarURLConnection conn=(JarURLConnection)openConnection;
        JarFile jarFile=conn.getJarFile();
        if (!isVaadinAddon(jarFile)) {
          return;
        }
        Enumeration<JarEntry> e=jarFile.entries();
        while (e.hasMoreElements()) {
          JarEntry entry=e.nextElement();
          String entryname=entry.getName();
          if (!entry.isDirectory() && entryname.endsWith(".class")) {
            String classname=entryname.substring(0,entryname.length() - 6);
            if (classname.startsWith("/")) {
              classname=classname.substring(1);
            }
            classname=classname.replace('/','.');
            tryToAdd(classname,paintables);
          }
        }
      }
    }
 catch (    IOException e) {
      logger.warning(e.toString());
    }
  }
}
