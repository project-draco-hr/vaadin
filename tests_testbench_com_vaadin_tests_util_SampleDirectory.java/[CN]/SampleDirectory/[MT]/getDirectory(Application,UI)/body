{
  String errorMessage="Access to application " + "context base directory failed, " + "possible security constraint with Application "+ "Server or Servlet Container.<br />";
  File file=application.getContext().getBaseDirectory();
  if ((file == null) || (!file.canRead()) || (file.getAbsolutePath() == null)) {
    if (application.getProperty("sampleDirectory") != null) {
      file=new File(application.getProperty("sampleDirectory"));
      if ((file != null) && (file.canRead()) && (file.getAbsolutePath() != null)) {
        return file;
      }
      errorMessage+="Failed also to access sample directory <b>[" + application.getProperty("sampleDirectory") + "]</b> defined in <b>sampleDirectory property</b>.";
    }
 else {
      errorMessage+="<b>Note: </b>You can set this manually in " + "web.xml by defining " + "sampleDirectory property.";
    }
  }
 else {
    return file;
  }
  final Panel errorPanel=new Panel("Demo application error");
  errorPanel.setStyleName("strong");
  errorPanel.setComponentError(new SystemError("Cannot provide sample directory"));
  errorPanel.addComponent(new Label(errorMessage,ContentMode.XHTML));
  uI.getContent().removeAllComponents();
  uI.getContent().addComponent(errorPanel);
  return null;
}
