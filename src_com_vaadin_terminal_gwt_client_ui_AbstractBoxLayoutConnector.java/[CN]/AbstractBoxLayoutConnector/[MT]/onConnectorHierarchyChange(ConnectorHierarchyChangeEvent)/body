{
  super.onConnectorHierarchyChange(event);
  List<ComponentConnector> previousChildren=event.getOldChildren();
  int currentIndex=0;
  VBoxLayout layout=getWidget();
  for (  ComponentConnector child : getChildren()) {
    Widget childWidget=child.getWidget();
    Slot slot=layout.getSlot(childWidget);
    if (slot.getParent() != layout) {
      getLayoutManager().addElementResizeListener(slot.getWidget().getElement(),childComponentResizeListener);
      child.addStateChangeHandler(childStateChangeHandler);
    }
    layout.addOrMoveSlot(slot,currentIndex++);
  }
  for (  ComponentConnector child : previousChildren) {
    if (child.getParent() != this) {
      Slot removed=layout.removeSlot(child.getWidget());
      getLayoutManager().removeElementResizeListener(removed.getWidget().getElement(),childComponentResizeListener);
    }
  }
  updateLayoutHeight();
  getWidget().recalculateUsedSpace();
}
