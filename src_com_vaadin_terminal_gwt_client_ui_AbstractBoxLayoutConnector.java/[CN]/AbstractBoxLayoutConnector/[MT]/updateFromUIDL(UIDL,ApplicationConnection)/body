{
  if (!isRealUpdate(uidl)) {
    return;
  }
  clickEventHandler.handleEventHandlerRegistration();
  VBoxLayout layout=getWidget();
  ValueMap expandRatios=uidl.getMapAttribute("expandRatios");
  ValueMap alignments=uidl.getMapAttribute("alignments");
  for (  ComponentConnector child : getChildren()) {
    Slot slot=layout.getSlot(child);
    String pid=child.getConnectorId();
    AlignmentInfo alignment;
    if (alignments.containsKey(pid)) {
      alignment=new AlignmentInfo(alignments.getInt(pid));
      if (alignment.isVerticalCenter() || alignment.isBottom()) {
        hasVerticalAlignment.add(child);
      }
 else {
        hasVerticalAlignment.remove(child);
      }
    }
 else {
      alignment=AlignmentInfo.TOP_LEFT;
      hasVerticalAlignment.remove(child);
    }
    slot.setAlignment(alignment);
    double expandRatio;
    if (expandRatios.getKeySet().size() == 0 && ((getWidget().vertical && !isUndefinedHeight()) || (!getWidget().vertical && !isUndefinedWidth()))) {
      expandRatio=1;
      hasExpandRatio.add(child);
    }
 else     if (expandRatios.containsKey(pid) && expandRatios.getRawNumber(pid) > 0) {
      expandRatio=expandRatios.getRawNumber(pid);
      hasExpandRatio.add(child);
    }
 else {
      expandRatio=-1;
      hasExpandRatio.remove(child);
      if (expandRatios.getKeySet().size() > 0 || hasExpandRatio.size() > 0) {
        getLayoutManager().addElementResizeListener(child.getWidget().getElement(),childComponentResizeListener);
        if (slot.hasCaption()) {
          getLayoutManager().addElementResizeListener(slot.getCaptionElement(),slotCaptionResizeListener);
        }
      }
    }
    slot.setExpandRatio(expandRatio);
    if (slot.getSpacingElement() != null) {
      getLayoutManager().addElementResizeListener(slot.getSpacingElement(),spacingResizeListener);
    }
 else     if (slot.getSpacingElement() != null) {
      getLayoutManager().removeElementResizeListener(slot.getSpacingElement(),spacingResizeListener);
    }
  }
  if (needsFixedHeight()) {
    for (    ComponentConnector child : getChildren()) {
      Slot slot=layout.getSlot(child);
      getLayoutManager().addElementResizeListener(child.getWidget().getElement(),childComponentResizeListener);
      if (slot.hasCaption()) {
        getLayoutManager().addElementResizeListener(slot.getCaptionElement(),slotCaptionResizeListener);
      }
    }
  }
  if (needsExpand()) {
    updateExpand();
  }
 else {
    getWidget().clearExpand();
  }
}
