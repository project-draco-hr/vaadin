{
  GridLayout gl;
  if (dir == OrderedLayout.ORIENTATION_HORIZONTAL) {
    gl=new GridLayout(8,1);
  }
 else {
    gl=new GridLayout(1,8);
  }
  String dirText=(dir == OrderedLayout.ORIENTATION_HORIZONTAL ? "H" : "V");
  String cWidth=componentWidth == null ? "" : " - " + componentWidth;
  Panel p=new Panel("GL/" + dirText + " "+ w+ "x"+ h+ cWidth,gl);
  p.setWidth(w);
  p.setHeight(h);
  gl.setSizeFull();
  String captions[]=new String[]{"TextField with caption",null};
  Resource icons[]=new Resource[]{new ThemeResource("icons/16/document-delete.png"),null};
  boolean required[]=new boolean[]{true,false};
  TextField fields[][]=new TextField[captions.length][icons.length];
  for (int caption=0; caption < captions.length; caption++) {
    for (int icon=0; icon < icons.length; icon++) {
      for (int req=0; req < required.length; req++) {
        TextField tf=createTextFieldWithError(captions[caption],icons[icon],required[req]);
        fields[caption][icon]=tf;
        if (componentWidth != null) {
          tf.setWidth(componentWidth);
        }
        if (componentHeight != null) {
          tf.setHeight(componentWidth);
        }
        p.addComponent(tf);
        gl.setComponentAlignment(tf,OrderedLayout.ALIGNMENT_LEFT,OrderedLayout.ALIGNMENT_BOTTOM);
      }
    }
  }
  parentLayout.addComponent(p);
}
