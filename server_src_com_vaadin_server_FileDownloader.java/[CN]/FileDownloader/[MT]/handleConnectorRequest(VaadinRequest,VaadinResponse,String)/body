{
  if (!path.matches("dl(/.*)?")) {
    return false;
  }
  VaadinSession session=getSession();
  session.lock();
  DownloadStream stream;
  try {
    Resource resource=getFileDownloadResource();
    if (!(resource instanceof ConnectorResource)) {
      return false;
    }
    stream=((ConnectorResource)resource).getStream();
    if (stream.getParameter("Content-Disposition") == null) {
      stream.setParameter("Content-Disposition","attachment; filename=\"" + stream.getFileName() + "\"");
    }
    if (isOverrideContentType()) {
      stream.setContentType("application/octet-stream;charset=UTF-8");
    }
  }
  finally {
    session.unlock();
  }
  stream.writeResponse(request,response);
  return true;
}
