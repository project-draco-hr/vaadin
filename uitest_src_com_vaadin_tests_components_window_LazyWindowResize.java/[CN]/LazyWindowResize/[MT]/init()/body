{
  mainWindow=new LegacyWindow("Resize test");
  setMainWindow(mainWindow);
  VerticalLayout layout=new VerticalLayout();
  layout.setMargin(true);
  subWindow=new Window("Sub window",layout);
  subWindow.setHeight("50%");
  subWindow.setWidth("50%");
  subWindow.center();
  layout.addComponent(new Label(LoremIpsum.get(1000)));
  getMainWindow().addWindow(subWindow);
  lazyMode=new CheckBox("Lazy resize");
  lazyMode.setImmediate(true);
  lazyMode.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      setLazy(lazyMode.getValue());
    }
  }
);
  resizeListenerCheckBox=new CheckBox("Resize listener");
  resizeListenerCheckBox.setImmediate(true);
  resizeListenerCheckBox.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      if (resizeListenerCheckBox.getValue()) {
        subWindow.addListener(resizeListener);
        mainWindow.addListener(browserWindowResizeListener);
      }
 else {
        subWindow.removeListener(resizeListener);
        mainWindow.removeListener(browserWindowResizeListener);
      }
    }
  }
);
  immediateCheckBox=new CheckBox("Windows immediate");
  immediateCheckBox.setImmediate(true);
  immediateCheckBox.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      mainWindow.setImmediate(immediateCheckBox.getValue());
      subWindow.setImmediate(immediateCheckBox.getValue());
    }
  }
);
  mainWindow.addComponent(lazyMode);
  mainWindow.addComponent(resizeListenerCheckBox);
  mainWindow.addComponent(immediateCheckBox);
  mainWindow.addComponent(log);
  mainWindow.addComponent(new Label("<br/><br/>",ContentMode.HTML));
  mainWindow.addComponent(new Label(LoremIpsum.get(10000)));
  setLazy(false);
}
