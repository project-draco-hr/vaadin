{
  File outFile=new File(fileOutPutDirectory,strFilename);
  BufferedOutputStream out=null;
  if (fileOutPutDirectory != null)   out=new BufferedOutputStream(new FileOutputStream(outFile));
  long count=readAndWrite(in,out);
  if (count > 0) {
    out.flush();
    out.close();
  }
 else {
    out.close();
    outFile.delete();
  }
  return count;
}
