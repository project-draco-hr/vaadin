{
  if (keycode == KeyCodes.KEY_TAB) {
    return false;
  }
  if (selectMode == SELECT_MODE_NONE && keycode == getNavigationDownKey()) {
    bodyContainer.setScrollPosition(bodyContainer.getScrollPosition() + scrollingVelocity);
  }
 else   if (keycode == getNavigationDownKey()) {
    if (selectMode == SELECT_MODE_MULTI && moveFocusDown()) {
      selectFocusedRow(ctrl,shift);
    }
 else     if (selectMode == SELECT_MODE_SINGLE && !shift && moveFocusDown()) {
      selectFocusedRow(ctrl,shift);
    }
  }
  if (selectMode == SELECT_MODE_NONE && keycode == getNavigationUpKey()) {
    bodyContainer.setScrollPosition(bodyContainer.getScrollPosition() - scrollingVelocity);
  }
 else   if (keycode == getNavigationUpKey()) {
    if (selectMode == SELECT_MODE_MULTI && moveFocusUp()) {
      selectFocusedRow(ctrl,shift);
    }
 else     if (selectMode == SELECT_MODE_SINGLE && !shift && moveFocusUp()) {
      selectFocusedRow(ctrl,shift);
    }
  }
  if (keycode == getNavigationLeftKey()) {
    bodyContainer.setHorizontalScrollPosition(bodyContainer.getHorizontalScrollPosition() - scrollingVelocity);
  }
 else   if (keycode == getNavigationRightKey()) {
    bodyContainer.setHorizontalScrollPosition(bodyContainer.getHorizontalScrollPosition() + scrollingVelocity);
  }
  if (selectMode > SELECT_MODE_NONE && keycode == getNavigationSelectKey()) {
    if (selectMode == SELECT_MODE_SINGLE) {
      boolean wasSelected=focusedRow.isSelected();
      deselectAll();
      if (!wasSelected) {
        focusedRow.toggleSelection(true);
      }
    }
 else {
      focusedRow.toggleSelection(true);
    }
    sendSelectedRows();
  }
  if (keycode == getNavigationPageDownKey()) {
    int rowHeight=(int)scrollBody.getRowHeight();
    int offset=pageLength * rowHeight - rowHeight;
    bodyContainer.setScrollPosition(bodyContainer.getScrollPosition() + offset);
    if (selectMode > SELECT_MODE_NONE) {
      if (!moveFocusDown(pageLength - 2)) {
        final int lastRendered=scrollBody.getLastRendered();
        if (lastRendered == totalRows - 1) {
          selectLastRenderedRow(false);
        }
 else {
          selectLastItemInNextRender=true;
        }
      }
 else {
        selectFocusedRow(false,false);
        sendSelectedRows();
      }
    }
  }
  if (keycode == getNavigationPageUpKey()) {
    int rowHeight=(int)scrollBody.getRowHeight();
    int offset=pageLength * rowHeight - rowHeight;
    bodyContainer.setScrollPosition(bodyContainer.getScrollPosition() - offset);
    if (selectMode > SELECT_MODE_NONE) {
      if (!moveFocusUp(pageLength - 2)) {
        final int firstRendered=scrollBody.getFirstRendered();
        if (firstRendered == 0) {
          selectFirstRenderedRow(false);
        }
 else {
          selectFirstItemInNextRender=true;
        }
      }
 else {
        selectFocusedRow(false,false);
        sendSelectedRows();
      }
    }
  }
  if (keycode == getNavigationStartKey()) {
    if (selectMode > SELECT_MODE_NONE) {
      final int firstRendered=scrollBody.getFirstRendered();
      boolean focusOnly=ctrl;
      if (firstRendered == 0) {
        selectFirstRenderedRow(focusOnly);
      }
 else       if (focusOnly) {
        focusFirstItemInNextRender=true;
      }
 else {
        selectFirstItemInNextRender=true;
      }
    }
    bodyContainer.setScrollPosition(0);
  }
  if (keycode == getNavigationEndKey()) {
    if (selectMode > SELECT_MODE_NONE) {
      final int lastRendered=scrollBody.getLastRendered();
      boolean focusOnly=ctrl;
      if (lastRendered == totalRows - 1) {
        selectLastRenderedRow(focusOnly);
      }
 else       if (focusOnly) {
        focusLastItemInNextRender=true;
      }
 else {
        selectLastItemInNextRender=true;
      }
    }
    bodyContainer.setScrollPosition(scrollBody.getOffsetHeight());
  }
  return true;
}
