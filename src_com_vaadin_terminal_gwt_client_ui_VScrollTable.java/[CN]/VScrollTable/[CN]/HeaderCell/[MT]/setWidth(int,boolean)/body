{
  if (ensureDefinedWidth) {
    definedWidth=true;
    expandRatio=0;
  }
  if (width == -1) {
    DOM.setStyleAttribute(captionContainer,"overflow","");
  }
  width=w;
  if (w == -1) {
    DOM.setStyleAttribute(captionContainer,"width","");
    setWidth("");
  }
 else {
    if (BrowserInfo.get().isIE6() || td.getClassName().contains("-asc") || td.getClassName().contains("-desc")) {
      int captionContainerWidth=w - sortIndicator.getOffsetWidth() - colResizeWidget.getOffsetWidth();
      captionContainer.getStyle().setPropertyPx("width",captionContainerWidth);
    }
 else {
      captionContainer.getStyle().setPropertyPx("width",w);
    }
    if (scrollBody != null) {
      int tdWidth=width + scrollBody.getCellExtraWidth();
      setWidth(tdWidth + "px");
    }
 else {
      Scheduler.get().scheduleDeferred(new Command(){
        public void execute(){
          int tdWidth=width + scrollBody.getCellExtraWidth();
          setWidth(tdWidth + "px");
        }
      }
);
    }
  }
}
