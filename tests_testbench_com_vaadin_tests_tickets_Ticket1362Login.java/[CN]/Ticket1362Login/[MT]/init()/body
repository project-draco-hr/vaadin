{
  final Window mainWin=new Window("Test app with password manager savvy login functionality");
  el=new VerticalLayout();
  currentUser.setCaption("Currennt user");
  el.addComponent(currentUser);
  el.addComponent(loginBox);
  el.setExpandRatio(loginBox,1);
  mainWin.setContent(el);
  setMainWindow(mainWin);
  mainPanel=new Panel("Test app");
  mainPanel.setSizeFull();
  mainPanel.addComponent(new Label("User is logged in"));
  mainPanel.addComponent(new Button("Logout",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      Ticket1362Login.this.close();
    }
  }
));
  loginBox.addLoginListener(new LoginListener(){
    public void onLogin(    LoginBox.LoginEvent event){
      String pw=event.getLoginParameter("password");
      String username=event.getLoginParameter("username");
      if (pw.equals("1234")) {
        setUser(username);
        currentUser.setValue(username);
        currentUser.getWindow().showNotification("Logged in user: " + username);
        getMainWindow().getContent().replaceComponent(loginBox,mainPanel);
        el.setExpandRatio(mainPanel,1);
      }
 else {
        getMainWindow().showNotification("Wrong password. Hint, try '1234' ",Notification.TYPE_WARNING_MESSAGE);
      }
    }
  }
);
}
