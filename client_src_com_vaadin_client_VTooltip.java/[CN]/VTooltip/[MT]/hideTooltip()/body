{
  if (opening) {
    showTimer.cancel();
    opening=false;
  }
  if (!isAttached()) {
    return;
  }
  if (closing) {
    return;
  }
  if (isActuallyVisible()) {
    closeTimer.schedule(getCloseTimeout());
    closing=true;
  }
}
