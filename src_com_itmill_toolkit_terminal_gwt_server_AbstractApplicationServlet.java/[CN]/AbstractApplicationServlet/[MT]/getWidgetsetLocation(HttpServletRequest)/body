{
  URL applicationURL=getApplicationUrl(request);
  String applicationPath=applicationURL.getPath();
  String pathParts[]=applicationPath.split("\\/");
  String ctxPath=request.getContextPath();
  if (ctxPath.length() == 0 && request.getAttribute("javax.servlet.include.context_path") != null) {
    ctxPath=(String)request.getAttribute("javax.servlet.include.context_path");
  }
  String widgetsetPath="";
  if (pathParts.length > 1 && pathParts[1].equals(ctxPath.replaceAll("\\/",""))) {
    widgetsetPath="/" + pathParts[1];
  }
  return widgetsetPath;
}
