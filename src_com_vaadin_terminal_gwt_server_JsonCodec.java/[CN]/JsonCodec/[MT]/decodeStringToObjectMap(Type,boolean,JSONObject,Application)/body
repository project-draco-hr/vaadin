{
  HashMap<String,Object> map=new HashMap<String,Object>();
  Iterator<String> it=jsonMap.keys();
  while (it.hasNext()) {
    String key=it.next();
    JSONArray encodedValueAndType=jsonMap.getJSONArray(key);
    Object decodedChild;
    if (!restrictToInternalTypes && targetType instanceof ParameterizedType) {
      Type mapValueType=((ParameterizedType)targetType).getActualTypeArguments()[1];
      decodedChild=decodeInternalOrCustomType(mapValueType,encodedValueAndType,application);
    }
 else {
      decodedChild=decodeInternalType(encodedValueAndType,application);
    }
    map.put(key,decodedChild);
  }
  return map;
}
