{
  JSONArray keys=new JSONArray();
  JSONArray values=new JSONArray();
  for (  Entry<?,?> entry : map.entrySet()) {
    Object encodedKey=encode(entry.getKey(),null,keyType,application);
    Object encodedValue=encode(entry.getValue(),null,valueType,application);
    keys.put(encodedKey);
    values.put(encodedValue);
  }
  return new JSONArray(Arrays.asList(keys,values));
}
