{
  LoggingClassLoader loggingClassLoader=new LoggingClassLoader();
  VaadinSession application=createStubApplication();
  application.start(new ApplicationStartEvent(null,createConfigurationMock(),null));
  DefaultUIProvider uiProvider=new DefaultUIProvider();
  Class<? extends UI> uiClass=uiProvider.getUIClass(application,createRequestMock(loggingClassLoader));
  assertEquals(MyUI.class,uiClass);
  assertEquals(1,loggingClassLoader.requestedClasses.size());
  assertEquals(MyUI.class.getName(),loggingClassLoader.requestedClasses.get(0));
}
