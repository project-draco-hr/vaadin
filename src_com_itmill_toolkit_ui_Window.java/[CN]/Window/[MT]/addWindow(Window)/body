{
  if (window == null) {
    throw new NullPointerException("Argument must not be null");
  }
  if (application.getWindows().contains(window)) {
    throw new IllegalArgumentException("Window was already added to application" + " - it can not be added to another window also.");
  }
  if (getParent() != null) {
    throw new IllegalArgumentException("You can only add windows inside application-level windows");
  }
  if (window.getWidth() < 0 && window.getLayout().getWidthUnits() == UNITS_PERCENTAGE) {
    window.getLayout().setWidth(-1,UNITS_PIXELS);
  }
  subwindows.add(window);
  window.setParent(this);
  requestRepaint();
}
