{
  String connectorId=connector.getConnectorId();
  if (!connectorIdToConnector.containsKey(connectorId)) {
    getLogger().warning("Tried to unregister " + connector.getClass().getSimpleName() + " ("+ connectorId+ ") which is not registered");
    return;
  }
  if (connectorIdToConnector.get(connectorId) != connector) {
    throw new RuntimeException("The given connector with id " + connectorId + " is not the one that was registered for that id");
  }
  getLogger().fine("Unregistered " + connector.getClass().getSimpleName() + " ("+ connectorId+ ")");
  removeFromGlobalResourceHandler(connector);
  connectorIdToConnector.remove(connectorId);
  uninitializedConnectors.remove(connector);
  diffStates.remove(connector);
}
