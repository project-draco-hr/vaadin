{
  boolean wasUnregistered=unregisteredConnectors.remove(connector);
  String connectorId=connector.getConnectorId();
  ClientConnector previouslyRegistered=connectorIdToConnector.get(connectorId);
  if (previouslyRegistered == null) {
    connectorIdToConnector.put(connectorId,connector);
    uninitializedConnectors.add(connector);
    getLogger().fine("Registered " + connector.getClass().getSimpleName() + " ("+ connectorId+ ")");
  }
 else   if (previouslyRegistered != connector) {
    throw new RuntimeException("A connector with id " + connectorId + " is already registered!");
  }
 else   if (!wasUnregistered) {
    getLogger().warning("An already registered connector was registered again: " + connector.getClass().getSimpleName() + " ("+ connectorId+ ")");
  }
  dirtyConnectors.add(connector);
}
