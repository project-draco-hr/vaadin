{
  final LinkedList<Item> rids=resourcePanel.getSelectedResources();
  if (rids != null && rids.size() > 0) {
    for (final Iterator<Item> it=rids.iterator(); it.hasNext(); ) {
      final Item resource=it.next();
      final int id=((Integer)resource.getItemProperty(SampleDB.Resource.PROPERTY_ID_ID).getValue()).intValue();
      if (db.isAvailableResource(id,(Date)reservedFrom.getValue(),(Date)reservedTo.getValue())) {
        return resource;
      }
    }
    throw new ResourceNotAvailableException("No available resources");
  }
 else {
    return null;
  }
}
