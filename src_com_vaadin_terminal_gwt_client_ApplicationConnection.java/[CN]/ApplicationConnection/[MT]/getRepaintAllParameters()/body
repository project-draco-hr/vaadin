{
  int clientHeight=Window.getClientHeight();
  int clientWidth=Window.getClientWidth();
  com.google.gwt.dom.client.Element pe=view.getElement().getParentElement();
  int offsetHeight=pe.getOffsetHeight();
  int offsetWidth=pe.getOffsetWidth();
  int screenWidth=BrowserInfo.get().getScreenWidth();
  int screenHeight=BrowserInfo.get().getScreenHeight();
  String token=History.getToken();
  String uri;
  if (configuration.usePortletURLs()) {
    uri="&";
  }
 else {
    uri="?";
  }
  uri+="repaintAll=1&" + "sh=" + screenHeight + "&sw="+ screenWidth+ "&cw="+ clientWidth+ "&ch="+ clientHeight+ "&vw="+ offsetWidth+ "&vh="+ offsetHeight+ "&fr="+ token;
  return uri;
}
