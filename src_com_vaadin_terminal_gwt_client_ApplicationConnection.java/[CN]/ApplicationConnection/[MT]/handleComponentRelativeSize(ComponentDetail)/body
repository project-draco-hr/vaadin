{
  if (cd == null) {
    return false;
  }
  boolean debugSizes=false;
  FloatSize relativeSize=cd.getRelativeSize();
  if (relativeSize == null) {
    return false;
  }
  Widget widget=(Widget)cd.getComponent();
  boolean horizontalScrollBar=false;
  boolean verticalScrollBar=false;
  Container parent=Util.getLayout(widget);
  RenderSpace renderSpace;
  if (parent == null) {
    renderSpace=new RenderSpace(Window.getClientWidth(),Window.getClientHeight());
  }
 else {
    renderSpace=parent.getAllocatedSpace(widget);
  }
  if (relativeSize.getHeight() >= 0) {
    if (renderSpace != null) {
      if (renderSpace.getScrollbarSize() > 0) {
        if (relativeSize.getWidth() > 100) {
          horizontalScrollBar=true;
        }
 else         if (relativeSize.getWidth() < 0 && renderSpace.getWidth() > 0) {
          int offsetWidth=widget.getOffsetWidth();
          int width=renderSpace.getWidth();
          if (offsetWidth > width) {
            horizontalScrollBar=true;
          }
        }
      }
      int height=renderSpace.getHeight();
      if (horizontalScrollBar) {
        height-=renderSpace.getScrollbarSize();
      }
      if (validatingLayouts && height <= 0) {
        zeroHeightComponents.add(cd.getComponent());
      }
      height=(int)(height * relativeSize.getHeight() / 100.0);
      if (height < 0) {
        height=0;
      }
      if (debugSizes) {
        VConsole.log("Widget " + Util.getSimpleName(widget) + "/"+ getPid(widget.getElement())+ " relative height "+ relativeSize.getHeight()+ "% of "+ renderSpace.getHeight()+ "px (reported by "+ Util.getSimpleName(parent)+ "/"+ (parent == null ? "?" : parent.hashCode())+ ") : "+ height+ "px");
      }
      widget.setHeight(height + "px");
    }
 else {
      widget.setHeight(relativeSize.getHeight() + "%");
      VConsole.error(Util.getLayout(widget).getClass().getName() + " did not produce allocatedSpace for " + widget.getClass().getName());
    }
  }
  if (relativeSize.getWidth() >= 0) {
    if (renderSpace != null) {
      int width=renderSpace.getWidth();
      if (renderSpace.getScrollbarSize() > 0) {
        if (relativeSize.getHeight() > 100) {
          verticalScrollBar=true;
        }
 else         if (relativeSize.getHeight() < 0 && renderSpace.getHeight() > 0 && widget.getOffsetHeight() > renderSpace.getHeight()) {
          verticalScrollBar=true;
        }
      }
      if (verticalScrollBar) {
        width-=renderSpace.getScrollbarSize();
      }
      if (validatingLayouts && width <= 0) {
        zeroWidthComponents.add(cd.getComponent());
      }
      width=(int)(width * relativeSize.getWidth() / 100.0);
      if (width < 0) {
        width=0;
      }
      if (debugSizes) {
        VConsole.log("Widget " + Util.getSimpleName(widget) + "/"+ getPid(widget.getElement())+ " relative width "+ relativeSize.getWidth()+ "% of "+ renderSpace.getWidth()+ "px (reported by "+ Util.getSimpleName(parent)+ "/"+ (parent == null ? "?" : getPid(parent))+ ") : "+ width+ "px");
      }
      widget.setWidth(width + "px");
    }
 else {
      widget.setWidth(relativeSize.getWidth() + "%");
      VConsole.error(Util.getLayout(widget).getClass().getName() + " did not produce allocatedSpace for " + widget.getClass().getName());
    }
  }
  return true;
}
