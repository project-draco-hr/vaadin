{
  LegacyWindow mainWindow=new LegacyWindow();
  setMainWindow(mainWindow);
  final Table table=new Table("Test table");
  table.addContainerProperty("Name",String.class,null,"Name",null,null);
  table.setItemCaptionPropertyId("Name");
  table.setHeight("100px");
  table.setImmediate(true);
  table.addItem("1").getItemProperty("Name").setValue("Item 1");
  table.addItem("2").getItemProperty("Name").setValue("Item 2");
  CheckBox showHeaders=new CheckBox("Show headers");
  showHeaders.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      if ((Boolean)event.getProperty().getValue()) {
        table.setColumnHeaderMode(Table.COLUMN_HEADER_MODE_EXPLICIT_DEFAULTS_ID);
      }
 else {
        table.setColumnHeaderMode(Table.COLUMN_HEADER_MODE_HIDDEN);
      }
    }
  }
);
  showHeaders.setValue(true);
  showHeaders.setImmediate(true);
  mainWindow.addComponent(showHeaders);
  mainWindow.addComponent(table);
}
