{
  final LegacyDateField df=new LegacyDateField();
  df.setLocale(locale24hClock);
  df.setResolution(Resolution.SECOND);
  df.setValue(dateValue);
  Button button=new Button(String.format(caption,"12"));
  button.addClickListener(new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      if (locale12hClock.equals(df.getLocale())) {
        df.setLocale(locale24hClock);
        event.getButton().setCaption(String.format(caption,"12"));
      }
 else {
        df.setLocale(locale12hClock);
        event.getButton().setCaption(String.format(caption,"24"));
      }
    }
  }
);
  addComponent(df);
  addComponent(button);
}
