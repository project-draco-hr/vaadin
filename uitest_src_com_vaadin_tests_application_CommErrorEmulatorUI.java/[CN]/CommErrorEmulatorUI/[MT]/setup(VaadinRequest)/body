{
  String transport=request.getParameter("transport");
  if ("websocket".equalsIgnoreCase(transport)) {
    getPushConfiguration().setPushMode(PushMode.AUTOMATIC);
    getPushConfiguration().setTransport(Transport.WEBSOCKET);
    log("Using websocket");
  }
 else   if ("long-polling".equalsIgnoreCase(transport)) {
    getPushConfiguration().setPushMode(PushMode.AUTOMATIC);
    getPushConfiguration().setTransport(Transport.LONG_POLLING);
    log("Using long-polling");
  }
 else {
    log("Using XHR");
  }
  getLayout().setSpacing(true);
  addComponent(createConfigPanel());
  addComponent(createServerConfigPanel());
  addComponent(new Button("Say hello",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      log("Hello");
    }
  }
));
}
