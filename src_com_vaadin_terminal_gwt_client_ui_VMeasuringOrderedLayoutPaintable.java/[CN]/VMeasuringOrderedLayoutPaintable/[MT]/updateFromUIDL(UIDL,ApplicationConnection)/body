{
  super.updateFromUIDL(uidl,client);
  if (!isRealUpdate(uidl)) {
    return;
  }
  HashSet<VPaintableWidget> previousChildren=new HashSet<VPaintableWidget>(getChildren());
  VMeasuringOrderedLayout layout=getWidgetForPaintable();
  ValueMap expandRatios=uidl.getMapAttribute("expandRatios");
  ValueMap alignments=uidl.getMapAttribute("alignments");
  int currentIndex=0;
  for (final Iterator<Object> it=uidl.getChildIterator(); it.hasNext(); ) {
    final UIDL childUIDL=(UIDL)it.next();
    final VPaintableWidget child=client.getPaintable(childUIDL);
    Widget widget=child.getWidgetForPaintable();
    VLayoutSlot slot=layout.getSlotForChild(widget);
    if (widget.getParent() != layout) {
      slot=new VPaintableLayoutSlot(getWidgetForPaintable().getStylePrimaryName(),child);
    }
    layout.addOrMove(slot,currentIndex++);
    String pid=child.getId();
    AlignmentInfo alignment;
    if (alignments.containsKey(pid)) {
      alignment=new AlignmentInfo(alignments.getInt(pid));
    }
 else {
      alignment=AlignmentInfo.TOP_LEFT;
    }
    slot.setAlignment(alignment);
    double expandRatio;
    if (expandRatios.containsKey(pid)) {
      expandRatio=expandRatios.getRawNumber(pid);
    }
 else {
      expandRatio=0;
    }
    slot.setExpandRatio(expandRatio);
    if (!childUIDL.getBooleanAttribute("cached")) {
      child.updateFromUIDL(childUIDL,client);
    }
    previousChildren.remove(child);
  }
  for (  VPaintableWidget child : previousChildren) {
    Widget widget=child.getWidgetForPaintable();
    if (widget.getParent() == getWidgetForPaintable()) {
      layout.removeSlot(layout.getSlotForChild(widget));
      VPaintableMap vPaintableMap=VPaintableMap.get(client);
      vPaintableMap.unregisterPaintable(child);
    }
  }
  while (true) {
    int childCount=layout.getElement().getChildCount();
    if (childCount <= 1) {
      break;
    }
    Node lastSlot=layout.getElement().getChild(childCount - 2);
    if (lastSlot.getChildCount() == 0) {
      lastSlot.removeFromParent();
    }
 else {
      break;
    }
  }
  int bitMask=uidl.getIntAttribute("margins");
  layout.updateMarginStyleNames(new VMarginInfo(bitMask));
  layout.updateSpacingStyleName(uidl.getBooleanAttribute("spacing"));
  getLayoutManager().setNeedsUpdate(this);
}
