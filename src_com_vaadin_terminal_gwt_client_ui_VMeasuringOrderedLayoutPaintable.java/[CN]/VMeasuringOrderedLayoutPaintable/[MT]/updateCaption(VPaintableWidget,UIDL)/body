{
  if (VCaption.isNeeded(uidl)) {
    VCaption caption=getWidgetForPaintable().captions.get(component);
    if (caption == null) {
      caption=new VCaption(component,getConnection());
      Widget widget=component.getWidgetForPaintable();
      getWidgetForPaintable().addCaption(caption,widget);
      getWidgetForPaintable().captions.put(component,caption);
      getMeasuredSize().registerDependency(caption.getElement());
    }
    caption.updateCaption(uidl);
  }
 else {
    VCaption removedCaption=getWidgetForPaintable().captions.remove(component);
    if (removedCaption != null) {
      getWidgetForPaintable().remove(removedCaption);
      getMeasuredSize().deRegisterDependency(removedCaption.getElement());
    }
  }
}
