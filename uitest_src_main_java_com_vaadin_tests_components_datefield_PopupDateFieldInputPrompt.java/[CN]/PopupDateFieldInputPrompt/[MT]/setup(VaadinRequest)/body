{
  text.addValueChangeListener(new ValueChangeListener(){
    private static final long serialVersionUID=1L;
    @Override public void valueChange(    ValueChangeEvent event){
      dateField.setRequired(!dateField.isRequired());
    }
  }
);
  dateField.setInputPrompt("prompt");
  dateField.setCaption("PopupDateField");
  addComponent(text);
  addComponent(dateField);
}
