{
  super(false,false);
  this.client=client;
  conf=cnf;
  panel=new FlowPanel();
  if (showWindow) {
    DOM.appendChild(getContainerElement(),caption);
    setWidget(panel);
    caption.setClassName("v-debug-console-caption");
    setStyleName("v-debug-console");
    DOM.setStyleAttribute(getElement(),"zIndex",20000 + "");
    DOM.setStyleAttribute(getElement(),"overflow","hidden");
    sinkEvents(Event.ONDBLCLICK);
    sinkEvents(Event.MOUSEEVENTS);
    panel.setStyleName("v-debug-console-content");
    caption.setInnerHTML("Debug window");
    caption.setTitle(help);
    show();
    minimize();
    actions=new HorizontalPanel();
    actions.add(clear);
    actions.add(restart);
    actions.add(forceLayout);
    actions.add(analyzeLayout);
    panel.add(actions);
    panel.add(new HTML("<i>" + help + "</i>"));
    clear.addClickHandler(new ClickHandler(){
      public void onClick(      ClickEvent event){
        int width=panel.getOffsetWidth();
        int height=panel.getOffsetHeight();
        panel=new FlowPanel();
        panel.setPixelSize(width,height);
        panel.setStyleName("v-debug-console-content");
        panel.add(actions);
        setWidget(panel);
      }
    }
);
    restart.addClickHandler(new ClickHandler(){
      public void onClick(      ClickEvent event){
        String queryString=Window.Location.getQueryString();
        if (queryString != null && queryString.contains("restartApplications")) {
          Window.Location.reload();
        }
 else {
          String url=Location.getHref();
          String separator="?";
          if (url.contains("?")) {
            separator="&";
          }
          if (!url.contains("restartApplication")) {
            url+=separator;
            url+="restartApplication";
          }
          if (!"".equals(Location.getHash())) {
            String hash=Location.getHash();
            url=url.replace(hash,"") + hash;
          }
          Window.Location.replace(url);
        }
      }
    }
);
    forceLayout.addClickHandler(new ClickHandler(){
      public void onClick(      ClickEvent event){
        VDebugConsole.this.client.forceLayout();
      }
    }
);
    analyzeLayout.addClickHandler(new ClickHandler(){
      public void onClick(      ClickEvent event){
        List<ApplicationConnection> runningApplications=ApplicationConfiguration.getRunningApplications();
        for (        ApplicationConnection applicationConnection : runningApplications) {
          applicationConnection.analyzeLayouts();
        }
      }
    }
);
    analyzeLayout.setTitle("Analyzes currently rendered view and " + "reports possible common problems in usage of relative sizes." + "Will cause server visit/rendering of whole screen + lose of"+ " all non committed variables form client side.");
  }
  log("Vaadin application servlet version: " + cnf.getServletVersion());
  log("Widget set is built on version: " + VERSION);
  log("Application version: " + cnf.getApplicationVersion());
  if (!cnf.getServletVersion().equals(VERSION)) {
    error("Warning: your widget set seems to be built with a different " + "version than the one used on server. Unexpected " + "behavior may occur.");
  }
  logToDebugWindow("<div class=\"v-theme-version v-theme-version-" + VERSION.replaceAll("\\.","_") + "\">Warning: widgetset version "+ VERSION+ " does not seem to match theme version </div>",true);
}
