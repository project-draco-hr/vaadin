{
  Collection<ClientConnector> dirtyVisibleConnectors=ui.getConnectorTracker().getDirtyVisibleConnectors();
  JSONObject connectorTypes=new JSONObject();
  for (  ClientConnector connector : dirtyVisibleConnectors) {
    String connectorType=target.getTag(connector);
    try {
      connectorTypes.put(connector.getConnectorId(),connectorType);
    }
 catch (    JSONException e) {
      throw new PaintException("Failed to send connector type for connector " + connector.getConnectorId() + ": "+ e.getMessage(),e);
    }
  }
  writer.write(connectorTypes.toString());
}
