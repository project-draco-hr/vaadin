{
  if (Caption.isNeeded(uidl)) {
    if (captionWrapper != null) {
      captionWrapper.updateCaption(uidl);
    }
 else {
      captionWrapper=new CaptionWrapper(component,client);
      setWidget(captionWrapper);
      captionWrapper.updateCaption(uidl);
    }
  }
 else {
    if (captionWrapper != null) {
      setWidget(popupComponentWidget);
    }
  }
}
