{
  super();
  popup=new CustomPopup();
  setStyleName(CLASSNAME);
  popup.setStylePrimaryName(CLASSNAME + "-popup");
  this.setHTML("PopupPanel");
  popup.setWidget(loading);
  this.addClickListener(new ClickListener(){
    public void onClick(    Widget sender){
      updateState(true);
    }
  }
);
  popup.addPopupListener(new PopupListener(){
    public void onPopupClosed(    PopupPanel sender,    boolean autoClosed){
      updateState(false);
    }
  }
);
}
