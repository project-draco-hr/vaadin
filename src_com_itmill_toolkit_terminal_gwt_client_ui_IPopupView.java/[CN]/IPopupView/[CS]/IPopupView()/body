{
  super();
  popup=new CustomPopup();
  setStyleName(CLASSNAME);
  popup.setStylePrimaryName(CLASSNAME + "-popup");
  setHTML("PopupPanel");
  popup.setWidget(loading);
  addClickListener(new ClickListener(){
    public void onClick(    Widget sender){
      updateState(true);
    }
  }
);
  popup.addPopupListener(new PopupListener(){
    public void onPopupClosed(    PopupPanel sender,    boolean autoClosed){
      ((CustomPopup)sender).syncChildren();
      updateState(false);
    }
  }
);
  popup.setAnimationEnabled(true);
}
