{
  popup.setPopupPositionAndShow(new PopupPanel.PositionCallback(){
    public void setPosition(    int offsetWidth,    int offsetHeight){
      int hostHorizontalCenter=host.getAbsoluteLeft() + host.getOffsetWidth() / 2;
      int hostVerticalCenter=host.getAbsoluteTop() + host.getOffsetHeight() / 2;
      int left=hostHorizontalCenter - offsetWidth / 2;
      int top=hostVerticalCenter - offsetHeight / 2;
      if ((left + offsetWidth) > windowRight) {
        left-=(left + offsetWidth) - windowRight;
      }
      if ((top + offsetHeight) > windowBottom) {
        top-=(top + offsetHeight) - windowBottom;
      }
      popup.setPopupPosition(left,top);
    }
  }
);
}
