{
  DesignSynchronizable component=instantiateComponent(componentDesign);
  org.jsoup.nodes.Attributes attributes=componentDesign.attributes();
  String id=attributes.get(ID_ATTRIBUTE);
  if (id != null && id.length() > 0) {
    Component oldComponent=globalIds.put(camelCase(id),component);
    if (oldComponent != null) {
      throw new RuntimeException("Duplicate ids: " + id);
    }
  }
  String localId=null;
  for (  Attribute attribute : attributes.asList()) {
    if (attribute.getKey().startsWith(LOCAL_ID_PREFIX)) {
      if (localId != null) {
        throw new RuntimeException("Duplicate local ids specified: " + localId + " and "+ attribute.getValue());
      }
      localId=attribute.getKey().substring(LOCAL_ID_PREFIX.length());
      localIds.put(camelCase(localId),component);
    }
  }
  String caption=null;
  if (componentDesign.nodeName().equals("v-button")) {
    String buttonCaption=textContent(componentDesign);
    if (buttonCaption != null && !(buttonCaption.equals(""))) {
      caption=buttonCaption;
    }
  }
  if (caption == null) {
    String componentCaption=attributes.get(CAPTION_ATTRIBUTE);
    if (componentCaption != null && !("".equals(componentCaption))) {
      caption=componentCaption;
    }
  }
  if (caption != null) {
    Component oldComponent=captions.put(camelCase(caption),component);
    if (oldComponent != null) {
      throw new RuntimeException("Duplicate captions: " + caption);
    }
  }
  return component;
}
