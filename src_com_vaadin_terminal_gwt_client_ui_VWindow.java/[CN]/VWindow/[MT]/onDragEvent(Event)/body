{
switch (DOM.eventGetType(event)) {
case Event.ONMOUSEDOWN:
    if (!isActive()) {
      bringToFront();
    }
  showDraggingCurtain(true);
dragging=true;
startX=DOM.eventGetScreenX(event);
startY=DOM.eventGetScreenY(event);
origX=DOM.getAbsoluteLeft(getElement());
origY=DOM.getAbsoluteTop(getElement());
DOM.setCapture(getElement());
DOM.eventPreventDefault(event);
break;
case Event.ONMOUSEUP:
dragging=false;
showDraggingCurtain(false);
DOM.releaseCapture(getElement());
break;
case Event.ONLOSECAPTURE:
showDraggingCurtain(false);
dragging=false;
break;
case Event.ONMOUSEMOVE:
if (dragging) {
centered=false;
if (cursorInsideBrowserContentArea(event)) {
final int x=DOM.eventGetScreenX(event) - startX + origX;
final int y=DOM.eventGetScreenY(event) - startY + origY;
setPopupPosition(x,y);
}
DOM.eventPreventDefault(event);
}
break;
default :
break;
}
}
