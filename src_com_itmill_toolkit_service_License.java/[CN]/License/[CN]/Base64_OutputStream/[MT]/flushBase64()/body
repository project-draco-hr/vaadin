{
  if (position > 0) {
    if (encode) {
      out.write(base64_encode3to4(b4,buffer,position));
      position=0;
    }
 else {
      throw new java.io.IOException("Base64 input not properly padded.");
    }
  }
}
