{
  if (suspendEncoding) {
    super.out.write(theByte);
    return;
  }
  if (encode) {
    buffer[position++]=(byte)theByte;
    if (position >= bufferLength) {
      out.write(base64_encode3to4(b4,buffer,bufferLength));
      lineLength+=4;
      if (breakLines && lineLength >= Base64_MAX_LINE_LENGTH) {
        out.write(Base64_NEW_LINE);
        lineLength=0;
      }
      position=0;
    }
  }
 else {
    if (Base64_DECODABET[theByte & 0x7f] > Base64_WHITE_SPACE_ENC) {
      buffer[position++]=(byte)theByte;
      if (position >= bufferLength) {
        int len=base64_decode4to3(buffer,0,b4,0);
        out.write(b4,0,len);
        position=0;
      }
    }
 else     if (Base64_DECODABET[theByte & 0x7f] != Base64_WHITE_SPACE_ENC) {
      throw new java.io.IOException("Invalid character in Base64 data.");
    }
  }
}
