{
  ApplicationServlet as=(ApplicationServlet)((Object[])state.get())[WEBADAPTERSERVLET];
  Theme t=as.getThemeSource().getThemeByName(theme());
  Vector themes=new Vector();
  themes.add(t);
  while (t.getParent() != null) {
    String parentName=t.getParent();
    t=as.getThemeSource().getThemeByName(parentName);
    themes.add(t);
  }
  StringBuffer links=new StringBuffer();
  for (int k=themes.size() - 1; k >= 0; k--) {
    Collection allFiles=((Theme)themes.get(k)).getFileNames(browser(),Theme.MODE_HTML);
    for (Iterator i=allFiles.iterator(); i.hasNext(); ) {
      String file=(String)i.next();
      if (file.endsWith(".js")) {
        links.append("<SCRIPT LANGUAGE=\"Javascript\" SRC=\"" + resource(file) + "\"></SCRIPT>\n");
      }
    }
  }
  return links.toString();
}
