{
  OrderedLayout mainExpand=new OrderedLayout();
  setLayout(mainExpand);
  setSizeFull();
  mainExpand.setSizeFull();
  OrderedLayout nav=new OrderedLayout(OrderedLayout.ORIENTATION_HORIZONTAL);
  mainExpand.addComponent(nav);
  nav.setHeight("40px");
  nav.setWidth("100%");
  nav.setStyleName("topbar");
  nav.setSpacing(true);
  nav.setMargin(false,true,false,true);
  Component logo=createLogo();
  nav.addComponent(logo);
  nav.setComponentAlignment(logo,ExpandLayout.ALIGNMENT_LEFT,ExpandLayout.ALIGNMENT_VERTICAL_CENTER);
  nav.setExpandRatio(logo,1);
  nav.addComponent(webAnalytics);
  nav.addComponent(uriFragmentUtility);
  uriFragmentUtility.addListener(new FragmentChangedListener(){
    public void fragmentChanged(    FragmentChangedEvent source){
      String frag=source.getUriFragmentUtility().getFragment();
      setFeature(frag);
    }
  }
);
  Button b=createPrevButton();
  nav.addComponent(b);
  nav.setComponentAlignment(b,ExpandLayout.ALIGNMENT_LEFT,ExpandLayout.ALIGNMENT_VERTICAL_CENTER);
  b=createNextButton();
  nav.addComponent(b);
  nav.setComponentAlignment(b,ExpandLayout.ALIGNMENT_LEFT,ExpandLayout.ALIGNMENT_VERTICAL_CENTER);
  Component search=createSearch();
  nav.addComponent(search);
  nav.setComponentAlignment(search,ExpandLayout.ALIGNMENT_LEFT,ExpandLayout.ALIGNMENT_VERTICAL_CENTER);
  mainSplit=new SplitPanel(SplitPanel.ORIENTATION_HORIZONTAL);
  mainSplit.setSizeFull();
  mainExpand.addComponent(mainSplit);
  mainExpand.setExpandRatio(mainSplit,1);
  navigationTree=createMenuTree();
  mainSplit.addComponent(navigationTree);
  mainSplit.addComponent(mainArea);
  Component treeSwitch=createTreeSwitch();
  nav.addComponent(treeSwitch);
  nav.setComponentAlignment(treeSwitch,OrderedLayout.ALIGNMENT_LEFT,OrderedLayout.ALIGNMENT_VERTICAL_CENTER);
  Component mode=createModeSwitch();
  nav.addComponent(mode);
  nav.setComponentAlignment(mode,OrderedLayout.ALIGNMENT_RIGHT,OrderedLayout.ALIGNMENT_VERTICAL_CENTER);
}
