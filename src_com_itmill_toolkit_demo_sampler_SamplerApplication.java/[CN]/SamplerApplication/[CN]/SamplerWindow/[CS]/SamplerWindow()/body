{
  VerticalLayout mainExpand=new VerticalLayout();
  setLayout(mainExpand);
  setSizeFull();
  mainExpand.setSizeFull();
  HorizontalLayout nav=new HorizontalLayout();
  mainExpand.addComponent(nav);
  nav.setHeight("50px");
  nav.setWidth("100%");
  nav.setStyleName("topbar");
  nav.setSpacing(true);
  nav.setMargin(false,true,false,true);
  Component logo=createLogo();
  nav.addComponent(logo);
  nav.setComponentAlignment(logo,Alignment.MIDDLE_LEFT);
  nav.addComponent(breadcrumbs);
  nav.setExpandRatio(breadcrumbs,1);
  nav.setComponentAlignment(breadcrumbs,Alignment.MIDDLE_LEFT);
  nav.addComponent(webAnalytics);
  nav.addComponent(uriFragmentUtility);
  uriFragmentUtility.addListener(new FragmentChangedListener(){
    public void fragmentChanged(    FragmentChangedEvent source){
      String frag=source.getUriFragmentUtility().getFragment();
      setFeature(frag);
    }
  }
);
  previousSample=createPrevButton();
  nav.addComponent(previousSample);
  nav.setComponentAlignment(previousSample,Alignment.MIDDLE_RIGHT);
  nextSample=createNextButton();
  nav.addComponent(nextSample);
  nav.setComponentAlignment(nextSample,Alignment.MIDDLE_LEFT);
  Component search=createSearch();
  nav.addComponent(search);
  nav.setComponentAlignment(search,Alignment.MIDDLE_LEFT);
  toggleBar.setHeight("40px");
  toggleBar.setWidth("100%");
  toggleBar.setStyleName("togglebar");
  toggleBar.setSpacing(true);
  toggleBar.setMargin(false,true,false,true);
  mainSplit=new SplitPanel(SplitPanel.ORIENTATION_HORIZONTAL);
  mainSplit.setSizeFull();
  mainExpand.addComponent(mainSplit);
  mainExpand.setExpandRatio(mainSplit,1);
  VerticalLayout rightLayout=new VerticalLayout();
  rightLayout.setSizeFull();
  rightLayout.addComponent(toggleBar);
  navigationTree=createMenuTree();
  mainSplit.addComponent(navigationTree);
  mainSplit.addComponent(rightLayout);
  rightLayout.addComponent(mainArea);
  rightLayout.setExpandRatio(mainArea,1);
  Component mode=createModeSwitch();
  toggleBar.addComponent(mode);
  toggleBar.setComponentAlignment(mode,Alignment.MIDDLE_RIGHT);
  Component treeSwitch=createTreeSwitch();
  nav.addComponent(treeSwitch);
  nav.setComponentAlignment(treeSwitch,Alignment.MIDDLE_RIGHT);
  addListener(new CloseListener(){
    public void windowClose(    CloseEvent e){
      if (getMainWindow() != SamplerWindow.this) {
        SamplerApplication.this.removeWindow(SamplerWindow.this);
      }
    }
  }
);
}
