{
  final Tree tree=new Tree();
  tree.setImmediate(true);
  tree.setContainerDataSource(allFeatures);
  currentFeature.addListener(new Property.ValueChangeListener(){
    public void valueChange(    ValueChangeEvent event){
      Feature f=(Feature)event.getProperty().getValue();
      Feature v=(Feature)tree.getValue();
      if ((f != null && !f.equals(v)) || (f == null && v != null)) {
        tree.setValue(f);
      }
    }
  }
);
  for (int i=0; i < FeatureSet.FEATURES.getFeatures().length; i++) {
    tree.expandItemsRecursively(FeatureSet.FEATURES.getFeatures()[i]);
  }
  tree.expandItemsRecursively(FeatureSet.FEATURES);
  tree.addListener(new Tree.ValueChangeListener(){
    public void valueChange(    ValueChangeEvent event){
      Feature f=(Feature)event.getProperty().getValue();
      setFeature(f);
    }
  }
);
  return tree;
}
