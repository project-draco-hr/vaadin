{
  setStyleName("featuretable");
  alwaysRecalculateColumnWidths=true;
  setSelectable(false);
  setSizeFull();
  setColumnHeaderMode(Table.COLUMN_HEADER_MODE_HIDDEN);
  addGeneratedColumn(Feature.PROPERTY_ICON,new Table.ColumnGenerator(){
    public Component generateCell(    Table source,    Object itemId,    Object columnId){
      Feature f=(Feature)itemId;
      Resource res=new ClassResource(f.getClass(),f.getIconName(),SamplerApplication.this);
      Embedded emb=new Embedded("",res);
      emb.setWidth("48px");
      emb.setHeight("48px");
      emb.setType(Embedded.TYPE_IMAGE);
      return emb;
    }
  }
);
  addGeneratedColumn("",new Table.ColumnGenerator(){
    public Component generateCell(    Table source,    Object itemId,    Object columnId){
      final Feature feature=(Feature)itemId;
      ActiveLink b=new ActiveLink((feature instanceof FeatureSet ? "View section ???" : "View sample ???"),new ExternalResource("#" + getPathFor(feature)));
      b.addListener(new ActiveLink.LinkActivatedListener(){
        public void linkActivated(        LinkActivatedEvent event){
          if (!event.isLinkOpened()) {
            ((SamplerWindow)getWindow()).setFeature(feature);
          }
        }
      }
);
      b.setStyleName(Button.STYLE_LINK);
      return b;
    }
  }
);
  addListener(new ItemClickListener(){
    public void itemClick(    ItemClickEvent event){
      Feature f=(Feature)event.getItemId();
      if (event.getButton() == ItemClickEvent.BUTTON_MIDDLE || event.isCtrlKey() || event.isShiftKey()) {
        getWindow().open(new ExternalResource(getURL() + "#" + getPathFor(f)),"_blank");
      }
 else {
        ((SamplerWindow)getWindow()).setFeature(f);
      }
    }
  }
);
  setCellStyleGenerator(new CellStyleGenerator(){
    public String getStyle(    Object itemId,    Object propertyId){
      if (propertyId == null && itemId instanceof FeatureSet) {
        if (allFeatures.isRoot(itemId)) {
          return "section";
        }
 else {
          return "subsection";
        }
      }
      return null;
    }
  }
);
}
