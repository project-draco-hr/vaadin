{
  try {
    Application app=(Application)((Object[])state.get())[APPLICATION];
    Calendar cal=new GregorianCalendar(app.getLocale());
    int first=cal.getFirstDayOfWeek();
    for (int i=0; i < 7; i++) {
      if (first == weekdays[i])       return i;
    }
    return 0;
  }
 catch (  NullPointerException e) {
    throw new IllegalStateException();
  }
}
