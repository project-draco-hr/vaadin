{
  if (state != null && !cached) {
    boolean widthDefined=!state.isUndefinedWidth();
    boolean heightDefined=!state.isUndefinedHeight();
    if (heightDefined && state.getHeight().contains("%")) {
      relHeight=true;
    }
 else {
      relHeight=false;
    }
    if (widthDefined) {
      widthCanAffectHeight=relWidth=state.getWidth().contains("%");
      if (heightDefined) {
        widthCanAffectHeight=false;
      }
    }
 else {
      widthCanAffectHeight=!heightDefined;
      relWidth=false;
    }
  }
}
