{
  Widget widget=paintable.getWidget();
  VCaption caption=widgetToCaption.get(widget);
  if (VCaption.isNeeded(paintable.getState())) {
    if (caption == null) {
      caption=new VCaption(paintable,client);
      widgetToCaption.put(widget,caption);
      insert(caption,getWidgetIndex(widget));
      lastIndex++;
    }
 else     if (!caption.isAttached()) {
      insert(caption,getWidgetIndex(widget));
      lastIndex++;
    }
    caption.updateCaption();
  }
 else   if (caption != null) {
    remove(caption);
    widgetToCaption.remove(widget);
  }
}
