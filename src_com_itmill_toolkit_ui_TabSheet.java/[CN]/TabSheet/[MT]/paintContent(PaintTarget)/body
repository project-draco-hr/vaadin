{
  if (areTabsHidden()) {
    target.addAttribute("hidetabs",true);
  }
  target.startTag("tabs");
  for (final Iterator i=getComponentIterator(); i.hasNext(); ) {
    final Component c=(Component)i.next();
    if (!c.isVisible()) {
      continue;
    }
    if (selected == null || !selected.isVisible()) {
      selected=c;
    }
    target.startTag("tab");
    if (!c.isEnabled()) {
      target.addAttribute("disabled",true);
    }
    final Resource icon=getTabIcon(c);
    if (icon != null) {
      target.addAttribute("icon",icon);
    }
    final String caption=getTabCaption(c);
    if (caption != null && caption.length() > 0) {
      target.addAttribute("caption",caption);
    }
    if (c instanceof AbstractComponent) {
      AbstractComponent ac=(AbstractComponent)c;
      if (ac.getDescription() != null) {
        target.addAttribute("description",ac.getDescription());
      }
      if (ac.getComponentError() != null) {
        ac.getComponentError().paint(target);
      }
    }
    target.addAttribute("key",keyMapper.key(c));
    if (c.equals(selected)) {
      target.addAttribute("selected",true);
      c.paint(target);
      paintedTabs.add(c);
    }
 else     if (paintedTabs.contains(c)) {
      c.paint(target);
    }
 else {
      c.requestRepaintRequests();
    }
    target.endTag("tab");
  }
  target.endTag("tabs");
  if (selected != null) {
    target.addVariable(this,"selected",keyMapper.key(selected));
  }
}
