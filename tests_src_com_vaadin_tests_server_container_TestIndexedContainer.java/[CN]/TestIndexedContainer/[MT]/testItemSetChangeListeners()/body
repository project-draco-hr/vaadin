{
  IndexedContainer container=new IndexedContainer();
  ItemSetChangeCounter counter=new ItemSetChangeCounter();
  container.addListener(counter);
  String id1="id1";
  String id2="id2";
  String id3="id3";
  initializeContainer(container);
  counter.reset();
  container.addItem();
  counter.assertOnce();
  container.addItem(id1);
  counter.assertOnce();
  initializeContainer(container);
  counter.reset();
  container.addItemAt(0);
  counter.assertOnce();
  container.addItemAt(0,id1);
  counter.assertOnce();
  container.addItemAt(0,id2);
  counter.assertOnce();
  container.addItemAt(container.size(),id3);
  counter.assertOnce();
  container.addItemAt(0,id1);
  counter.assertNone();
  initializeContainer(container);
  counter.reset();
  container.addItemAfter(null);
  counter.assertOnce();
  container.addItemAfter(null,id1);
  counter.assertOnce();
  container.addItemAfter(id1);
  counter.assertOnce();
  container.addItemAfter(id1,id2);
  counter.assertOnce();
  container.addItemAfter(container.firstItemId());
  counter.assertOnce();
  container.addItemAfter(container.lastItemId());
  counter.assertOnce();
  container.addItemAfter(container.lastItemId(),id3);
  counter.assertOnce();
  container.addItemAfter(0,id1);
  counter.assertNone();
  initializeContainer(container);
  counter.reset();
  container.removeItem(sampleData[0]);
  counter.assertOnce();
  initializeContainer(container);
  counter.reset();
  container.removeItem(id1);
  counter.assertNone();
  initializeContainer(container);
  counter.reset();
  container.removeAllItems();
  counter.assertOnce();
  container.removeAllItems();
  counter.assertNone();
}
