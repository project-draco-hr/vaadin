{
  final VerticalLayout lo=new VerticalLayout();
  addComponent(lo);
  final ProgressIndicator pi=new ProgressIndicator();
  pi.setPollingInterval(400);
  lo.addComponent(pi);
  final Button b=new Button("Hide container of progress indicator");
  addComponent(b);
  b.addListener(new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      lo.setVisible(!lo.isVisible());
      pi.setVisible(!lo.isVisible());
      if (!lo.isVisible()) {
        b.setCaption("Still polling");
      }
 else {
        b.setCaption("Hide container of progress indicator");
      }
    }
  }
);
}
