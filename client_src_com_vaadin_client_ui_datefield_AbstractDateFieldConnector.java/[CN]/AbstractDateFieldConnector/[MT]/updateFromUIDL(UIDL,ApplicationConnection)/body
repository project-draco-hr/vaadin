{
  if (!isRealUpdate(uidl)) {
    return;
  }
  getWidget().client=client;
  getWidget().paintableId=uidl.getId();
  getWidget().immediate=getState().immediate;
  getWidget().readonly=isReadOnly();
  getWidget().enabled=isEnabled();
  if (uidl.hasAttribute("locale")) {
    final String locale=uidl.getStringAttribute("locale");
    try {
      getWidget().dts.setLocale(locale);
      getWidget().currentLocale=locale;
    }
 catch (    final LocaleNotLoadedException e) {
      getWidget().currentLocale=getWidget().dts.getLocale();
      VConsole.error("Tried to use an unloaded locale \"" + locale + "\". Using default locale ("+ getWidget().currentLocale+ ").");
      VConsole.error(e);
    }
  }
  getWidget().showISOWeekNumbers=uidl.getBooleanAttribute(DateFieldConstants.ATTR_WEEK_NUMBERS) && getWidget().dts.getFirstDayOfWeek() == 1;
  Resolution newResolution;
  if (uidl.hasVariable("sec")) {
    newResolution=Resolution.SECOND;
  }
 else   if (uidl.hasVariable("min")) {
    newResolution=Resolution.MINUTE;
  }
 else   if (uidl.hasVariable("hour")) {
    newResolution=Resolution.HOUR;
  }
 else   if (uidl.hasVariable("day")) {
    newResolution=Resolution.DAY;
  }
 else   if (uidl.hasVariable("month")) {
    newResolution=Resolution.MONTH;
  }
 else {
    newResolution=Resolution.YEAR;
  }
  setWidgetStyleName(getWidget().getStylePrimaryName() + "-" + VDateField.resolutionToString(getWidget().currentResolution),false);
  getWidget().currentResolution=newResolution;
  setWidgetStyleName(getWidget().getStylePrimaryName() + "-" + VDateField.resolutionToString(getWidget().currentResolution),true);
  final int year=uidl.getIntVariable("year");
  final int month=(getWidget().currentResolution.getCalendarField() >= Resolution.MONTH.getCalendarField()) ? uidl.getIntVariable("month") : -1;
  final int day=(getWidget().currentResolution.getCalendarField() >= Resolution.DAY.getCalendarField()) ? uidl.getIntVariable("day") : -1;
  final int hour=(getWidget().currentResolution.getCalendarField() >= Resolution.HOUR.getCalendarField()) ? uidl.getIntVariable("hour") : 0;
  final int min=(getWidget().currentResolution.getCalendarField() >= Resolution.MINUTE.getCalendarField()) ? uidl.getIntVariable("min") : 0;
  final int sec=(getWidget().currentResolution.getCalendarField() >= Resolution.SECOND.getCalendarField()) ? uidl.getIntVariable("sec") : 0;
  if (year > -1) {
    getWidget().setCurrentDate(new Date((long)getWidget().getTime(year,month,day,hour,min,sec,0)));
  }
 else {
    getWidget().setCurrentDate(null);
  }
}
