{
  String wsname=widgetset.getClass().getName();
  String module=GWT.getModuleName();
  int lastdot=module.lastIndexOf(".");
  String base=module.substring(0,lastdot);
  String simpleName=module.substring(lastdot + 1);
  if (!wsname.startsWith(base) || !wsname.endsWith(simpleName)) {
    GWT.log("Ignored init for " + wsname + " when starting "+ module,null);
    return;
  }
  if (initedWidgetSet != null) {
    String msg="Tried to init " + widgetset.getClass().getName() + ", but "+ initedWidgetSet.getClass().getName()+ " is already inited.";
    System.err.println(msg);
    throw new IllegalStateException(msg);
  }
  initedWidgetSet=widgetset;
  ArrayList<String> appIds=new ArrayList<String>();
  loadAppIdListFromDOM(appIds);
  for (Iterator<String> it=appIds.iterator(); it.hasNext(); ) {
    String appId=it.next();
    ApplicationConfiguration appConf=getConfigFromDOM(appId);
    ApplicationConnection a=new ApplicationConnection(widgetset,appConf);
    unstartedApplications.add(a);
  }
}
