{
  if (str == null) {
    return new String[0];
  }
  if (delimiter == null) {
    return new String[]{str};
  }
  List result=new ArrayList();
  int pos=0;
  int delPos=0;
  while ((delPos=str.indexOf(delimiter,pos)) != -1) {
    result.add(str.substring(pos,delPos));
    pos=delPos + delimiter.length();
  }
  if (str.length() > 0 && pos <= str.length()) {
    result.add(str.substring(pos));
  }
  return (String[])result.toArray(new String[result.size()]);
}
