{
  String pathToUse=replace(path,WINDOWS_FOLDER_SEPARATOR,FOLDER_SEPARATOR);
  String[] pathArray=delimitedListToStringArray(pathToUse,FOLDER_SEPARATOR);
  List pathElements=new LinkedList();
  int tops=0;
  for (int i=pathArray.length - 1; i >= 0; i--) {
    if (CURRENT_PATH.equals(pathArray[i])) {
    }
 else     if (TOP_PATH.equals(pathArray[i])) {
      tops++;
    }
 else {
      if (tops > 0) {
        tops--;
      }
 else {
        pathElements.add(0,pathArray[i]);
      }
    }
  }
  for (int i=0; i < tops; i++) {
    pathElements.add(0,TOP_PATH);
  }
  return collectionToDelimitedString(pathElements,FOLDER_SEPARATOR);
}
