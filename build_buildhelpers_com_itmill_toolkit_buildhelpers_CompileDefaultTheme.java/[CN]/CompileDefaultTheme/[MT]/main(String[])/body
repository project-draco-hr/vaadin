{
  File f=new File(SRCDIR);
  StringBuffer combinedCss=new StringBuffer();
  combinedCss.append("/* Automatically compiled css file from subdirectories. */\n");
  File[] subdir=f.listFiles();
  Arrays.sort(subdir,new Comparator(){
    public int compare(    Object arg0,    Object arg1){
      return ((File)arg0).compareTo((File)arg1);
    }
  }
);
  for (int i=0; i < subdir.length; i++) {
    File dir=subdir[i];
    String name=dir.getName();
    File cssFile=new File(dir.getPath() + "/" + name+ ".css");
    if (cssFile.isFile()) {
      FileInputStream fstream=new FileInputStream(cssFile);
      DataInputStream in=new DataInputStream(fstream);
      BufferedReader br=new BufferedReader(new InputStreamReader(in));
      String strLine;
      while ((strLine=br.readLine()) != null) {
        if (strLine.indexOf("url(../") > 0) {
          strLine=strLine.replaceAll("url\\(../",("url\\("));
        }
 else {
          strLine=strLine.replaceAll("url\\(",("url\\(" + name + "/"));
        }
        combinedCss.append(strLine);
        combinedCss.append("\n");
      }
      in.close();
    }
  }
  BufferedWriter out=new BufferedWriter(new FileWriter(SRCDIR + "/styles.css"));
  out.write(combinedCss.toString());
  out.close();
  System.out.println("Compibed CSS to " + SRCDIR + "/styles.css ("+ combinedCss.toString().length()+ " bytes)");
}
