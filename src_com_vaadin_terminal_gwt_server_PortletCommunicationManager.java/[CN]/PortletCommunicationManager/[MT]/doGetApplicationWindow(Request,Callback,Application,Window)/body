{
  if (assumedWindow == null && callback instanceof AbstractApplicationPortletWrapper && request.getWrappedRequest() instanceof PortletRequest) {
    assumedWindow=((AbstractApplicationPortletWrapper)callback).getPortletWindow((PortletRequest)request.getWrappedRequest(),application);
  }
  return super.doGetApplicationWindow(request,callback,application,assumedWindow);
}
