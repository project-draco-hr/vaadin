{
  String contentType=request.getContentType();
  String name=request.getParameter("name");
  String ownerId=request.getParameter("rec-owner");
  VariableOwner variableOwner=getVariableOwner(ownerId);
  StreamVariable streamVariable=ownerToNameToStreamVariable.get(variableOwner).get(name);
  if (contentType.contains("boundary")) {
    doHandleSimpleMultipartFileUpload(new WrappedPortletRequest(request),new PortletResponseWrapper(response),streamVariable,name,variableOwner,contentType.split("boundary=")[1]);
  }
 else {
    doHandleXhrFilePost(new WrappedPortletRequest(request),new PortletResponseWrapper(response),streamVariable,name,variableOwner,request.getContentLength());
  }
}
