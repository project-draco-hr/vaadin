{
  String contentType=request.getContentType();
  String name=request.getParameter("name");
  String ownerId=request.getParameter("rec-owner");
  String rootId=request.getParameter("rootId");
  Root root=application.getRootById(Integer.parseInt(rootId));
  Root.setCurrent(root);
  ClientConnector owner=getConnector(root,ownerId);
  StreamVariable streamVariable=ownerToNameToStreamVariable.get(owner).get(name);
  if (contentType.contains("boundary")) {
    doHandleSimpleMultipartFileUpload(request,response,streamVariable,name,owner,contentType.split("boundary=")[1]);
  }
 else {
    doHandleXhrFilePost(request,response,streamVariable,name,owner,request.getContentLength());
  }
}
