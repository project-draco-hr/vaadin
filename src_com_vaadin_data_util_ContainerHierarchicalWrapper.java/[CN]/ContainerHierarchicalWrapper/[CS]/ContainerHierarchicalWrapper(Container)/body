{
  container=toBeWrapped;
  hierarchical=container instanceof Container.Hierarchical;
  if (container == null) {
    throw new NullPointerException("Null can not be wrapped");
  }
  if (!hierarchical) {
    noChildrenAllowed=new HashSet<Object>();
    parent=new Hashtable<Object,Object>();
    children=new Hashtable<Object,LinkedList<Object>>();
    roots=new LinkedHashSet<Object>(container.getItemIds());
  }
  updateHierarchicalWrapper();
}
