{
  for (  Node child : new ArrayList<Node>(node.getChildren())) {
    if (child instanceof ImportNode) {
      ImportNode importNode=(ImportNode)child;
      if (!importNode.isPureCssImport()) {
        try {
          StringBuilder filePathBuilder=new StringBuilder(node.getFileName());
          filePathBuilder.append(File.separatorChar).append(importNode.getUri());
          if (!filePathBuilder.toString().endsWith(".scss")) {
            filePathBuilder.append(".scss");
          }
          ScssStylesheet imported=ScssStylesheet.get(filePathBuilder.toString());
          if (imported == null) {
            imported=ScssStylesheet.get(importNode.getUri());
          }
          if (imported == null) {
            throw new FileNotFoundException(importNode.getUri() + " (parent: " + node.getFileName()+ ")");
          }
          traverse(imported);
          String prefix=getUrlPrefix(importNode.getUri());
          if (prefix != null) {
            updateUrlInImportedSheet(imported,prefix);
          }
          Node pre=importNode;
          for (          Node importedChild : imported.getChildren()) {
            node.appendChild(importedChild,pre);
            pre=importedChild;
          }
          node.removeChild(importNode);
        }
 catch (        CSSException e) {
          e.printStackTrace();
        }
catch (        IOException e) {
          e.printStackTrace();
        }
      }
    }
  }
}
