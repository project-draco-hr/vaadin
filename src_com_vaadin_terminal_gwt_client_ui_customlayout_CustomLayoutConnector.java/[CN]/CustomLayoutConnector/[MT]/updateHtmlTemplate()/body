{
  if (getWidget().hasTemplate()) {
    return;
  }
  String templateName=getState().getTemplateName();
  String templateContents=getState().getTemplateContents();
  if (templateName != null) {
    templateContents=getConnection().getResource("layouts/" + templateName + ".html");
    if (templateContents == null) {
      templateContents="<em>Layout file layouts/" + templateName + ".html is missing. Components will be drawn for debug purposes.</em>";
    }
  }
  getWidget().initializeHTML(templateContents,getConnection().getThemeUri());
}
