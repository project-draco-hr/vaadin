{
  JType leafType=type.getLeafType();
  int rank=type.getRank();
  sourceWriter.println(JSONArray.class.getName() + " jsonArray = jsonValue.isArray();");
  sourceWriter.print(type.getQualifiedSourceName() + " value = new " + leafType.getQualifiedSourceName()+ "[jsonArray.size()]");
  for (int i=1; i < rank; i++) {
    sourceWriter.print("[]");
  }
  sourceWriter.println(";");
  sourceWriter.println("for(int i = 0 ; i < value.length; i++) {");
  sourceWriter.indent();
  JType componentType=type.getComponentType();
  sourceWriter.print("value[i] = (" + ConnectorBundleLoaderFactory.getBoxedTypeName(componentType) + ") "+ JsonDecoder.class.getName()+ ".decodeValue(");
  ConnectorBundleLoaderFactory.writeTypeCreator(sourceWriter,componentType);
  sourceWriter.print(", jsonArray.get(i), null, connection)");
  sourceWriter.println(";");
  sourceWriter.outdent();
  sourceWriter.println("}");
  sourceWriter.println("return value;");
}
