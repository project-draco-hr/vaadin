{
  if (dataSource != null && !dataSource.isReadOnly()) {
    if ((isInvalidCommitted() || isValid())) {
      final Object newValue=getValue();
      try {
        suppressValueChangePropagation=true;
        dataSource.setValue(newValue);
      }
 catch (      final Throwable e) {
        currentBufferedSourceException=new Buffered.SourceException(this,e);
        requestRepaint();
        throw currentBufferedSourceException;
      }
 finally {
        suppressValueChangePropagation=false;
      }
    }
 else {
      validate();
    }
  }
  boolean repaintNeeded=false;
  if (modified) {
    modified=false;
    repaintNeeded=true;
  }
  if (currentBufferedSourceException != null) {
    currentBufferedSourceException=null;
    repaintNeeded=true;
  }
  if (repaintNeeded) {
    requestRepaint();
  }
}
