{
  if (dataSource != null && !dataSource.isReadOnly()) {
    if ((isInvalidCommitted() || isValid())) {
      final T fieldValue=getFieldValue();
      try {
        valueWasModifiedByDataSourceDuringCommit=false;
        committingValueToDataSource=true;
        getPropertyDataSource().setValue(convertToDataSource(fieldValue));
      }
 catch (      final Throwable e) {
        SourceException sourceException=new Buffered.SourceException(this,e);
        setCurrentBufferedSourceException(sourceException);
        throw sourceException;
      }
 finally {
        committingValueToDataSource=false;
      }
    }
 else {
      validate();
    }
  }
  boolean repaintNeeded=false;
  if (isModified()) {
    setModified(false);
    repaintNeeded=true;
  }
  if (getCurrentBufferedSourceException() != null) {
    setCurrentBufferedSourceException(currentBufferedSourceException);
  }
  if (valueWasModifiedByDataSourceDuringCommit) {
    valueWasModifiedByDataSourceDuringCommit=false;
    fireValueChange(false);
  }
 else   if (repaintNeeded) {
    requestRepaint();
  }
}
