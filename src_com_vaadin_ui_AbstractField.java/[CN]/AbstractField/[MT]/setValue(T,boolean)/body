{
  if (!equals(newFieldValue,getInternalValue())) {
    if (isReadOnly()) {
      throw new Property.ReadOnlyException();
    }
    if (repaintIsNotNeeded && (isRequired() || getValidators() != null)) {
      repaintIsNotNeeded=false;
    }
    if (!isInvalidAllowed()) {
      final Collection<Validator> v=getValidators();
      if (v != null) {
        for (final Iterator<Validator> i=v.iterator(); i.hasNext(); ) {
          (i.next()).validate(newFieldValue);
        }
      }
    }
    setInternalValue(newFieldValue);
    setModified(dataSource != null);
    valueWasModifiedByDataSourceDuringCommit=false;
    if (isWriteThrough() && dataSource != null && (isInvalidCommitted() || isValid())) {
      try {
        committingValueToDataSource=true;
        getPropertyDataSource().setValue(convertToDataSource(newFieldValue));
        setModified(false);
      }
 catch (      final Throwable e) {
        currentBufferedSourceException=new Buffered.SourceException(this,e);
        requestRepaint();
        throw currentBufferedSourceException;
      }
 finally {
        committingValueToDataSource=false;
      }
    }
    if (getCurrentBufferedSourceException() != null) {
      setCurrentBufferedSourceException(null);
    }
    if (valueWasModifiedByDataSourceDuringCommit) {
      valueWasModifiedByDataSourceDuringCommit=repaintIsNotNeeded=false;
    }
    fireValueChange(repaintIsNotNeeded);
  }
}
