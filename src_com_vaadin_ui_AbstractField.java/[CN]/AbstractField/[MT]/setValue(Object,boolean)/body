{
  if ((newValue == null && value != null) || (newValue != null && !newValue.equals(value))) {
    if (isReadOnly()) {
      throw new Property.ReadOnlyException();
    }
    if (repaintIsNotNeeded && (isRequired() || getValidators() != null)) {
      repaintIsNotNeeded=false;
    }
    if (!isInvalidAllowed()) {
      final Collection<Validator> v=getValidators();
      if (v != null) {
        for (final Iterator<Validator> i=v.iterator(); i.hasNext(); ) {
          (i.next()).validate(newValue);
        }
      }
    }
    setInternalValue(newValue);
    modified=dataSource != null;
    if (isWriteThrough() && dataSource != null && (isInvalidCommitted() || isValid())) {
      try {
        suppressValueChangePropagation=true;
        dataSource.setValue(newValue);
        modified=false;
      }
 catch (      final Throwable e) {
        currentBufferedSourceException=new Buffered.SourceException(this,e);
        requestRepaint();
        throw currentBufferedSourceException;
      }
 finally {
        suppressValueChangePropagation=false;
      }
    }
    if (currentBufferedSourceException != null) {
      currentBufferedSourceException=null;
      requestRepaint();
    }
    fireValueChange(repaintIsNotNeeded);
  }
}
