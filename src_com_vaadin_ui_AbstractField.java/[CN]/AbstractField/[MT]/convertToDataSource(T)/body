{
  if (converter != null) {
    try {
      return converter.convertFromTargetToSource(fieldValue,getLocale());
    }
 catch (    com.vaadin.data.util.converter.Converter.ConversionException e) {
      throw new Converter.ConversionException(getValueConversionError(converter.getSourceType()),e);
    }
  }
  if (fieldValue == null) {
    return null;
  }
  Class<?> type;
  if (getPropertyDataSource() != null) {
    type=getPropertyDataSource().getType();
  }
 else {
    type=getType();
  }
  if (type.isAssignableFrom(fieldValue.getClass())) {
    return fieldValue;
  }
 else {
    throw new Converter.ConversionException(getValueConversionError(type));
  }
}
