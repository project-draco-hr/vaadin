{
  if (areTabsHidden()) {
    target.addAttribute("hidetabs",true);
  }
  if (tabIndex != 0) {
    target.addAttribute("tabindex",tabIndex);
  }
  target.startTag("tabs");
  for (final Iterator<Component> i=getComponentIterator(); i.hasNext(); ) {
    final Component component=i.next();
    Tab tab=tabs.get(component);
    target.startTag("tab");
    if (!tab.isEnabled() && tab.isVisible()) {
      target.addAttribute(TabsheetBaseConnector.ATTRIBUTE_TAB_DISABLED,true);
    }
    if (!tab.isVisible()) {
      target.addAttribute("hidden",true);
    }
    if (tab.isClosable()) {
      target.addAttribute("closable",true);
    }
    final Resource icon=tab.getIcon();
    if (icon != null) {
      target.addAttribute(TabsheetBaseConnector.ATTRIBUTE_TAB_ICON,icon);
    }
    final String caption=tab.getCaption();
    if (caption != null && caption.length() > 0) {
      target.addAttribute(TabsheetBaseConnector.ATTRIBUTE_TAB_CAPTION,caption);
    }
    final String description=tab.getDescription();
    if (description != null) {
      target.addAttribute(TabsheetBaseConnector.ATTRIBUTE_TAB_DESCRIPTION,description);
    }
    final String styleName=tab.getStyleName();
    if (styleName != null && styleName.length() != 0) {
      target.addAttribute(VTabsheet.TAB_STYLE_NAME,styleName);
    }
    target.addAttribute("key",keyMapper.key(component));
    if (component.equals(selected)) {
      target.addAttribute("selected",true);
      component.paint(target);
    }
    target.endTag("tab");
  }
  target.endTag("tabs");
  if (selected != null) {
    target.addVariable(this,"selected",keyMapper.key(selected));
  }
}
