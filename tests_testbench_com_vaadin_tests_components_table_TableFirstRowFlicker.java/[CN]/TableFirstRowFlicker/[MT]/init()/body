{
  Window mainWindow=new Window("Table Row Flicker");
  mainWindow.getContent().setSizeFull();
  setMainWindow(mainWindow);
  t=new Table();
  t.setSizeFull();
  t.setSelectable(true);
  t.setContainerDataSource(buildContainer());
  mainWindow.addComponent(t);
  ((VerticalLayout)mainWindow.getContent()).setExpandRatio(t,1);
  ProgressIndicator pi=new ProgressIndicator();
  pi.setPollingInterval(1000);
  pi.setIndeterminate(true);
  mainWindow.addComponent(pi);
  Thread r=new Thread(){
    @Override public void run(){
      while (t != null) {
synchronized (t.getApplication()) {
          int firstId=t.getCurrentPageFirstItemIndex();
          Object selected=t.getValue();
          t.setContainerDataSource(buildContainer());
          t.setValue(selected);
          t.setCurrentPageFirstItemIndex(firstId);
        }
        try {
          Thread.sleep(500);
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
      System.out.println("Table update thread stopped");
    }
  }
;
  r.start();
}
