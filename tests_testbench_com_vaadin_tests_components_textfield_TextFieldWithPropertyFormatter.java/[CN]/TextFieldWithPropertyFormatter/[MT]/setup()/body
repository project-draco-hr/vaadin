{
  property=new Property<BigDecimal>(){
    private BigDecimal value;
    public BigDecimal getValue(){
      return value;
    }
    public void setValue(    Object newValue) throws ReadOnlyException {
      if (newValue == null) {
        value=null;
      }
 else       if (newValue instanceof BigDecimal) {
        value=(BigDecimal)newValue;
      }
 else {
        throw new IllegalArgumentException("Value must be of type BigDecimal");
      }
    }
    public Class<BigDecimal> getType(){
      return BigDecimal.class;
    }
    public boolean isReadOnly(){
      return false;
    }
    public void setReadOnly(    boolean newStatus){
    }
  }
;
  formatter=new PropertyFormatter<BigDecimal>(property){
    private final DecimalFormat df=new DecimalFormat("#,##0.00",new DecimalFormatSymbols(new Locale("en","UK")));
{
      df.setParseBigDecimal(true);
    }
    @Override public String format(    BigDecimal value){
      final String retVal;
      if (value == null) {
        retVal="";
      }
 else {
        retVal=df.format(value);
      }
      return retVal;
    }
    @Override public BigDecimal parse(    String formattedValue) throws Exception {
      if (formattedValue != null && formattedValue.trim().length() != 0) {
        BigDecimal value=(BigDecimal)df.parse(formattedValue);
        value=value.setScale(2,BigDecimal.ROUND_HALF_UP);
        return value;
      }
      return null;
    }
  }
;
  final TextField tf1=new TextField();
  tf1.setPropertyDataSource(formatter);
  addComponent(tf1);
  Button b=new Button("Sync (typing 12345.6789 and clicking this should format field)");
  b.addListener(new ClickListener(){
    public void buttonClick(    ClickEvent event){
    }
  }
);
  addComponent(b);
  b=new Button("Set '12345.6789' to textfield on the server side");
  b.addListener(new ClickListener(){
    public void buttonClick(    ClickEvent event){
      tf1.setValue("12345.6789");
    }
  }
);
  addComponent(b);
}
