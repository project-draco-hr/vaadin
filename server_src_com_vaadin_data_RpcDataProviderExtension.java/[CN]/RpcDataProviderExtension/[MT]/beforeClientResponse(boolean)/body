{
  if (initial || bareItemSetTriggeredSizeChange) {
    int size=container.size();
    rpc.resetDataAndSize(size);
    int numberOfRows=Math.min(40,size);
    pushRowData(0,numberOfRows,0,0);
  }
 else {
    for (    Runnable r : rowChanges) {
      r.run();
    }
    if (refreshCache) {
      updatedItemIds.addAll(activeItemHandler.getActiveItemIds());
    }
  }
  internalUpdateRows(updatedItemIds);
  rowChanges.clear();
  refreshCache=false;
  updatedItemIds.clear();
  bareItemSetTriggeredSizeChange=false;
  super.beforeClientResponse(initial);
}
