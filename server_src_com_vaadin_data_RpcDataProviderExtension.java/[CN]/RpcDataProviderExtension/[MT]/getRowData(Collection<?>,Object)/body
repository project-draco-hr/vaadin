{
  Item item=container.getItem(itemId);
  String[] row=new String[propertyIds.size()];
  JSONArray rowData=new JSONArray();
  Grid grid=getGrid();
  try {
    for (    Object propertyId : propertyIds) {
      GridColumn column=grid.getColumn(propertyId);
      Object propertyValue=item.getItemProperty(propertyId).getValue();
      Object encodedValue=encodeValue(propertyValue,column.getRenderer(),column.getConverter(),grid.getLocale());
      rowData.put(encodedValue);
    }
    final JSONObject rowObject=new JSONObject();
    rowObject.put(GridState.JSONKEY_DATA,rowData);
    rowObject.put(GridState.JSONKEY_ROWKEY,keyMapper.getKey(itemId));
    return rowObject;
  }
 catch (  final JSONException e) {
    throw new RuntimeException("Grid was unable to serialize " + "data for row (this should've been caught " + "eariler by other Grid logic)",e);
  }
}
