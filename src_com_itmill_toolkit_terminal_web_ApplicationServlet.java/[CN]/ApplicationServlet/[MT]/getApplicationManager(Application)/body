{
  AjaxApplicationManager mgr=(AjaxApplicationManager)applicationToAjaxAppMgrMap.get(application);
  if (mgr == null) {
    mgr=new AjaxApplicationManager(application);
    applicationToAjaxAppMgrMap.put(application,mgr);
    application.removeListener((Application.WindowAttachListener)this);
    application.removeListener((Application.WindowDetachListener)this);
    for (Iterator wins=application.getWindows().iterator(); wins.hasNext(); )     ((Window)wins.next()).removeListener((Paintable.RepaintRequestListener)this);
    mgr.takeControl();
  }
  return mgr;
}
