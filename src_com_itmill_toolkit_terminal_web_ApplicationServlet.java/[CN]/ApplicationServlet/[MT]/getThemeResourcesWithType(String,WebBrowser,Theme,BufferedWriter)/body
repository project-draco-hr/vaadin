{
  Vector themes=new Vector();
  themes.add(theme);
  while (theme.getParent() != null) {
    String parentName=theme.getParent();
    theme=themeSource.getThemeByName(parentName);
    themes.add(theme);
  }
  for (int k=themes.size() - 1; k >= 0; k--) {
    theme=(Theme)themes.get(k);
    Collection files=theme.getFileNames(terminalType,Theme.MODE_AJAX);
    for (Iterator i=files.iterator(); i.hasNext(); ) {
      String file=(String)i.next();
      if (file.endsWith(type)) {
        try {
          InputStreamReader in=new InputStreamReader(themeSource.getResource(theme.getName() + "/" + file));
          char[] b=new char[DEFAULT_BUFFER_SIZE];
          int read=0;
          while ((read=in.read(b,0,DEFAULT_BUFFER_SIZE)) > 0)           out.write(b,0,read);
        }
 catch (        ThemeException e) {
          e.printStackTrace();
        }
      }
    }
  }
}
