{
  if (event.getName().equals(SESSION_BINDING_LISTENER)) {
    Object[] apps=applications.toArray();
    for (int i=0; i < apps.length; i++) {
      if (apps[i] != null) {
        ((Application)apps[i]).close();
        Object lock=applicationToServerCommandStreamLock.get(apps[i]);
        if (lock != null) synchronized (lock) {
          lock.notifyAll();
        }
synchronized (applicationToServerCommandStreamLock) {
          applicationToServerCommandStreamLock.remove(apps[i]);
        }
synchronized (applicationToDirtyWindowSetMap) {
          applicationToDirtyWindowSetMap.remove(apps[i]);
        }
synchronized (applicationToLastRequestDate) {
          applicationToLastRequestDate.remove(apps[i]);
        }
synchronized (applicationToAjaxAppMgrMap) {
          applicationToAjaxAppMgrMap.remove(apps[i]);
        }
        applications.remove(apps[i]);
      }
    }
  }
}
