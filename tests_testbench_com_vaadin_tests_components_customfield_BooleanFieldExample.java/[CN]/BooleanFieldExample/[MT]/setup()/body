{
  final VerticalLayout layout=new VerticalLayout();
  layout.setMargin(true);
  final Form form=new Form();
  form.setFormFieldFactory(new DefaultFieldFactory(){
    @Override public Field createField(    Item item,    Object propertyId,    Component uiContext){
      if ("custom".equals(propertyId)) {
        return new BooleanField();
      }
      return super.createField(item,propertyId,uiContext);
    }
  }
);
  final TwoBooleans data=new TwoBooleans();
  form.setItemDataSource(new BeanItem<TwoBooleans>(data));
  layout.addComponent(form);
  Button submit=new Button("Submit",new ClickListener(){
    public void buttonClick(    ClickEvent event){
      form.commit();
      Notification.show("The custom boolean field value is " + data.isCustom() + ".\n"+ "The checkbox (default boolean field) value is "+ data.isNormal()+ ".");
    }
  }
);
  layout.addComponent(submit);
  addComponent(layout);
}
