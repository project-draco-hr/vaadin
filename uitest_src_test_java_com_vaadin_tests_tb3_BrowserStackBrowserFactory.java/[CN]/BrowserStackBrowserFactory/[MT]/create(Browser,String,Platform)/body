{
  DesiredCapabilities caps;
switch (browser) {
case CHROME:
    caps=DesiredCapabilities.chrome();
  caps.setVersion(version);
break;
case PHANTOMJS:
throw new IllegalArgumentException("PhantomJS is not supported by BrowserStack");
case SAFARI:
caps=DesiredCapabilities.safari();
caps.setVersion(version);
break;
case IE8:
caps=DesiredCapabilities.internetExplorer();
caps.setVersion("8");
caps.setCapability("browser","IE");
caps.setCapability("browser_version","8.0");
caps.setCapability(InternetExplorerDriver.IE_ENSURE_CLEAN_SESSION,true);
break;
case IE9:
caps=DesiredCapabilities.internetExplorer();
caps.setVersion("9");
caps.setCapability("browser","IE");
caps.setCapability("browser_version","9.0");
caps.setCapability(InternetExplorerDriver.IE_ENSURE_CLEAN_SESSION,true);
break;
case IE10:
caps=DesiredCapabilities.internetExplorer();
caps.setVersion("10");
caps.setCapability("browser","IE");
caps.setCapability("browser_version","10.0");
caps.setCapability(InternetExplorerDriver.IE_ENSURE_CLEAN_SESSION,true);
break;
case IE11:
caps=DesiredCapabilities.internetExplorer();
caps.setVersion("11");
caps.setCapability("browser","IE");
caps.setCapability("browser_version","11.0");
caps.setCapability("ie.ensureCleanSession",true);
caps.setCapability(InternetExplorerDriver.IE_ENSURE_CLEAN_SESSION,true);
break;
case FIREFOX:
caps=DesiredCapabilities.firefox();
caps.setVersion(version);
break;
default :
caps=DesiredCapabilities.firefox();
caps.setVersion(version);
caps.setPlatform(platform);
}
caps.setCapability("os","Windows");
caps.setCapability("os_version","7");
caps.setPlatform(Platform.WINDOWS);
caps.setCapability("browserstack.debug","true");
caps.setCapability("browserstack.local","true");
caps.setCapability("project","vaadin");
caps.setCapability("build",Version.getFullVersion());
caps.setCapability("acceptSslCerts","true");
caps.setCapability("resolution","1680x1050");
getLogger().info("Using BrowserStack capabilities " + caps);
return caps;
}
