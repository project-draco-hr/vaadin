{
  VaadinRequest request=event.getRequest();
  Object uiClassNameObj=request.getService().getDeploymentConfiguration().getInitParameters().getProperty(VaadinServiceSession.UI_PARAMETER);
  if (uiClassNameObj instanceof String) {
    String uiClassName=uiClassNameObj.toString();
    ClassLoader classLoader=request.getService().getClassLoader();
    if (classLoader == null) {
      classLoader=getClass().getClassLoader();
    }
    try {
      Class<? extends UI> uiClass=Class.forName(uiClassName,true,classLoader).asSubclass(UI.class);
      return uiClass;
    }
 catch (    ClassNotFoundException e) {
      throw new RuntimeException("Could not find UI class",e);
    }
  }
  return null;
}
