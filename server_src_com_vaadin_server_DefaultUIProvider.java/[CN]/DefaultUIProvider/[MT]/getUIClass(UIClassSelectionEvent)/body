{
  VaadinRequest request=event.getRequest();
  Object uiClassNameObj=request.getService().getDeploymentConfiguration().getApplicationOrSystemProperty(VaadinSession.UI_PARAMETER,null);
  if (uiClassNameObj instanceof String) {
    String uiClassName=uiClassNameObj.toString();
    ClassLoader classLoader=request.getService().getClassLoader();
    try {
      Class<? extends UI> uiClass=Class.forName(uiClassName,true,classLoader).asSubclass(UI.class);
      return uiClass;
    }
 catch (    ClassNotFoundException e) {
      throw new RuntimeException("Could not find UI class",e);
    }
  }
  return null;
}
