{
  if (getContext() instanceof PortletApplicationContext) {
    PortletApplicationContext context=(PortletApplicationContext)getContext();
    Object username=context.getPortletSession().getAttribute("userName",PortletSession.APPLICATION_SCOPE);
    if (username == null) {
      return "Guest Portaluser";
    }
    return username.toString();
  }
 else {
    Object user=super.getUser();
    if (user == null) {
      return "Demo User";
    }
 else {
      return user;
    }
  }
}
