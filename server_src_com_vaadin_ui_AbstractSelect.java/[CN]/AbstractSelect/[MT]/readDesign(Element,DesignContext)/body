{
  super.readDesign(design,designContext);
  Set<String> selected=new HashSet<String>();
  for (  Element child : design.children()) {
    if (!"option".equals(child.nodeName())) {
      throw new DesignException("Unsupported child element in a select: " + child.nodeName() + ".");
    }
    String itemId=child.html();
    addItem(itemId);
    if (child.hasAttr("icon")) {
      setItemIcon(itemId,DesignAttributeHandler.readAttribute("icon",child.attributes(),Resource.class));
    }
    if (child.hasAttr("selected")) {
      selected.add(itemId);
    }
  }
  if (!selected.isEmpty()) {
    if (isMultiSelect()) {
      setValue(selected);
    }
 else     if (selected.size() == 1) {
      setValue(selected.iterator().next());
    }
 else {
      throw new DesignException("Multiple values selected for a single select component");
    }
  }
}
