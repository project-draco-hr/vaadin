{
  List<LegacyComponent> legacyComponents=new ArrayList<LegacyComponent>();
  for (  Connector connector : dirtyVisibleConnectors) {
    if (connector instanceof LegacyComponent) {
      legacyComponents.add((LegacyComponent)connector);
    }
  }
  sortByHierarchy((List)legacyComponents);
  for (  LegacyComponent c : legacyComponents) {
    getLogger().fine("Painting LegacyComponent " + c.getClass().getName() + "@"+ Integer.toHexString(c.hashCode()));
    paintTarget.startTag("change");
    final String pid=c.getConnectorId();
    paintTarget.addAttribute("pid",pid);
    LegacyPaint.paint(c,paintTarget);
    paintTarget.endTag("change");
  }
}
