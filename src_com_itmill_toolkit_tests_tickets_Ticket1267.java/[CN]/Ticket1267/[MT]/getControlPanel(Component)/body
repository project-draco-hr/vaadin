{
  if (control.get(c) == null) {
    Panel newPanel=new Panel("Controls for " + c.getCaption());
    newPanel.setLayout(new GridLayout(3,6));
    final int[] values=new int[6];
    Arrays.fill(values,-1);
    final CheckBox[] checkBoxArray=new CheckBox[6];
    final Slider[] sliderArray=new Slider[6];
    String[] directions={"Left","Top","Width","Height","Right","Bottom"};
    final Label[] labelArray=new Label[6];
    for (int i=0; i < checkBoxArray.length; i++) {
      final int j=i;
      checkBoxArray[i]=new CheckBox(directions[i]);
      sliderArray[i]=new Slider(-1,100,1);
      labelArray[j]=new Label("-1");
      labelArray[j].setEnabled(false);
      checkBoxArray[j].setImmediate(true);
      sliderArray[j].setImmediate(true);
      sliderArray[j].setEnabled(false);
      sliderArray[j].setWidth("300px");
      checkBoxArray[j].addListener(new ValueChangeListener(){
        public void valueChange(        ValueChangeEvent event){
          Boolean isChecked=(Boolean)checkBoxArray[j].getValue();
          if (isChecked.booleanValue()) {
            sliderArray[j].setEnabled(true);
            labelArray[j].setEnabled(true);
          }
 else {
            values[j]=-1;
            labelArray[j].setValue(new Integer(values[j]));
            sliderArray[j].setEnabled(false);
            labelArray[j].setEnabled(false);
            CoordinateLayout.Coordinates coords=coordinateLayout.getCoordinates(c);
            coords.setCoordinates(values[0],values[1],values[2],values[3],values[4],values[5]);
            coords.setUnitsPercent(true,true,true,true,true,true);
          }
        }
      }
);
      sliderArray[j].addListener(new ValueChangeListener(){
        public void valueChange(        ValueChangeEvent event){
          Double newValue=(Double)event.getProperty().getValue();
          values[j]=(int)newValue.doubleValue();
          CoordinateLayout.Coordinates coords=coordinateLayout.getCoordinates(c);
          coords.setCoordinates(values[0],values[1],values[2],values[3],values[4],values[5]);
          coords.setUnitsPercent(true,true,true,true,true,true);
          labelArray[j].setValue(new Integer(values[j]));
        }
      }
);
    }
    for (int i=0; i < sliderArray.length; i++) {
      newPanel.addComponent(checkBoxArray[i]);
      newPanel.addComponent(sliderArray[i]);
      newPanel.addComponent(labelArray[i]);
    }
    control.put(c,newPanel);
    return newPanel;
  }
 else {
    return control.get(c);
  }
}
