{
  if (!isAttached()) {
    return false;
  }
  measurement3.setClassName(STYLENAME_SPACING + (spacingEnabled ? "-on" : "-off"));
  String sn=getStylePrimaryName() + "-margin";
  if (activeMarginsInfo.hasTop()) {
    sn+=" " + STYLENAME_MARGIN_TOP;
  }
  if (activeMarginsInfo.hasBottom()) {
    sn+=" " + STYLENAME_MARGIN_BOTTOM;
  }
  if (activeMarginsInfo.hasLeft()) {
    sn+=" " + STYLENAME_MARGIN_LEFT;
  }
  if (activeMarginsInfo.hasRight()) {
    sn+=" " + STYLENAME_MARGIN_RIGHT;
  }
  measurement.setClassName(sn);
  root.appendChild(helper);
  activeSpacing.vSpacing=measurement3.getOffsetHeight();
  activeSpacing.hSpacing=measurement3.getOffsetWidth();
  activeMargins.setMarginTop(measurement2.getOffsetTop());
  activeMargins.setMarginLeft(measurement2.getOffsetLeft());
  activeMargins.setMarginRight(measurement.getOffsetWidth() - activeMargins.getMarginLeft());
  activeMargins.setMarginBottom(measurement.getOffsetHeight() - activeMargins.getMarginTop());
  root.removeChild(helper);
  Style style=root.getStyle();
  style.setPropertyPx("marginLeft",activeMargins.getMarginLeft());
  style.setPropertyPx("marginRight",activeMargins.getMarginRight());
  style.setPropertyPx("marginTop",activeMargins.getMarginTop());
  style.setPropertyPx("marginBottom",activeMargins.getMarginBottom());
  return true;
}
