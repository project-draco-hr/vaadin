{
  Style style=wrapper.getStyle();
  double contentHeight=allocatedSpace;
  int captionHeight;
  VCaption caption=getCaption();
  if (caption == null || caption.shouldBePlacedAfterComponent()) {
    style.clearPaddingTop();
    captionHeight=0;
  }
 else {
    captionHeight=getCaptionHeight();
    contentHeight-=captionHeight;
    style.setPaddingTop(captionHeight,Unit.PX);
  }
  if (isRelativeHeight()) {
    style.setHeight(contentHeight,Unit.PX);
  }
 else {
    style.clearHeight();
  }
  AlignmentInfo alignment=getAlignment();
  if (!alignment.isTop()) {
    double usedHeight;
    if (isRelativeHeight()) {
      String height=getWidget().getElement().getStyle().getHeight();
      double percentage=parsePercent(height);
      usedHeight=captionHeight + contentHeight * (percentage / 100);
    }
 else {
      usedHeight=getUsedHeight();
    }
    if (alignment.isVerticalCenter()) {
      currentLocation+=(allocatedSpace - usedHeight) / 2d;
    }
 else {
      currentLocation+=(allocatedSpace - usedHeight);
    }
  }
  style.setTop(currentLocation,Unit.PX);
}
