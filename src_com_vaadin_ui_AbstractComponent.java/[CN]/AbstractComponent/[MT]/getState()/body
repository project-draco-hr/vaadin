{
  if (null == sharedState) {
    sharedState=createState();
  }
  if (getHeight() >= 0 && (getHeightUnits() != Unit.PERCENTAGE || ComponentSizeValidator.parentCanDefineHeight(this))) {
    sharedState.setHeight("" + getCSSHeight());
  }
 else {
    sharedState.setHeight("");
  }
  if (getWidth() >= 0 && (getWidthUnits() != Unit.PERCENTAGE || ComponentSizeValidator.parentCanDefineWidth(this))) {
    sharedState.setWidth("" + getCSSWidth());
  }
 else {
    sharedState.setWidth("");
  }
  ErrorMessage error=getErrorMessage();
  if (null != error) {
    sharedState.setErrorMessage(error.getFormattedHtmlMessage());
  }
 else {
    sharedState.setErrorMessage(null);
  }
  return sharedState;
}
