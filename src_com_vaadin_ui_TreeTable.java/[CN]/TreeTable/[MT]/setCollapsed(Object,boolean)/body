{
  if (isCollapsed(itemId) != collapsed) {
    if (null == toggledItemId && getVisibleItemIds().contains(itemId) && !isRowCacheInvalidated()) {
      toggledItemId=itemId;
      toggleChildVisibility(itemId,false);
    }
 else {
      toggledItemId=null;
      toggleChildVisibility(itemId,true);
    }
  }
}
