{
  int parentTop, parentRight, parentBottom, parentLeft, parentHeight, parentWidth;
  Element captionElement=c.getElement();
  Element parentElement=parent.getElement();
  Element areaElement=componentToArea.get(parent);
  if (areaElement != null && !DOM.isOrHasChild(areaElement,c.getElement())) {
    DOM.removeChild(getElement(),c.getElement());
    DOM.appendChild(areaElement,c.getElement());
  }
  resetPositionAttributes((Widget)c);
  parentTop=getPositionValue(parentElement,"top");
  parentRight=getPositionValue(parentElement,"right");
  parentBottom=getPositionValue(parentElement,"bottom");
  parentLeft=getPositionValue(parentElement,"left");
  parentHeight=parent.getOffsetHeight();
  parentWidth=parent.getOffsetWidth();
  if (c.isMode(CustomCaption.HEADER_MODE)) {
    if (parentBottom == -1 || parentTop != -1) {
      DOM.setStyleAttribute(captionElement,"top","0px");
    }
 else {
      DOM.setStyleAttribute(captionElement,"bottom",parentHeight + "px");
    }
    if (parentRight == -1 || parentLeft != -1) {
      DOM.setStyleAttribute(captionElement,"left","0px");
    }
 else {
      int right=parentRight + parentWidth - c.getOffsetWidth();
      DOM.setStyleAttribute(captionElement,"right",right + "px");
    }
  }
 else   if (c.isMode(CustomCaption.MARKER_MODE)) {
    if (parentBottom == -1 || parentTop != -1) {
      DOM.setStyleAttribute(captionElement,"top",parentTop + "px");
    }
 else {
      int bottom=parentBottom + parentHeight - c.getOffsetHeight();
      DOM.setStyleAttribute(captionElement,"bottom",bottom + "px");
    }
    if (parentRight == -1 || parentLeft != -1) {
      DOM.setStyleAttribute(captionElement,"left",parentWidth + "px");
    }
 else {
      int right=parentRight - c.getOffsetWidth();
      DOM.setStyleAttribute(captionElement,"right",right + "px");
    }
  }
}
