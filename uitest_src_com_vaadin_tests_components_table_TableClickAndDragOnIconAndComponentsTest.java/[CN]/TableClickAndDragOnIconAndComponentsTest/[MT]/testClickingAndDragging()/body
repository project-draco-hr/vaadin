{
  openTestURL();
  TableElement table=$(TableElement.class).first();
  List<WebElement> selected=table.findElements(By.className("v-selected"));
  assertTrue("selection found when there should be none",selected.isEmpty());
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 2nd row expected)","red 1foo",table.getCell(1,2).getText());
  table.getCell(1,2).click();
  selected=table.findElements(By.className("v-selected"));
  assertFalse("no selection found when there should be some",selected.isEmpty());
  List<WebElement> cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 2nd row expected)","red 1foo",cellContents.get(2).getText());
  assertEquals("unexpected table selection size",1,selected.size());
  List<WebElement> rows=table.findElement(By.className("v-table-body")).findElements(By.tagName("tr"));
  assertEquals("unexpected table row count",5,rows.size());
  cellContents=rows.get(2).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 3rd row expected)","red 2foo",cellContents.get(2).getText());
  WebElement textField=rows.get(2).findElements(By.className("v-textfield")).get(0);
  assertEquals("expected value not found, wrong cell or contents (6th column of the 3rd row expected)","foo 2foo",textField.getAttribute("value"));
  textField.click();
  List<WebElement> focused=table.findElements(By.className("v-textfield-focus"));
  assertEquals("unexpected amount of focused textfields",1,focused.size());
  assertEquals("expected value not found, wrong cell or contents (6th column of the 3rd row expected)","foo 2foo",focused.get(0).getAttribute("value"));
  selected=table.findElements(By.className("v-selected"));
  assertEquals("unexpected table selection size",1,selected.size());
  cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 2nd row expected)","red 1foo",cellContents.get(2).getText());
  WebElement label=rows.get(2).findElements(By.className("v-label")).get(0);
  assertEquals("expected value not found, wrong cell or contents (5th column of the 3rd row expected)","foo 2foo",label.getText());
  label.click();
  focused=table.findElements(By.className("v-textfield-focus"));
  assertTrue("focused textfields found when there should be none",focused.isEmpty());
  selected=table.findElements(By.className("v-selected"));
  assertEquals("unexpected table selection size",1,selected.size());
  cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 3rd row expected)","red 2foo",cellContents.get(2).getText());
  textField.click();
  focused=table.findElements(By.className("v-textfield-focus"));
  assertEquals("unexpected amount of focused textfields",1,focused.size());
  assertEquals("expected value not found, wrong cell or contents (6th column of the 3rd row expected)","foo 2foo",focused.get(0).getAttribute("value"));
  selected=table.findElements(By.className("v-selected"));
  assertEquals("unexpected table selection size",1,selected.size());
  cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 3rd row expected)","red 2foo",cellContents.get(2).getText());
  textField=rows.get(1).findElements(By.className("v-textfield")).get(1);
  assertEquals("expected value not found, wrong cell or contents (7th column of the 2nd row expected)","foo 1foo",textField.getAttribute("value"));
  assertEquals("expected readonly status not found, wrong cell or contents (7th column of the 2nd row expected)","true",textField.getAttribute("readonly"));
  textField.click();
  focused=table.findElements(By.className("v-textfield-focus"));
  assertTrue("focused textfields found when there should be none",focused.isEmpty());
  selected=table.findElements(By.className("v-selected"));
  assertEquals("unexpected table selection size",1,selected.size());
  cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 2nd row expected)","red 1foo",cellContents.get(2).getText());
  WebElement embedded=rows.get(2).findElement(By.className("v-embedded"));
  embedded.click();
  selected=table.findElements(By.className("v-selected"));
  assertEquals("unexpected table selection size",1,selected.size());
  cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 3rd row expected)","red 2foo",cellContents.get(2).getText());
  cellContents=rows.get(4).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 5th row expected)","red 4foo",cellContents.get(2).getText());
  cellContents=rows.get(3).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 4th row expected)","red 3foo",cellContents.get(2).getText());
  cellContents=rows.get(4).findElements(By.className("v-table-cell-content"));
  new Actions(getDriver()).moveToElement(cellContents.get(2)).clickAndHold().moveToElement(rows.get(2)).release().perform();
  rows=table.findElement(By.className("v-table-body")).findElements(By.tagName("tr"));
  assertEquals("unexpected table row count",5,rows.size());
  cellContents=rows.get(3).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the dragged row expected, should be on 4th row now)","red 4foo",cellContents.get(2).getText());
  cellContents=rows.get(4).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the previous 4th row expected, should be on 5th row now)","red 3foo",cellContents.get(2).getText());
  selected=table.findElements(By.className("v-selected"));
  assertEquals("unexpected table selection size",1,selected.size());
  cellContents=selected.get(0).findElements(By.className("v-table-cell-content"));
  assertEquals("expected value not found, wrong cell or contents (3rd column of the 3rd row expected)","red 2foo",cellContents.get(2).getText());
}
