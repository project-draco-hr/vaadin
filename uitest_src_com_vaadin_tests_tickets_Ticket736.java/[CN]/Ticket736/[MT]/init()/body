{
  final LegacyWindow mainWin=new LegacyWindow("Test app for #736");
  setMainWindow(mainWin);
  setTheme("runo");
  final Form f=new Form();
  f.setItemDataSource(new BeanItem<Address>(address,new String[]{"name","street","zip","city","state","country"}));
  f.setCaption("Office address");
  f.setIcon(new ThemeResource("../runo/icons/16/document.png"));
  f.setDescription("Jep jpe, this is form description.");
  mainWin.addComponent(f);
  f.setBuffered(true);
  Button commit=new Button("Commit",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      f.commit();
    }
  }
);
  Button discard=new Button("Discard",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      f.discard();
    }
  }
);
  HorizontalLayout ol=new HorizontalLayout();
  ol.setHeight("3em");
  ol.addComponent(commit);
  ol.setComponentAlignment(commit,Alignment.TOP_RIGHT);
  ol.addComponent(discard);
  f.setFooter(ol);
  f.getField("zip").addValidator(new IntegerValidator("'{0}' is not a number"));
  ((AbstractComponent)f.getField("zip")).setDescription("Jepjep");
  ((AbstractComponent)f.getField("zip")).setIcon(new ThemeResource("../runo/icons/16/folder.png"));
  f.getField("state").addValidator(new IsValidState());
  f.getField("name").setRequired(true);
  f.getField("street").setRequired(true);
  f.getField("city").setRequired(true);
  f.getField("zip").setRequired(true);
  final VerticalLayout formPropertiesLayout=new VerticalLayout();
  formPropertiesLayout.setMargin(true);
  final Panel formProperties=new Panel("Form properties",formPropertiesLayout);
  formProperties.setWidth("200px");
  final String[] visibleProps={"required","invalidAllowed","readOnly","readThrough","writeThrough","invalidCommitted","validationVisible","immediate"};
  for (int i=0; i < visibleProps.length; i++) {
    CheckBox b=new CheckBox(visibleProps[i],new MethodProperty<Boolean>(f,visibleProps[i]));
    b.setImmediate(true);
    formPropertiesLayout.addComponent(b);
  }
  mainWin.addComponent(formProperties);
  mainWin.addComponent(new Button("Show state of the address object",new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      mainWin.showNotification(address.toString());
    }
  }
));
}
