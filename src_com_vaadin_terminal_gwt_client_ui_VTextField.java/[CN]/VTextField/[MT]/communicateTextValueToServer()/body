{
  String text=getText();
  if (prompting) {
    text="";
  }
  if (!text.equals(getLastCommunicatedString())) {
    if (text.equals(valueBeforeEdit)) {
      client.sendPendingVariableChanges();
    }
 else {
      client.updateVariable(id,VAR_CUR_TEXT,text,true);
    }
    lastTextChangeString=text;
  }
}
