{
  if (uidlUri == null) {
    return null;
  }
  if (uidlUri.startsWith("theme://")) {
    final String themeUri=configuration.getThemeUri();
    if (themeUri == null) {
      VConsole.error("Theme not set: ThemeResource will not be found. (" + uidlUri + ")");
    }
    uidlUri=themeUri + uidlUri.substring(7);
  }
  if (uidlUri.startsWith(ApplicationConstants.PUBLISHED_PROTOCOL_PREFIX)) {
    uidlUri=ApplicationConstants.APP_PROTOCOL_PREFIX + ApplicationConstants.PUBLISHED_FILE_PATH + uidlUri.substring(ApplicationConstants.PUBLISHED_PROTOCOL_PREFIX.length());
  }
  if (uidlUri.startsWith(ApplicationConstants.APP_PROTOCOL_PREFIX)) {
    String relativeUrl=uidlUri.substring(ApplicationConstants.APP_PROTOCOL_PREFIX.length());
    ApplicationConfiguration conf=getConfiguration();
    String serviceUrl=conf.getServiceUrl();
    if (conf.useServiceUrlPathParam()) {
      String[] parts=relativeUrl.split("\\?",2);
      String path=parts[0];
      if (parts.length > 1) {
        String appUrlParams=parts[1];
        serviceUrl=addGetParameters(serviceUrl,appUrlParams);
      }
      if (!path.startsWith("/")) {
        path='/' + path;
      }
      String pathParam=conf.getServiceUrlParameterName() + "=" + URL.encodeQueryString(path);
      serviceUrl=addGetParameters(serviceUrl,pathParam);
      uidlUri=serviceUrl;
    }
 else {
      uidlUri=serviceUrl + relativeUrl;
    }
  }
  if (uidlUri.startsWith(ApplicationConstants.VAADIN_PROTOCOL_PREFIX)) {
    final String vaadinUri=configuration.getVaadinDirUrl();
    String relativeUrl=uidlUri.substring(ApplicationConstants.VAADIN_PROTOCOL_PREFIX.length());
    uidlUri=vaadinUri + relativeUrl;
  }
  return uidlUri;
}
