{
  startRequest();
  JSONObject payload=new JSONObject();
  if (!getCsrfToken().equals(ApplicationConstants.CSRF_TOKEN_DEFAULT_VALUE)) {
    payload.put(ApplicationConstants.CSRF_TOKEN,new JSONString(getCsrfToken()));
  }
  payload.put(ApplicationConstants.RPC_INVOCATIONS,reqInvocations);
  payload.put(ApplicationConstants.SERVER_SYNC_ID,new JSONNumber(lastSeenServerSyncId));
  VConsole.log("Making UIDL Request with params: " + payload);
  String uri=translateVaadinUri(ApplicationConstants.APP_PROTOCOL_PREFIX + ApplicationConstants.UIDL_PATH + '/');
  if (extraParams != null && extraParams.length() > 0) {
    uri=SharedUtil.addGetParameters(uri,extraParams);
  }
  uri=SharedUtil.addGetParameters(uri,UIConstants.UI_ID_PARAMETER + "=" + configuration.getUIId());
  doUidlRequest(uri,payload);
}
