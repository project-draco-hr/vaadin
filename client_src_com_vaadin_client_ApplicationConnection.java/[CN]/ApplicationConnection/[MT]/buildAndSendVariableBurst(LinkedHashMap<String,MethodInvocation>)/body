{
  final StringBuffer req=new StringBuffer();
  while (!pendingInvocations.isEmpty()) {
    if (ApplicationConfiguration.isDebugMode()) {
      Util.logVariableBurst(this,pendingInvocations.values());
    }
    JSONArray reqJson=new JSONArray();
    for (    MethodInvocation invocation : pendingInvocations.values()) {
      JSONArray invocationJson=new JSONArray();
      invocationJson.set(0,new JSONString(invocation.getConnectorId()));
      invocationJson.set(1,new JSONString(invocation.getInterfaceName()));
      invocationJson.set(2,new JSONString(invocation.getMethodName()));
      JSONArray paramJson=new JSONArray();
      Type[] parameterTypes=null;
      if (!isLegacyVariableChange(invocation) && !isJavascriptRpc(invocation)) {
        try {
          Type type=new Type(invocation.getInterfaceName(),null);
          Method method=type.getMethod(invocation.getMethodName());
          parameterTypes=method.getParameterTypes();
        }
 catch (        NoDataException e) {
          throw new RuntimeException("No type data for " + invocation.toString(),e);
        }
      }
      for (int i=0; i < invocation.getParameters().length; ++i) {
        Type type=null;
        if (parameterTypes != null) {
          type=parameterTypes[i];
        }
        Object value=invocation.getParameters()[i];
        paramJson.set(i,JsonEncoder.encode(value,type,this));
      }
      invocationJson.set(3,paramJson);
      reqJson.set(reqJson.size(),invocationJson);
    }
    req.append(escapeBurstContents(reqJson.toString()));
    pendingInvocations.clear();
    lastInvocationTag=0;
  }
  String extraParams;
  if (!getConfiguration().isBrowserDetailsSent()) {
    extraParams=getNativeBrowserDetailsParameters(getConfiguration().getRootPanelId());
    getConfiguration().setBrowserDetailsSent();
  }
 else {
    extraParams="";
  }
  if (!getConfiguration().isWidgetsetVersionSent()) {
    if (!extraParams.isEmpty()) {
      extraParams+="&";
    }
    String widgetsetVersion=Version.getFullVersion();
    extraParams+="v-wsver=" + widgetsetVersion;
    getConfiguration().setWidgetsetVersionSent();
  }
  makeUidlRequest(req.toString(),extraParams);
}
