{
  if (enabled && push == null) {
    final PushConnection push=GWT.create(PushConnection.class);
    push.init(this);
    push.runWhenAtmosphereLoaded(new Command(){
      @Override public void execute(){
        ApplicationConnection.this.push=push;
        final String pushUri=addGetParameters(translateVaadinUri(ApplicationConstants.APP_PROTOCOL_PREFIX + ApplicationConstants.PUSH_PATH + '/'),UIConstants.UI_ID_PARAMETER + "=" + getConfiguration().getUIId());
        Scheduler.get().scheduleDeferred(new Command(){
          @Override public void execute(){
            push.connect(pushUri);
          }
        }
);
      }
    }
);
  }
 else   if (!enabled && push != null) {
    push.disconnect();
    push=null;
  }
}
