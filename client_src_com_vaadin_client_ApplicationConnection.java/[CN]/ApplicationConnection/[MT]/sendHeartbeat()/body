{
  final String uri=addGetParameters(translateVaadinUri(ApplicationConstants.APP_PROTOCOL_PREFIX + ApplicationConstants.HEARTBEAT_REQUEST_PATH),UIConstants.UI_ID_PARAMETER + "=" + getConfiguration().getUIId());
  final RequestBuilder rb=new RequestBuilder(RequestBuilder.POST,uri);
  final RequestCallback callback=new RequestCallback(){
    @Override public void onResponseReceived(    Request request,    Response response){
      int status=response.getStatusCode();
      if (status == Response.SC_OK) {
        VConsole.log("Heartbeat response OK");
        scheduleHeartbeat();
      }
 else       if (status == Response.SC_GONE) {
        showSessionExpiredError(null);
      }
 else {
        VConsole.error("Failed sending heartbeat to server. Error code: " + status);
      }
    }
    @Override public void onError(    Request request,    Throwable exception){
      VConsole.error("Exception sending heartbeat: " + exception);
    }
  }
;
  rb.setCallback(callback);
  try {
    VConsole.log("Sending heartbeat request...");
    rb.send();
  }
 catch (  RequestException re) {
    callback.onError(null,re);
  }
}
