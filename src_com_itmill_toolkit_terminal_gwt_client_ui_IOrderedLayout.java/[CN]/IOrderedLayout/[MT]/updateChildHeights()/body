{
  if (height != null) {
    int size;
    if (tableMode) {
      if (height != null && height.endsWith("px")) {
        try {
          size=Integer.parseInt(height.substring(0,height.length() - 2));
          if (size < 0) {
            size=rootOffsetMeasure("offsetHeight");
          }
        }
 catch (        NumberFormatException e) {
          size=rootOffsetMeasure("offsetHeight");
        }
      }
 else {
        size=rootOffsetMeasure("offsetHeight");
      }
    }
 else {
      size=DOM.getElementPropertyInt(root,"offsetHeight");
    }
    size-=margins.hasTop() ? marginTop : 0;
    size-=margins.hasBottom() ? marginBottom : 0;
    int numChild=childWidgets.size();
    if (hasComponentSpacing) {
      size-=((orientationMode == ORIENTATION_HORIZONTAL) ? hSpacing : vSpacing) * (numChild - 1);
    }
    if (orientationMode == ORIENTATION_HORIZONTAL) {
      for (Iterator i=childWidgetWrappers.iterator(); i.hasNext(); ) {
        ((WidgetWrapper)i.next()).forceHeight(size);
      }
    }
 else {
      for (Iterator i=childWidgetWrappers.iterator(); i.hasNext(); ) {
        final int ws=Math.round(((float)size) / (numChild--));
        size-=ws;
        ((WidgetWrapper)i.next()).forceHeight(ws);
      }
    }
  }
 else {
    for (Iterator i=childWidgetWrappers.iterator(); i.hasNext(); ) {
      ((WidgetWrapper)i.next()).forceHeight(-1);
    }
  }
}
