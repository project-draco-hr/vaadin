{
  int highestNonRelative=-1;
  int highestRelative=-1;
  for (  ComponentConnector child : getChildComponents()) {
    Element el=child.getWidget().getElement();
    CaptionPosition pos=getWidget().getCaptionPositionFromElement((Element)el.getParentElement().cast());
    if (needsMeasure.contains(el)) {
      int h=getLayoutManager().getOuterHeight(el);
      if (h == -1) {
        h=Util.getRequiredHeight(el);
      }
      String sHeight=el.getStyle().getHeight();
      if (childCaptionElementHeight.containsKey(el) && (sHeight == null || !sHeight.endsWith("%")) && (pos == CaptionPosition.TOP || pos == CaptionPosition.BOTTOM)) {
        h+=childCaptionElementHeight.get(el);
      }
      if (h > highestNonRelative) {
        highestNonRelative=h;
      }
    }
 else {
      int h=getLayoutManager().getOuterHeight(el);
      if (h == -1) {
        h=Util.getRequiredHeight(el);
      }
      if (childCaptionElementHeight.containsKey(el) && (pos == CaptionPosition.TOP || pos == CaptionPosition.BOTTOM)) {
        h+=childCaptionElementHeight.get(el);
      }
      if (h > highestRelative) {
        highestRelative=h;
      }
    }
  }
  return highestNonRelative > -1 ? highestNonRelative : highestRelative;
}
