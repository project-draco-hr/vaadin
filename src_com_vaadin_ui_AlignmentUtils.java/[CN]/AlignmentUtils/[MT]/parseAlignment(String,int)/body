{
  Integer parsed=alignmentStrings.get(alignmentString.toLowerCase());
  if (parsed == null) {
    throw new IllegalArgumentException("Could not parse alignment string '" + alignmentString + "'");
  }
  if ((parsed & horizontalMask) != 0) {
    int vertical=(alignment & verticalMask);
    alignment=(vertical | parsed);
  }
 else {
    int horizontal=(alignment & horizontalMask);
    alignment=(horizontal | parsed);
  }
  return alignment;
}
