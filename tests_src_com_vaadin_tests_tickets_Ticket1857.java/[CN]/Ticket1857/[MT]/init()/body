{
  setTheme("tests-tickets");
  ExpandLayout el=new ExpandLayout();
  Window main=new Window("Testcase for #1857",el);
  setMainWindow(main);
  el.setMargin(true);
  el.setSpacing(true);
  final Table t=new Table();
  el.addComponent(t);
  el.expand(t);
  t.setSizeFull();
  addContentsToTable(t);
  t.setStyleName("foo");
  OrderedLayout footer=new OrderedLayout(OrderedLayout.ORIENTATION_HORIZONTAL);
  el.addComponent(footer);
  footer.setSpacing(true);
  final Button actionHandlerEnabler=new Button("Action handlers",false);
  footer.addComponent(actionHandlerEnabler);
  actionHandlerEnabler.setImmediate(true);
  actionHandlerEnabler.addListener(new Property.ValueChangeListener(){
    public void valueChange(    ValueChangeEvent event){
      if (((Boolean)actionHandlerEnabler.getValue()).booleanValue()) {
        t.addActionHandler(Ticket1857.this);
      }
 else {
        t.removeActionHandler(Ticket1857.this);
      }
    }
  }
);
  final Button cellStylesEnabler=new Button("Cell styles",false);
  footer.addComponent(cellStylesEnabler);
  cellStylesEnabler.setImmediate(true);
  cellStylesEnabler.addListener(new Property.ValueChangeListener(){
    public void valueChange(    ValueChangeEvent event){
      if (((Boolean)cellStylesEnabler.getValue()).booleanValue()) {
        t.setCellStyleGenerator(new Table.CellStyleGenerator(){
          public String getStyle(          Object itemId,          Object propertyId){
            Object cell=t.getContainerProperty(itemId,propertyId).getValue();
            if (!(cell instanceof Integer)) {
              return null;
            }
            int age=((Integer)cell).intValue();
            return age > 65 ? "old" : (age < 18 ? "young" : null);
          }
        }
);
      }
 else {
        t.setCellStyleGenerator(null);
      }
    }
  }
);
  cellStylesEnabler.setValue(Boolean.TRUE);
}
