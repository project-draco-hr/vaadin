{
  if (expandWrapper == null) {
    expandWrapper=DOM.createDiv();
    expandWrapper.setClassName("v-expand");
    while (getElement().getChildCount() > 0) {
      Node el=getElement().getChild(0);
      expandWrapper.appendChild(el);
    }
    getElement().appendChild(expandWrapper);
  }
  double total=0;
  for (  Slot slot : widgetToSlot.values()) {
    if (slot.getExpandRatio() != 0) {
      total+=slot.getExpandRatio();
    }
 else {
      if (vertical) {
        slot.getElement().getStyle().clearHeight();
      }
 else {
        slot.getElement().getStyle().clearWidth();
      }
    }
    slot.getElement().getStyle().clearMarginLeft();
    slot.getElement().getStyle().clearMarginTop();
  }
  for (  Slot slot : widgetToSlot.values()) {
    if (slot.getExpandRatio() != 0) {
      if (vertical) {
        slot.setHeight((100 * (slot.getExpandRatio() / total)) + "%");
        if (slot.hasRelativeHeight()) {
          Util.notifyParentOfSizeChange(this,true);
        }
      }
 else {
        slot.setWidth((100 * (slot.getExpandRatio() / total)) + "%");
        if (slot.hasRelativeWidth()) {
          Util.notifyParentOfSizeChange(this,true);
        }
      }
    }
  }
}
