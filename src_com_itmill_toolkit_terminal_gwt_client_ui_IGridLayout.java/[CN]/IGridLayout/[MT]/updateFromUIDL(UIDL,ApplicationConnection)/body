{
  if (client.updateComponent(this,uidl,false)) {
    return;
  }
  if (uidl.hasAttribute("caption")) {
    setTitle(uidl.getStringAttribute("caption"));
  }
  int row=0, column=0;
  ArrayList detachdedPaintables=new ArrayList();
  for (Iterator i=uidl.getChildIterator(); i.hasNext(); ) {
    UIDL r=(UIDL)i.next();
    if ("gr".equals(r.getTag())) {
      column=0;
      for (Iterator j=r.getChildIterator(); j.hasNext(); ) {
        UIDL c=(UIDL)j.next();
        if ("gc".equals(c.getTag())) {
          int w;
          if (c.hasAttribute("w")) {
            w=c.getIntAttribute("w");
          }
 else {
            w=1;
          }
          ((FlexCellFormatter)getCellFormatter()).setColSpan(row,column,w);
          int h;
          if (c.hasAttribute("h")) {
            h=c.getIntAttribute("h");
          }
 else {
            h=1;
          }
          ((FlexCellFormatter)getCellFormatter()).setRowSpan(row,column,h);
          UIDL u=c.getChildUIDL(0);
          if (u != null) {
            Widget child=client.getWidget(u);
            prepareCell(row,column);
            Widget oldChild=getWidget(row,column);
            if (oldChild instanceof CaptionWrapper) {
              CaptionWrapper new_name=(CaptionWrapper)oldChild;
              oldChild=(Widget)new_name.getPaintable();
            }
            if (child != oldChild) {
              if (oldChild != null) {
                detachdedPaintables.add(oldChild);
                CaptionWrapper cw=(CaptionWrapper)widgetToCaptionWrapper.get(oldChild);
                cw.removeFromParent();
                widgetToCaptionWrapper.remove(oldChild);
              }
              CaptionWrapper wrapper=new CaptionWrapper((Paintable)child,client);
              setWidget(row,column,wrapper);
              widgetToCaptionWrapper.put(child,wrapper);
            }
            if (!u.getBooleanAttribute("cached")) {
              ((Paintable)child).updateFromUIDL(u,client);
            }
          }
          column+=w;
        }
      }
      row++;
    }
  }
  for (Iterator it=detachdedPaintables.iterator(); it.hasNext(); ) {
    Widget w=(Widget)it.next();
    if (!w.isAttached()) {
      client.unregisterPaintable((Paintable)w);
    }
  }
}
