{
  if (client.updateComponent(this,uidl,false)) {
    return;
  }
  if (uidl.hasAttribute("caption")) {
    setTitle(uidl.getStringAttribute("caption"));
  }
  int row=0, column=0;
  ArrayList oldWidgetWrappers=new ArrayList();
  for (Iterator iterator=iterator(); iterator.hasNext(); ) {
    oldWidgetWrappers.add(iterator.next());
  }
  clear();
  for (Iterator i=uidl.getChildIterator(); i.hasNext(); ) {
    UIDL r=(UIDL)i.next();
    if ("gr".equals(r.getTag())) {
      column=0;
      for (Iterator j=r.getChildIterator(); j.hasNext(); ) {
        UIDL c=(UIDL)j.next();
        if ("gc".equals(c.getTag())) {
          prepareCell(row,column);
          int w;
          if (c.hasAttribute("w")) {
            w=c.getIntAttribute("w");
          }
 else {
            w=1;
          }
          (getRowFormatter()).setVerticalAlign(row,HasVerticalAlignment.ALIGN_TOP);
          ((FlexCellFormatter)getCellFormatter()).setColSpan(row,column,w);
          int h;
          if (c.hasAttribute("h")) {
            h=c.getIntAttribute("h");
          }
 else {
            h=1;
          }
          ((FlexCellFormatter)getCellFormatter()).setRowSpan(row,column,h);
          UIDL u=c.getChildUIDL(0);
          if (u != null) {
            Widget child=client.getWidget(u);
            CaptionWrapper wr;
            if (widgetToCaptionWrapper.containsKey(child)) {
              wr=(CaptionWrapper)widgetToCaptionWrapper.get(child);
              oldWidgetWrappers.remove(wr);
            }
 else {
              wr=new CaptionWrapper((Paintable)child,client);
              widgetToCaptionWrapper.put(child,wr);
            }
            setWidget(row,column,wr);
            if (!u.getBooleanAttribute("cached")) {
              ((Paintable)child).updateFromUIDL(u,client);
            }
          }
          column+=w;
        }
      }
      row++;
    }
  }
  for (Iterator it=oldWidgetWrappers.iterator(); it.hasNext(); ) {
    CaptionWrapper w=(CaptionWrapper)it.next();
    client.unregisterPaintable(w.getPaintable());
    widgetToCaptionWrapper.remove(w.getPaintable());
  }
}
