{
  clear();
  if (uidl.hasAttribute("caption"))   setTitle(uidl.getStringAttribute("caption"));
  int row=0, column=0;
  ArrayList detachdedPaintables=new ArrayList();
  for (Iterator i=uidl.getChildIterator(); i.hasNext(); ) {
    UIDL r=(UIDL)i.next();
    if ("gr".equals(r.getTag())) {
      row++;
      column=0;
      for (Iterator j=r.getChildIterator(); j.hasNext(); ) {
        UIDL c=(UIDL)j.next();
        if ("gc".equals(c.getTag())) {
          column++;
          int w;
          if (c.hasAttribute("w")) {
            w=c.getIntAttribute("w");
          }
 else           w=1;
          ((FlexCellFormatter)getCellFormatter()).setColSpan(row,column,w);
          UIDL u=c.getChildUIDL(0);
          if (u != null) {
            Widget child=client.getWidget(u);
            prepareCell(row,column);
            Widget oldChild=getWidget(row,column);
            if (child != oldChild) {
              if (oldChild != null) {
                CaptionWrapper cw=(CaptionWrapper)oldChild;
                detachdedPaintables.add(cw.getPaintable());
                widgetToCaptionWrapper.remove(oldChild);
              }
              CaptionWrapper wrapper=new CaptionWrapper((Paintable)child);
              setWidget(row,column,wrapper);
              widgetToCaptionWrapper.put(child,wrapper);
            }
            ((Paintable)child).updateFromUIDL(u,client);
          }
          column+=w - 1;
        }
      }
    }
  }
  for (Iterator it=detachdedPaintables.iterator(); it.hasNext(); ) {
    Widget w=(Widget)it.next();
    if (!w.isAttached())     client.unregisterPaintable((Paintable)w);
  }
}
