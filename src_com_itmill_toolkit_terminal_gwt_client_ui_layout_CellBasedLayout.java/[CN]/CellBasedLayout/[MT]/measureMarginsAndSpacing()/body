{
  if (!isAttached()) {
    return false;
  }
  DivElement measurement=Document.get().createDivElement();
  Style style=measurement.getStyle();
  style.setProperty("position","absolute");
  style.setProperty("top","0");
  style.setProperty("left","0");
  style.setProperty("width","0");
  style.setProperty("height","0");
  style.setProperty("visibility","hidden");
  style.setProperty("overflow","hidden");
  root.appendChild(measurement);
  measurement.setClassName(STYLENAME_SPACING + (spacingEnabled ? "-on" : "-off"));
  activeSpacing.vSpacing=measurement.getOffsetHeight();
  activeSpacing.hSpacing=measurement.getOffsetWidth();
  DivElement measurement2=Document.get().createDivElement();
  style=measurement2.getStyle();
  style.setProperty("width","0px");
  style.setProperty("height","0px");
  style.setProperty("visibility","hidden");
  style.setProperty("overflow","hidden");
  measurement.appendChild(measurement2);
  String sn=getStylePrimaryName() + "-margin";
  if (activeMarginsInfo.hasTop()) {
    sn+=" " + STYLENAME_MARGIN_TOP;
  }
  if (activeMarginsInfo.hasBottom()) {
    sn+=" " + STYLENAME_MARGIN_BOTTOM;
  }
  if (activeMarginsInfo.hasLeft()) {
    sn+=" " + STYLENAME_MARGIN_LEFT;
  }
  if (activeMarginsInfo.hasRight()) {
    sn+=" " + STYLENAME_MARGIN_RIGHT;
  }
  measurement.setClassName(sn);
  activeMargins.setMarginTop(measurement2.getOffsetTop());
  activeMargins.setMarginLeft(measurement2.getOffsetLeft());
  activeMargins.setMarginRight(measurement.getOffsetWidth() - activeMargins.getMarginLeft());
  activeMargins.setMarginBottom(measurement.getOffsetHeight() - activeMargins.getMarginTop());
  root.removeChild(measurement);
  style=root.getStyle();
  style.setPropertyPx("marginLeft",activeMargins.getMarginLeft());
  style.setPropertyPx("marginRight",activeMargins.getMarginRight());
  style.setPropertyPx("marginTop",activeMargins.getMarginTop());
  style.setPropertyPx("marginBottom",activeMargins.getMarginBottom());
  return true;
}
