{
  if (childComponent.getParent() == this) {
    if (getWidgetIndex(childComponent) != position) {
      childComponent.removeFromParent();
      getChildren().insert(childComponent,position);
      root.insertBefore(childComponent.getElement(),root.getChildNodes().getItem(position));
      adopt(childComponent);
    }
  }
 else {
    widgetToComponentContainer.put(childComponent.getWidget(),childComponent);
    getChildren().insert(childComponent,position);
    boolean insert=true;
    if (widgetToComponentContainer.size() == position) {
      insert=false;
    }
    if (insert) {
      root.insertBefore(childComponent.getElement(),root.getChildNodes().getItem(position));
    }
 else {
      root.insertBefore(childComponent.getElement(),clearElement);
    }
    adopt(childComponent);
  }
}
