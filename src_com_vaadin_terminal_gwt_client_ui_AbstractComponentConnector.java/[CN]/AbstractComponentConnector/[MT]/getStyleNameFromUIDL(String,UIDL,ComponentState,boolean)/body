{
  boolean enabled=state.isEnabled();
  StringBuffer styleBuf=new StringBuffer();
  styleBuf.append(primaryStyleName);
  styleBuf.append(" v-paintable");
  if (!enabled) {
    styleBuf.append(" ");
    styleBuf.append(ApplicationConnection.DISABLED_CLASSNAME);
  }
  if (state.isReadOnly()) {
    styleBuf.append(" ");
    styleBuf.append("v-readonly");
  }
  if (state.hasStyles()) {
    final String[] styles=state.getStyle().split(" ");
    for (int i=0; i < styles.length; i++) {
      styleBuf.append(" ");
      styleBuf.append(primaryStyleName);
      styleBuf.append("-");
      styleBuf.append(styles[i]);
      styleBuf.append(" ");
      styleBuf.append(styles[i]);
    }
  }
  if (field && uidl.hasAttribute("modified")) {
    styleBuf.append(" ");
    styleBuf.append(ApplicationConnection.MODIFIED_CLASSNAME);
  }
  if (uidl.hasAttribute(ATTRIBUTE_ERROR)) {
    styleBuf.append(" ");
    styleBuf.append(primaryStyleName);
    styleBuf.append(ApplicationConnection.ERROR_CLASSNAME_EXT);
  }
  if (uidl.hasAttribute(ATTRIBUTE_REQUIRED)) {
    styleBuf.append(" ");
    styleBuf.append(primaryStyleName);
    styleBuf.append(ApplicationConnection.REQUIRED_CLASSNAME_EXT);
  }
  return styleBuf.toString();
}
