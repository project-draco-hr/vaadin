{
  VMeasuringOrderedLayout layout=getWidget();
  boolean isVertical=layout.isVertical;
  boolean isUndefined=isUndefinedInDirection(isVertical);
  int startPadding=getStartPadding(isVertical);
  int endPadding=getEndPadding(isVertical);
  int spacingSize=getSpacingInDirection(isVertical);
  int allocatedSize;
  if (isUndefined) {
    allocatedSize=-1;
  }
 else {
    allocatedSize=getInnerSizeInDirection(isVertical);
  }
  allocatedSize=layout.layoutPrimaryDirection(spacingSize,allocatedSize,startPadding,endPadding);
  Style ownStyle=getWidget().getElement().getStyle();
  if (isUndefined) {
    int outerSize=getSizeForInnerSize(allocatedSize,isVertical);
    ownStyle.setPropertyPx(getSizeProperty(isVertical),outerSize);
    reportUndefinedSize(outerSize,isVertical);
  }
 else {
    ownStyle.setProperty(getSizeProperty(isVertical),getDefinedSize(isVertical));
  }
}
