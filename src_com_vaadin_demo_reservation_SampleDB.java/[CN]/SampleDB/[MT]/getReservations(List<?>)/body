{
  String q="SELECT * FROM " + Reservation.TABLE + ","+ Resource.TABLE;
  q+=" WHERE " + Reservation.PROPERTY_ID_RESOURCE_ID + "="+ Resource.PROPERTY_ID_ID;
  if (resources != null && resources.size() > 0) {
    final StringBuffer s=new StringBuffer();
    for (final Iterator<?> it=resources.iterator(); it.hasNext(); ) {
      if (s.length() > 0) {
        s.append(",");
      }
      s.append(((Item)it.next()).getItemProperty(Resource.PROPERTY_ID_ID));
    }
    q+=" HAVING " + Reservation.PROPERTY_ID_RESOURCE_ID + " IN ("+ s+ ")";
  }
  q+=" ORDER BY " + Reservation.PROPERTY_ID_RESERVED_FROM;
  try {
    final QueryContainer qc=new QueryContainer(q,connection,ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
    if (qc.size() < 1) {
      return null;
    }
 else {
      return qc;
    }
  }
 catch (  final SQLException e) {
    throw new RuntimeException(e);
  }
}
