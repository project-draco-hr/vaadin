{
  counter=0;
  total=0;
  fileName=filename;
  mtype=MIMEType;
  return new OutputStream(){
    private static final int searchedByte='\n';
    @Override public void write(    int b) throws IOException {
      total++;
      if (b == searchedByte) {
        counter++;
      }
      if (sleep && total % 1000 == 0) {
        try {
          Thread.sleep(100);
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
  }
;
}
