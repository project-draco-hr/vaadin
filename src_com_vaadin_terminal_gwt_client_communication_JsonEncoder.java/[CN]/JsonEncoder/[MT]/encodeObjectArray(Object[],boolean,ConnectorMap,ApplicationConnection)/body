{
  JSONArray jsonArray=new JSONArray();
  for (int i=0; i < array.length; ++i) {
    Object value=array[i];
    if (restrictToInternalTypes) {
      value=new UidlValue(value);
    }
    jsonArray.set(i,encode(value,restrictToInternalTypes,connectorMap,connection));
  }
  return jsonArray;
}
