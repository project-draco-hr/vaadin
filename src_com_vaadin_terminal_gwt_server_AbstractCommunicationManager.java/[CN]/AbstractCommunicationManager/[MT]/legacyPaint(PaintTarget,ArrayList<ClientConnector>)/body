{
  List<Component> legacyComponents=new ArrayList<Component>();
  for (  Connector connector : dirtyVisibleConnectors) {
    if (connector instanceof Paintable) {
      legacyComponents.add((Component)connector);
    }
  }
  sortByHierarchy(legacyComponents);
  for (  Component c : legacyComponents) {
    logger.info("Painting legacy Component " + c.getClass().getName() + "@"+ Integer.toHexString(c.hashCode()));
    paintTarget.startTag("change");
    final String pid=c.getConnectorId();
    paintTarget.addAttribute("pid",pid);
    c.paint(paintTarget);
    paintTarget.endTag("change");
  }
}
