{
  String id=paintableIdMap.get(paintable);
  if (id == null) {
    String debugId=paintable.getDebugId();
    if (debugId == null) {
      id="PID" + idSequence++;
    }
 else {
      id="PID_S" + debugId;
      for (int seq=0; ; ++seq) {
        Paintable old=idPaintableMap.get(id);
        if (old == null || (old instanceof Component && ((Component)old).getApplication() == null)) {
          break;
        }
        id="PID_" + seq + "S"+ debugId;
      }
    }
    idPaintableMap.put(id,paintable);
    paintableIdMap.put(paintable,id);
  }
  return id;
}
