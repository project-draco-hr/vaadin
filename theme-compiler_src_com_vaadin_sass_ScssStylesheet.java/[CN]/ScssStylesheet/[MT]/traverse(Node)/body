{
  node.traverse();
  @SuppressWarnings("unchecked") HashMap<String,VariableNode> variableScope=(HashMap<String,VariableNode>)variables.clone();
  int maxSize=node.getChildren().size();
  ArrayList<Node> oldChildren=new ArrayList<Node>(node.getChildren());
  for (int i=0; i < maxSize; i++) {
    Node current=node.getChildren().get(i);
    traverse(current);
    if (!node.getChildren().equals(oldChildren)) {
      oldChildren=new ArrayList<Node>(node.getChildren());
      maxSize=node.getChildren().size();
      i=i - 1;
    }
  }
  variables.clear();
  variables.putAll(variableScope);
}
