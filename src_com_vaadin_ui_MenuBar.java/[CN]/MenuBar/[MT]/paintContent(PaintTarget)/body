{
  super.paintContent(target);
  Stack<Iterator<MenuItem>> iteratorStack=new Stack<Iterator<MenuItem>>();
  target.startTag("options");
  if (submenuIcon != null) {
    target.addAttribute("submenuIcon",submenuIcon);
  }
  if (getWidth() > -1) {
    target.startTag("moreItem");
    target.addAttribute("text",moreItem.getText());
    if (moreItem.getIcon() != null) {
      target.addAttribute("icon",moreItem.getIcon());
    }
    target.endTag("moreItem");
  }
  target.endTag("options");
  target.startTag("items");
  Iterator<MenuItem> itr=menuItems.iterator();
  while (itr.hasNext()) {
    MenuItem item=itr.next();
    target.startTag("item");
    target.addAttribute("id",item.getId());
    if (item.isSeparator()) {
      target.addAttribute("separator",true);
      target.endTag("item");
    }
 else {
      target.addAttribute("text",item.getText());
      Command command=item.getCommand();
      if (command != null) {
        target.addAttribute("command",true);
      }
      Resource icon=item.getIcon();
      if (icon != null) {
        target.addAttribute("icon",icon);
      }
      if (!item.isEnabled()) {
        target.addAttribute("disabled",true);
      }
      if (item.hasChildren()) {
        iteratorStack.push(itr);
        itr=item.getChildren().iterator();
      }
 else {
        target.endTag("item");
      }
    }
    while (!itr.hasNext() && !iteratorStack.empty()) {
      itr=iteratorStack.pop();
      target.endTag("item");
    }
  }
  target.endTag("items");
}
