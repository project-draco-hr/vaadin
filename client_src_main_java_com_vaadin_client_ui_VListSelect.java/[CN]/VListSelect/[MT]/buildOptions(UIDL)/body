{
  int scrollTop=select.getElement().getScrollTop();
  int rowCount=getRows();
  select.setMultipleSelect(isMultiselect());
  select.clear();
  if (!isMultiselect() && isNullSelectionAllowed() && !isNullSelectionItemAvailable()) {
    select.addItem("",(String)null);
  }
  for (final Iterator<?> i=uidl.getChildIterator(); i.hasNext(); ) {
    final UIDL optionUidl=(UIDL)i.next();
    select.addItem(optionUidl.getStringAttribute("caption"),optionUidl.getStringAttribute("key"));
    if (optionUidl.hasAttribute("selected")) {
      int itemIndex=select.getItemCount() - 1;
      select.setItemSelected(itemIndex,true);
      lastSelectedIndex=itemIndex;
    }
  }
  if (getRows() > 0) {
    select.setVisibleItemCount(getRows());
  }
  if (rowCount == getRows()) {
    select.getElement().setScrollTop(scrollTop);
  }
}
