{
  super.onStateChanged(stateChangeEvent);
  boolean sinkOnloads=false;
switch (getState().contentMode) {
case PREFORMATTED:
    PreElement preElement=Document.get().createPreElement();
  preElement.setInnerText(getState().text);
getWidget().setHTML("");
getWidget().getElement().appendChild(preElement);
break;
case TEXT:
getWidget().setText(getState().text);
break;
case XHTML:
case HTML:
case RAW:
sinkOnloads=true;
case XML:
getWidget().setHTML(getState().text);
break;
default :
getWidget().setText("");
break;
}
if (sinkOnloads) {
Util.sinkOnloadForImages(getWidget().getElement());
}
}
