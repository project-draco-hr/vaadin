{
  Window w=getLayout().getWindow();
  TestUtils.injectCSS(w,".v-table-row-drag-middle .v-table-cell-content {" + "        background-color: inherit ; border-bottom: 1px solid cyan;" + "}");
  hl.addComponent(table);
  hl.setWidth("100%");
  hl.setSpacing(true);
  hl.setExpandRatio(table,1);
  table.setWidth("100%");
  table.setPageLength(10);
  table.setRowHeaderMode(Table.ROW_HEADER_MODE_ID);
  table.setSelectable(true);
  populateTable();
  addComponent(hl);
  table.setDragMode(Table.DragModes.ROWS);
  table.setDropHandler(new DropHandler(){
    AcceptCriterion crit=new DragSourceIs(table);
    public AcceptCriterion getAcceptCriterion(){
      return crit;
    }
    public void drop(    DragAndDropEvent dropEvent){
      AbstractSelectDropTargetDetails dropTargetData=(AbstractSelectDropTargetDetails)dropEvent.getDropTargetDetails();
      DataBoundTransferable transferable=(DataBoundTransferable)dropEvent.getTransferable();
      Object itemIdOver=dropTargetData.getItemIdOver();
      Object itemId=transferable.getItemId();
      if (itemId == null || itemIdOver == null || itemId.equals(itemIdOver)) {
        return;
      }
      IndexedContainer containerDataSource=(IndexedContainer)table.getContainerDataSource();
      IndexedContainer clone=null;
      try {
        clone=(IndexedContainer)containerDataSource.clone();
        int newIndex=containerDataSource.indexOfId(itemIdOver) - 1;
        if (dropTargetData.getDropLocation() != VerticalDropLocation.TOP) {
          newIndex++;
        }
        if (newIndex < 0) {
          newIndex=0;
        }
        containerDataSource.removeItem(itemId);
        Item newItem=containerDataSource.addItemAt(newIndex,itemId);
        Item item=clone.getItem(itemId);
        for (        Object propId : item.getItemPropertyIds()) {
          newItem.getItemProperty(propId).setValue(item.getItemProperty(propId).getValue());
        }
      }
 catch (      CloneNotSupportedException e) {
        e.printStackTrace();
      }
    }
  }
);
}
