{
  Element rootElement=getElement();
  Element parent=DOM.getParent(element);
  if (parent == null) {
    return -1;
  }
  Element grandParent=DOM.getParent(parent);
  if (grandParent == null) {
    return -1;
  }
  while (grandParent != null && parent != rootElement) {
    if (grandParent == rootElement) {
      NodeList<Node> nodes=parent.getChildNodes();
      int size=nodes.getLength();
      for (int index=0; index < size; index++) {
        if (nodes.getItem(index) == element) {
          return index;
        }
      }
      return -1;
    }
    element=parent;
    parent=grandParent;
    grandParent=DOM.getParent(grandParent);
  }
  return -1;
}
