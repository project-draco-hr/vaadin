{
  if (null == sharedState) {
    sharedState=createState();
  }
  if (markAsDirty) {
    UI ui=getUI();
    if (ui != null && !ui.getConnectorTracker().isWritingResponse() && !ui.getConnectorTracker().isDirty(this)) {
      markAsDirty();
    }
  }
  return sharedState;
}
