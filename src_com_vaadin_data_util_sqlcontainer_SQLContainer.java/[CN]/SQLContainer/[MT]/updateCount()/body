{
  if (!sizeDirty && new Date().getTime() < sizeUpdated.getTime() + sizeValidMilliSeconds) {
    return;
  }
  try {
    try {
      delegate.setFilters(filters);
    }
 catch (    UnsupportedOperationException e) {
      logger.log(Level.FINE,"The query delegate doesn't support filtering",e);
    }
    try {
      delegate.setOrderBy(sorters);
    }
 catch (    UnsupportedOperationException e) {
      logger.log(Level.FINE,"The query delegate doesn't support filtering",e);
    }
    int newSize=delegate.getCount();
    if (newSize != size) {
      size=newSize;
      refresh();
    }
    sizeUpdated=new Date();
    sizeDirty=false;
    logger.log(Level.FINER,"Updated row count. New count is: " + size);
  }
 catch (  SQLException e) {
    throw new RuntimeException("Failed to update item set size.",e);
  }
}
