{
  this.client=client;
  handleMargins(uidl);
  if (client.updateComponent(this,uidl,false)) {
    return;
  }
  hasComponentSpacing=uidl.getBooleanAttribute("spacing");
  final ArrayList uidlWidgets=new ArrayList();
  for (final Iterator it=uidl.getChildIterator(); it.hasNext(); ) {
    final UIDL cellUidl=(UIDL)it.next();
    final Paintable child=client.getPaintable(cellUidl.getChildUIDL(0));
    uidlWidgets.add(child);
    if (cellUidl.hasAttribute("expanded")) {
      expandedWidget=(Widget)child;
      expandedWidgetUidl=cellUidl.getChildUIDL(0);
    }
  }
  final ArrayList oldWidgets=getPaintables();
  final Iterator oldIt=oldWidgets.iterator();
  final Iterator newIt=uidlWidgets.iterator();
  final Iterator newUidl=uidl.getChildIterator();
  Widget oldChild=null;
  while (newIt.hasNext()) {
    final Widget child=(Widget)newIt.next();
    final UIDL childUidl=((UIDL)newUidl.next()).getChildUIDL(0);
    if (oldChild == null && oldIt.hasNext()) {
      while (oldIt.hasNext()) {
        oldChild=(Widget)oldIt.next();
        if (uidlWidgets.contains(oldChild)) {
          break;
        }
 else {
          removePaintable((Paintable)oldChild);
          oldChild=null;
        }
      }
    }
    if (oldChild == null) {
      add(child);
    }
 else     if (child == oldChild) {
      oldChild=null;
    }
 else     if (hasChildComponent(child)) {
      removeCaption(child);
      int index=getWidgetIndex(oldChild);
      if (componentToCaption.containsKey(oldChild)) {
        index--;
      }
      remove(child);
      insert(child,index);
    }
 else {
      final int index=getWidgetIndex(oldChild);
      insert(child,index);
    }
    if (child != expandedWidget) {
      ((Paintable)child).updateFromUIDL(childUidl,client);
    }
  }
  while (oldIt.hasNext()) {
    oldChild=(Widget)oldIt.next();
    final Paintable p=(Paintable)oldChild;
    if (!uidlWidgets.contains(p)) {
      removePaintable(p);
    }
  }
  if (uidlWidgets.size() == 0) {
    return;
  }
  handleAlignments(uidl);
  iLayout();
  if (expandedWidget != null) {
    ((Paintable)expandedWidget).updateFromUIDL(expandedWidgetUidl,client);
  }
}
