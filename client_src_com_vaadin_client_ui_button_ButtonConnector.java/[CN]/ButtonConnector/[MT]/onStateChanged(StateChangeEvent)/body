{
  super.onStateChanged(stateChangeEvent);
  focusHandlerRegistration=EventHelper.updateFocusHandler(this,focusHandlerRegistration);
  blurHandlerRegistration=EventHelper.updateBlurHandler(this,blurHandlerRegistration);
  Set<String> changedProperties=stateChangeEvent.getChangedProperties();
  if (changedProperties.contains("caption") || changedProperties.contains("htmlContentAllowed")) {
    if (getState().htmlContentAllowed) {
      getWidget().setHtml(getState().caption);
    }
 else {
      getWidget().setText(getState().caption);
    }
  }
  getWidget().clickShortcut=getState().clickShortcutKeyCode;
}
