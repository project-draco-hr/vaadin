{
  super.onStateChanged(stateChangeEvent);
  focusHandlerRegistration=EventHelper.updateFocusHandler(this,focusHandlerRegistration);
  blurHandlerRegistration=EventHelper.updateBlurHandler(this,blurHandlerRegistration);
  Set<String> changedProperties=stateChangeEvent.getChangedProperties();
  if (changedProperties.contains("caption") || changedProperties.contains("htmlContentAllowed")) {
    if (getState().isHtmlContentAllowed()) {
      getWidget().setHtml(getState().getCaption());
    }
 else {
      getWidget().setText(getState().getCaption());
    }
  }
  getWidget().clickShortcut=getState().getClickShortcutKeyCode();
}
