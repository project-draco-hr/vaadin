{
  if (contains(element)) {
    if (get(index) == element) {
      return element;
    }
 else {
      Integer nr=duplicates.get(element);
      if (nr == null) {
        nr=1;
      }
 else {
        nr++;
      }
      duplicates.put(element,nr);
    }
  }
  E old=super.set(index,element);
  Integer dupl=duplicates.get(old);
  if (dupl != null) {
    if (dupl == 1) {
      duplicates.remove(old);
    }
 else {
      duplicates.put(old,dupl - 1);
    }
  }
 else {
    itemSet.remove(old);
  }
  itemSet.add(element);
  return old;
}
