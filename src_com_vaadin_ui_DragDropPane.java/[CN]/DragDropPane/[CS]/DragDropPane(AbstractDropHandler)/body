{
  setWidth("400px");
  setHeight("300px");
  if (dropHandler == null) {
    dropHandler=new AbstractDropHandler(){
      @Override public void receive(      Transferable transferable,      Object dropDetails){
        DragEventDetails ed=(DragEventDetails)dropDetails;
        if (transferable instanceof ComponentTransferable) {
          ComponentTransferable ctr=(ComponentTransferable)transferable;
          Component component=ctr.getSourceComponent();
          if (component.getParent() != DragDropPane.this) {
            if (transferable instanceof DataBindedTransferrable) {
              Label l=new Label();
              l.setSizeUndefined();
              l.setValue("ItemId : " + ((DataBindedTransferrable)transferable).getItemId());
              DragDropPane.this.addComponent(l);
              component=l;
            }
 else {
              DragDropPane.this.addComponent(component);
            }
            Integer left=ed.getAbsoluteLeft();
            Integer top=ed.getAbsoluteTop();
            MouseEventDetails eventDetails=ed.getMouseEvent();
            int clientX=eventDetails.getClientX();
            int clientY=eventDetails.getClientY();
            try {
              DragDropPane.this.getPosition(component).setTopValue(clientY - top);
              DragDropPane.this.getPosition(component).setLeftValue(clientX - left);
            }
 catch (            Exception e) {
            }
          }
 else {
            MouseEventDetails start=ed.getMouseDownEvent();
            MouseEventDetails eventDetails=ed.getMouseEvent();
            int deltaX=eventDetails.getClientX() - start.getClientX();
            int deltaY=eventDetails.getClientY() - start.getClientY();
            ComponentPosition p=DragDropPane.this.getPosition(component);
            p.setTopValue(p.getTopValue() + deltaY);
            p.setLeftValue(p.getLeftValue() + deltaX);
          }
        }
 else {
          String object=(String)transferable.getData("text/plain");
          String content=(String)transferable.getData("fileContents");
          Label l=new Label();
          l.setCaption("Generated from HTML5 drag:");
          if (object != null) {
            l.setValue(object);
          }
 else {
            l.setValue("HTML5 dd");
          }
          l.setDescription(content);
          l.setSizeUndefined();
          DragDropPane.this.addComponent(l);
        }
      }
    }
;
    if (dropHandler instanceof AbstractDropHandler) {
      AbstractDropHandler new_name=dropHandler;
      new_name.setAcceptCriterion(AbstractDropHandler.CRITERION_ACCEPT_ALL);
    }
  }
  abstractDropHandler=dropHandler;
}
