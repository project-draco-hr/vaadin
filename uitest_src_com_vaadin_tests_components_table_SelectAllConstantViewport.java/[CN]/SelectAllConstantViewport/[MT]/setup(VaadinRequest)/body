{
  final Table table=new Table();
  table.addContainerProperty("",Integer.class,null);
  table.setSizeFull();
  table.setMultiSelect(true);
  table.setNullSelectionAllowed(true);
  table.setSelectable(true);
  CheckBox selectAllCheckbox=new CheckBox("Select All");
  selectAllCheckbox.addValueChangeListener(new ValueChangeListener(){
    @Override public void valueChange(    com.vaadin.data.Property.ValueChangeEvent event){
      Object checked=event.getProperty().getValue();
      if (checked instanceof Boolean) {
        if (((Boolean)checked).booleanValue()) {
          table.setValue(table.getItemIds());
        }
 else {
          table.setValue(null);
        }
      }
    }
  }
);
  for (int i=0; i < 200; i++) {
    table.addItem(new Object[]{new Integer(i)},new Integer(i));
  }
  table.setCurrentPageFirstItemIndex(185);
  final CssLayout layout=new CssLayout();
  layout.addComponent(selectAllCheckbox);
  layout.addComponent(table);
  layout.setSizeFull();
  addComponent(layout);
}
