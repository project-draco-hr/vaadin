{
  final WrappedSession session=request.getWrappedSession(allowSessionCreation);
  if (session == null) {
    throw new SessionExpiredException();
  }
  VaadinSession vaadinSession=VaadinSession.getForSession(session);
  if (vaadinSession == null) {
    return null;
  }
  return vaadinSession;
}
