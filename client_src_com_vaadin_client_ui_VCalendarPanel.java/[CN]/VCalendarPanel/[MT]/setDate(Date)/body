{
  if (currentDate == value && currentDate != null) {
    return;
  }
  Date oldDisplayedMonth=displayedMonth;
  value=currentDate;
  if (value == null) {
    focusedDate=displayedMonth=null;
  }
 else {
    focusedDate=new FocusedDate(value.getYear(),value.getMonth(),value.getDate());
    displayedMonth=new FocusedDate(value.getYear(),value.getMonth(),1);
  }
  if ((isTimeSelectorNeeded() && time == null) || oldDisplayedMonth == null || value == null || oldDisplayedMonth.getYear() != value.getYear() || oldDisplayedMonth.getMonth() != value.getMonth()) {
    renderCalendar();
  }
 else {
    focusDay(focusedDate);
    selectFocused();
    if (isTimeSelectorNeeded()) {
      time.updateTimes();
    }
  }
  if (!hasFocus) {
    focusDay(null);
  }
}
