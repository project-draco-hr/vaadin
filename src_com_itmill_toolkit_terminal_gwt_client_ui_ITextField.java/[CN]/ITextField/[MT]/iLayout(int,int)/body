{
  if (proportionalWidth >= 0) {
    int availPixels=availableWidth;
    if (availPixels < 0) {
      availPixels=(DOM.getElementPropertyInt(DOM.getParent(getElement()),"clientWidth"));
    }
    availPixels*=proportionalWidth;
    availPixels-=getExtraHorizontalPixels();
    if (availPixels >= 0) {
      super.setWidth(availPixels + "px");
    }
  }
  if (proportionalHeight >= 0) {
    int availPixels=availableHeight;
    if (availPixels < 0) {
      availPixels=(DOM.getElementPropertyInt(DOM.getParent(getElement()),"clientHeight"));
    }
    availPixels*=proportionalHeight;
    availPixels-=getExtraVerticalPixels();
    if (availPixels >= 0) {
      super.setHeight(availPixels + "px");
    }
  }
}
