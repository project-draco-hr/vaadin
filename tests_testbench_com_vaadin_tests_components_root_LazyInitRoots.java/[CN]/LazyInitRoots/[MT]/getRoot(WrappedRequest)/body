{
  if (request.getParameter("lazyCreate") != null) {
    BrowserDetails browserDetails=request.getBrowserDetails();
    if (browserDetails == null) {
      throw new RootRequiresMoreInformation();
    }
 else {
      Root root=new Root();
      root.getContent().addComponent(new Label("Lazy create root: " + browserDetails.getUriFragment()));
      return root;
    }
  }
 else   if (request.getParameter("lazyInit") != null) {
    return new LazyInitRoot();
  }
 else {
    VerticalLayout content=new VerticalLayout();
    Link lazyCreateLink=new Link("Open lazyCreate root",new ExternalResource(getURL() + "?lazyCreate#lazyCreate"));
    lazyCreateLink.setTargetName("_blank");
    content.addComponent(lazyCreateLink);
    Link lazyInitLink=new Link("Open lazyInit root",new ExternalResource(getURL() + "?lazyInit#lazyInit"));
    lazyInitLink.setTargetName("_blank");
    content.addComponent(lazyInitLink);
    return new Root(content);
  }
}
