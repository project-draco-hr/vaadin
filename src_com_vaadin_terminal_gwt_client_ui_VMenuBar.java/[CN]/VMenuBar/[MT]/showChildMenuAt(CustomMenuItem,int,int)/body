{
  final int shadowSpace=10;
  popup=new VOverlay(true,false,true);
  popup.setStyleName(CLASSNAME + "-popup");
  popup.setWidget(item.getSubMenu());
  popup.addCloseHandler(this);
  popup.addAutoHidePartner(item.getElement());
  popup.setPopupPosition(left,top);
  item.getSubMenu().onShow();
  visibleChildMenu=item.getSubMenu();
  item.getSubMenu().setParentMenu(this);
  popup.show();
  if (left + popup.getOffsetWidth() >= RootPanel.getBodyElement().getOffsetWidth() - shadowSpace) {
    if (subMenu) {
      left=item.getParentMenu().getAbsoluteLeft() - popup.getOffsetWidth() - shadowSpace;
    }
 else {
      left=RootPanel.getBodyElement().getOffsetWidth() - popup.getOffsetWidth() - shadowSpace;
    }
    if (left < shadowSpace) {
      left=shadowSpace;
    }
    popup.setPopupPosition(left,top);
  }
  if (BrowserInfo.get().isIE7()) {
    popup.getElement().getStyle().setProperty("zoom","");
    Scheduler.get().scheduleDeferred(new Command(){
      public void execute(){
        if (popup == null) {
          return;
        }
        if (popup.getElement().getStyle().getProperty("width") == null || popup.getElement().getStyle().getProperty("width") == "") {
          popup.setWidth(popup.getOffsetWidth() + "px");
        }
        popup.getElement().getStyle().setProperty("zoom","1");
      }
    }
);
  }
}
