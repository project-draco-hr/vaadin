{
  if ((subMenu || menuVisible) && !item.isSeparator()) {
    setSelected(item);
  }
  if (menuVisible && visibleChildMenu != item.getSubMenu() && popup != null) {
    popup.hide();
  }
  if (menuVisible && item.getSubMenu() != null && visibleChildMenu != item.getSubMenu()) {
    showChildMenu(item);
  }
}
