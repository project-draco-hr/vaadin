{
  final String[] urlParts=request.getRequestURI().toString().split("\\/");
  String context=null;
  String runner=null;
  URIS uris=new URIS();
  String applicationClassname=null;
  String contextPath=request.getContextPath();
  if (urlParts[1].equals(contextPath.replaceAll("\\/",""))) {
    context=urlParts[1];
    runner=urlParts[2];
    if (urlParts.length == 3) {
      throw new IllegalArgumentException("No application specified");
    }
    applicationClassname=urlParts[3];
    uris.widgetsetPath="/" + context;
    uris.applicationURI="/" + context + "/"+ runner+ "/"+ applicationClassname;
    uris.context=context;
    uris.runner=runner;
    uris.applicationClassname=applicationClassname;
  }
 else {
    context="";
    runner=urlParts[1];
    if (urlParts.length == 2) {
      throw new IllegalArgumentException("No application specified");
    }
    applicationClassname=urlParts[2];
    uris.widgetsetPath="/";
    uris.applicationURI="/" + runner + "/"+ applicationClassname;
    uris.context=context;
    uris.runner=runner;
    uris.applicationClassname=applicationClassname;
  }
  return uris;
}
