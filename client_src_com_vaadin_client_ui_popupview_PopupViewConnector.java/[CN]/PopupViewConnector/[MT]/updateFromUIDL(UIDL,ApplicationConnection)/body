{
  if (!isRealUpdate(uidl)) {
    return;
  }
  getWidget().client=client;
  getWidget().uidlId=uidl.getId();
  getWidget().hostPopupVisible=uidl.getBooleanVariable("popupVisibility");
  getWidget().setHTML(uidl.getStringAttribute("html"));
  if (uidl.hasAttribute("hideOnMouseOut")) {
    getWidget().popup.setHideOnMouseOut(uidl.getBooleanAttribute("hideOnMouseOut"));
  }
  if (getWidget().hostPopupVisible) {
    UIDL popupUIDL=uidl.getChildUIDL(0);
    getWidget().preparePopup(getWidget().popup);
    getWidget().popup.updateFromUIDL(popupUIDL,client);
    if (ComponentStateUtil.hasStyles(getState())) {
      final StringBuffer styleBuf=new StringBuffer();
      final String primaryName=getWidget().popup.getStylePrimaryName();
      styleBuf.append(primaryName);
      for (      String style : getState().styles) {
        styleBuf.append(" ");
        styleBuf.append(primaryName);
        styleBuf.append("-");
        styleBuf.append(style);
      }
      getWidget().popup.setStyleName(styleBuf.toString());
    }
 else {
      getWidget().popup.setStyleName(getWidget().popup.getStylePrimaryName());
    }
    getWidget().showPopup(getWidget().popup);
    centerAfterLayout=true;
  }
 else {
    getWidget().popup.hide();
  }
}
