{
  if (!getChildren().isEmpty()) {
    getWidget().preparePopup(getWidget().popup);
    getWidget().popup.setPopupConnector((ComponentConnector)getChildren().get(0));
    if (ComponentStateUtil.hasStyles(getState())) {
      final StringBuffer styleBuf=new StringBuffer();
      final String primaryName=getWidget().popup.getStylePrimaryName();
      styleBuf.append(primaryName);
      for (      String style : getState().styles) {
        styleBuf.append(" ");
        styleBuf.append(primaryName);
        styleBuf.append("-");
        styleBuf.append(style);
      }
      getWidget().popup.setStyleName(styleBuf.toString());
    }
 else {
      getWidget().popup.setStyleName(getWidget().popup.getStylePrimaryName());
    }
    getWidget().showPopup(getWidget().popup);
    centerAfterLayout=true;
  }
 else {
    getWidget().popup.hide();
  }
}
