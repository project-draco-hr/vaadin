{
  if (selectionModel == null) {
    throw new IllegalArgumentException("Selection model may not be null");
  }
  if (this.selectionModel != selectionModel) {
    if (this.selectionModel != null) {
      this.selectionModel.reset();
      this.selectionModel.setGrid(null);
    }
    this.selectionModel=selectionModel;
    this.selectionModel.setGrid(this);
    this.selectionModel.reset();
    if (selectionModel.getClass().equals(SingleSelectionModel.class)) {
      getState().selectionMode=SharedSelectionMode.SINGLE;
    }
 else     if (selectionModel.getClass().equals(MultiSelectionModel.class)) {
      getState().selectionMode=SharedSelectionMode.MULTI;
    }
 else     if (selectionModel.getClass().equals(NoSelectionModel.class)) {
      getState().selectionMode=SharedSelectionMode.NONE;
    }
 else {
      throw new UnsupportedOperationException("Grid currently " + "supports only its own bundled selection models");
    }
  }
}
