{
  DesiredCapabilities capabilities;
  RunLocally runLocally=getClass().getAnnotation(RunLocally.class);
  if (runLocally != null) {
    capabilities=runLocally.value().getDesiredCapabilities();
    setupLocalDriver(capabilities);
  }
 else {
    capabilities=getDesiredCapabilities();
    WebDriver dr=TestBench.createDriver(new RemoteWebDriver(new URL(getHubURL()),capabilities));
    setDriver(dr);
  }
  int w=SCREENSHOT_WIDTH;
  int h=SCREENSHOT_HEIGHT;
  if (BrowserUtil.isIE8(capabilities)) {
    w+=4;
    h+=4;
  }
  try {
    testBench().resizeViewPortTo(w,h);
  }
 catch (  UnsupportedOperationException e) {
  }
}
