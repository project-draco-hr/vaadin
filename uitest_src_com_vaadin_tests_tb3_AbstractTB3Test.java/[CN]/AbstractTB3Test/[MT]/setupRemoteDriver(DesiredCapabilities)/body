{
  if (BrowserUtil.isIE(capabilities)) {
    capabilities.setCapability(InternetExplorerDriver.REQUIRE_WINDOW_FOCUS,requireWindowFocusForIE());
    capabilities.setCapability(InternetExplorerDriver.ENABLE_PERSISTENT_HOVERING,usePersistentHoverForIE());
  }
  for (int i=1; i <= BROWSER_INIT_ATTEMPTS; i++) {
    try {
      WebDriver dr=TestBench.createDriver(new RemoteWebDriver(new URL(getHubURL()),capabilities));
      setDriver(dr);
      return;
    }
 catch (    Exception e) {
      System.err.println("Browser startup for " + capabilities + " failed on attempt "+ i+ ": "+ e.getMessage());
      if (i == BROWSER_INIT_ATTEMPTS) {
        throw e;
      }
    }
  }
}
