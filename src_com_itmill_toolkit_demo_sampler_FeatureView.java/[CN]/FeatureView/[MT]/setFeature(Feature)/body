{
  if (feature != currentFeature) {
    removeAllComponents();
    showSource(false);
    addComponent(controls,"feature-controls");
    addComponent(getExampleFor(feature),"feature-example");
    Label l=new Label(feature.getName());
    addComponent(l,"feature-name");
    l=new Label(feature.getDescription());
    l.setContentMode(Label.CONTENT_XHTML);
    addComponent(l,"feature-desc");
    sourceCode.setValue(feature.getSource());
    NamedExternalResource[] resources=feature.getRelatedResources();
    if (resources != null) {
      OrderedLayout res=new OrderedLayout();
      res.setCaption("Additional resources");
      for (      NamedExternalResource r : resources) {
        res.addComponent(new Link(r.getName(),r));
      }
      addComponent(res,"feature-res");
    }
    APIResource[] apis=feature.getRelatedAPI();
    if (apis != null) {
      OrderedLayout api=new OrderedLayout();
      api.setCaption("API documentation");
      addComponent(api,"feature-api");
      for (      APIResource r : apis) {
        api.addComponent(new Link(r.getName(),r));
      }
    }
    Class[] features=feature.getRelatedFeatures();
    if (features != null) {
      OrderedLayout rel=new OrderedLayout();
      rel.setCaption("Related Samples");
      for (      Class c : features) {
        final Feature f=SamplerApplication.getFeatureFor(c);
        if (f != null) {
          String path=SamplerApplication.getPathFor(f);
          ActiveLink al=new ActiveLink(f.getName(),new ExternalResource(getApplication().getURL() + "#" + path));
          al.addListener(new LinkActivatedListener(){
            public void linkActivated(            LinkActivatedEvent event){
              if (event.isLinkOpened()) {
                getWindow().showNotification(f.getName() + " opened if new window/tab");
              }
 else {
                SamplerWindow w=(SamplerWindow)getWindow();
                w.setFeature(f);
              }
            }
          }
);
          rel.addComponent(al);
        }
      }
      addComponent(rel,"feature-rel");
    }
  }
}
