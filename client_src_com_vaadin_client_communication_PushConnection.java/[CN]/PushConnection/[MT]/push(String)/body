{
switch (state) {
case CONNECT_PENDING:
    VConsole.log("Queuing push message: " + message);
  messageQueue.add(message);
break;
case CONNECTED:
VConsole.log("Sending push message: " + message);
doPush(socket,message);
break;
case NEW:
throw new IllegalStateException("Can not push before connecting");
case DISCONNECT_PENDING:
case DISCONNECTED:
throw new IllegalStateException("Can not push after disconnecting");
}
}
