{
  TreeNode n=((TreeNode)item);
  if (!selectable)   return;
  String key=n.key;
  if (key != null) {
    if (selectedIds.contains(key) && isNullSelectionAllowed) {
      selectedIds.remove(key);
      n.setISelected(false);
    }
 else {
      if (!isMultiselect) {
        try {
          TreeNode tn=(TreeNode)keyToNode.get(selectedIds.iterator().next());
          tn.setISelected(false);
          selectedIds.clear();
        }
 catch (        Exception e) {
        }
      }
      selectedIds.add(key);
      n.setISelected(true);
    }
    ITree.this.client.updateVariable(ITree.this.paintableId,"selected",selectedIds.toArray(),immediate);
  }
}
