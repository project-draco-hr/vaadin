{
  String resultPath=session.getPortletContext().getRealPath("/");
  if (resultPath != null) {
    return new File(resultPath);
  }
 else {
    try {
      final URL url=session.getPortletContext().getResource("/");
      return new File(url.getFile());
    }
 catch (    final Exception e) {
      getLogger().log(Level.INFO,"Cannot access base directory, possible security issue " + "with Application Server or Servlet Container",e);
    }
  }
  return null;
}
