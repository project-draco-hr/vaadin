{
  String requestPath=request.getRequestPathInfo();
  if (requestPath == null) {
    return false;
  }
  Matcher matcher=CONNECTOR_RESOURCE_PATTERN.matcher(requestPath);
  if (matcher.matches()) {
    String uiId=matcher.group(1);
    String cid=matcher.group(2);
    String key=matcher.group(3);
    UI ui=application.getUIById(Integer.parseInt(uiId));
    if (ui == null) {
      return error(request,response,"Ignoring connector request for no-existent root " + uiId);
    }
    UI.setCurrent(ui);
    VaadinSession.setCurrent(ui.getApplication());
    ClientConnector connector=ui.getConnectorTracker().getConnector(cid);
    if (connector == null) {
      return error(request,response,"Ignoring connector request for no-existent connector " + cid + " in root "+ uiId);
    }
    if (!connector.handleConnectorRequest(request,response,key)) {
      return error(request,response,connector.getClass().getSimpleName() + " (" + connector.getConnectorId()+ ") did not handle connector request for "+ key);
    }
    return true;
  }
 else {
    return false;
  }
}
