{
  setWidth("250px");
  application=app;
  resources.setImmediate(true);
  resources.setFilteringMode(ComboBox.FILTERINGMODE_CONTAINS);
  resources.setContainerDataSource(application.getDb().getResources(null));
  resources.setItemCaptionMode(ComboBox.ITEM_CAPTION_MODE_PROPERTY);
  resources.setItemCaptionPropertyId(SampleDB.Resource.PROPERTY_ID_NAME);
  resources.addListener(new ComboBox.ValueChangeListener(){
    public void valueChange(    ValueChangeEvent event){
      refreshReservations();
    }
  }
);
  addComponent(resources);
  initCalendarFieldPropertyIds(reservations);
  Calendar c=Calendar.getInstance();
  reservations.setValue(c.getTime());
  reservations.setEnabled(false);
  addComponent(reservations);
  reservations.setImmediate(true);
  add.setEnabled(false);
  addComponent(add);
  add.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      if (resources.getValue() != null) {
        Item i=resources.getItem(resources.getValue());
        editor.newReservationFor(i);
      }
    }
  }
);
  add.setDescription("Add new reservation for selected resource");
}
