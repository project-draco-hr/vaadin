{
  Tab tab=tb.getTab(tabIndex);
  if (client == null || disabled || waitingForResponse) {
    return false;
  }
  if (!tab.isEnabledOnServer() || tab.isHiddenOnServer()) {
    return false;
  }
  if (activeTabIndex != tabIndex) {
    tb.selectTab(tabIndex);
    if (focusedTab != null) {
      focusedTab=tab;
    }
    addStyleDependentName("loading");
    Scheduler.get().scheduleDeferred(new Command(){
      public void execute(){
        previousVisibleWidget=tp.getWidget(tp.getVisibleWidget());
        DOM.setStyleAttribute(DOM.getParent(previousVisibleWidget.getElement()),"visibility","hidden");
        client.updateVariable(id,"selected",tabKeys.get(tabIndex).toString(),true);
      }
    }
);
    waitingForResponse=true;
  }
  return true;
}
