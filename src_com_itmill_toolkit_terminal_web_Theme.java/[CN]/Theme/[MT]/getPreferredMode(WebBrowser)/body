{
  if (parentThemes != null && parentThemes.size() > 0 && supportedModes.keySet().isEmpty())   return ((Theme)parentThemes.get(0)).getPreferredMode(terminal);
  for (Iterator i=supportedModes.keySet().iterator(); i.hasNext(); ) {
    String mode=(String)i.next();
    if (supportsMode(mode,terminal))     return mode;
  }
  return MODE_FALLBACK;
}
