{
  final int type=DOM.eventGetType(event);
  if (type == Event.ONKEYDOWN && shortcutHandler != null) {
    final int modifiers=KeyboardListenerCollection.getKeyboardModifiers(event);
    shortcutHandler.handleKeyboardEvent((char)DOM.eventGetKeyCode(event),modifiers);
    return;
  }
  final Element target=DOM.eventGetTarget(event);
  if (dragging || DOM.isOrHasChild(header,target)) {
    onHeaderEvent(event);
    DOM.eventCancelBubble(event,true);
  }
 else   if (resizing || DOM.compare(resizeBox,target)) {
    onResizeEvent(event);
    DOM.eventCancelBubble(event,true);
  }
 else   if (DOM.compare(target,closeBox) && type == Event.ONCLICK) {
    onCloseClick();
    DOM.eventCancelBubble(event,true);
  }
 else {
    if (!isActive()) {
      bringToFront();
    }
  }
}
