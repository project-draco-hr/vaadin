{
  if (isOnUnloadRequest(request)) {
    return;
  }
  try {
    SystemMessages ci=getVaadinService().getSystemMessages();
    if (getRequestType(request) != RequestType.UIDL) {
      response.sendRedirect(ci.getSessionExpiredURL());
    }
 else {
      request.getSession().invalidate();
      criticalNotification(request,response,ci.getSessionExpiredCaption(),ci.getSessionExpiredMessage(),null,ci.getSessionExpiredURL());
    }
  }
 catch (  SystemMessageException ee) {
    throw new ServletException(ee);
  }
}
