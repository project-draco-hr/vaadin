{
  if (handleContextRootWithoutSlash(request,response)) {
    return;
  }
  CurrentInstance.clearAll();
  setCurrent(this);
  VaadinServletRequest vaadinRequest=createVaadinRequest(request);
  VaadinServletResponse vaadinResponse=createVaadinResponse(response);
  if (!ensureCookiesEnabled(vaadinRequest,vaadinResponse)) {
    return;
  }
  if (isStaticResourceRequest(request)) {
    serveStaticResources(request,response);
    return;
  }
  try {
    getService().handleRequest(vaadinRequest,vaadinResponse);
  }
 catch (  ServiceException e) {
    throw new ServletException(e);
  }
}
