{
  final Button b=event.getButton();
  if (b == deselect) {
    source.setValue(null);
  }
 else   if (b == saveSelected) {
    final Set selected=(Set)source.getValue();
    int s=0;
    for (final Iterator it=selected.iterator(); it.hasNext(); ) {
      final Object id=it.next();
      if (!saved.containsId(id)) {
        final Item item=source.getItem(id);
        final Item added=saved.addItem(id);
        Property p=added.getItemProperty(PROPERTY_SPECIES);
        p.setValue(item.getItemProperty(PROPERTY_SPECIES).getValue());
        p=added.getItemProperty(PROPERTY_TYPE);
        p.setValue(item.getItemProperty(PROPERTY_TYPE).getValue());
        p=added.getItemProperty(PROPERTY_KIND);
        p.setValue(item.getItemProperty(PROPERTY_KIND).getValue());
        p=added.getItemProperty(PROPERTY_HIRED);
        p.setValue(item.getItemProperty(PROPERTY_HIRED).getValue());
        s++;
      }
    }
    getWindow().showNotification("Saved " + s);
  }
 else   if (b == hireSelected) {
    int s=0;
    final Set selected=(Set)source.getValue();
    for (final Iterator it=selected.iterator(); it.hasNext(); ) {
      final Object id=it.next();
      Item item=source.getItem(id);
      final Property p=item.getItemProperty(PROPERTY_HIRED);
      if (p.getValue() == Boolean.FALSE) {
        p.setValue(Boolean.TRUE);
        s++;
      }
      if (saved.containsId(id)) {
        item=saved.getItem(id);
        item.getItemProperty(PROPERTY_HIRED).setValue(Boolean.TRUE);
      }
    }
    getWindow().showNotification("Hired " + s);
  }
 else {
    int s=0;
    final Set selected=(Set)source.getValue();
    for (final Iterator it=selected.iterator(); it.hasNext(); ) {
      final Object id=it.next();
      if (source.containsId(id)) {
        s++;
        source.removeItem(id);
      }
    }
    getWindow().showNotification("Deleted " + s);
  }
}
