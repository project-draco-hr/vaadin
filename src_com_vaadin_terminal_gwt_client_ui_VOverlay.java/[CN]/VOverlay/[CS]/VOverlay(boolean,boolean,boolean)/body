{
  super(autoHide,modal);
  if (showShadow) {
    shadow=DOM.createDiv();
    shadow.setClassName(CLASSNAME_SHADOW);
    shadow.setInnerHTML(SHADOW_HTML);
    DOM.setStyleAttribute(shadow,"position","absolute");
    addCloseHandler(new CloseHandler<PopupPanel>(){
      public void onClose(      CloseEvent<PopupPanel> event){
        if (shadow.getParentElement() != null) {
          shadow.getParentElement().removeChild(shadow);
        }
      }
    }
);
  }
  adjustZIndex();
}
