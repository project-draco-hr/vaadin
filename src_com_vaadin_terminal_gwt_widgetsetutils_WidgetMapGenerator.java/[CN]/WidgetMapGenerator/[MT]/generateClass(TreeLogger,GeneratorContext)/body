{
  PrintWriter printWriter=null;
  printWriter=context.tryCreate(logger,packageName,className);
  if (printWriter == null) {
    return;
  }
  logger.log(Type.INFO,"Detecting Vaadin components in classpath to generate WidgetMapImpl.java ...");
  Date date=new Date();
  ClassSourceFileComposerFactory composer=null;
  composer=new ClassSourceFileComposerFactory(packageName,className);
  composer.addImport("com.google.gwt.core.client.GWT");
  composer.addImport("java.util.HashMap");
  composer.addImport("com.google.gwt.core.client.RunAsyncCallback");
  composer.setSuperclass("com.vaadin.terminal.gwt.client.WidgetMap");
  SourceWriter sourceWriter=composer.createSourceWriter(context,printWriter);
  Collection<Class<? extends Paintable>> paintablesHavingWidgetAnnotation=getUsedPaintables();
  validatePaintables(logger,context,paintablesHavingWidgetAnnotation);
  generateImplementationDetector(sourceWriter,paintablesHavingWidgetAnnotation);
  generateInstantiatorMethod(sourceWriter,paintablesHavingWidgetAnnotation);
  sourceWriter.outdent();
  sourceWriter.println("}");
  context.commit(logger,printWriter);
  logger.log(Type.INFO,"Done. (" + (new Date().getTime() - date.getTime()) / 1000 + "seconds)");
}
