{
  mainWindow=new Window("Resize test");
  setMainWindow(mainWindow);
  subWindow=new Window("Sub window");
  subWindow.setHeight("50%");
  subWindow.setWidth("50%");
  subWindow.center();
  subWindow.addComponent(new Label(LoremIpsum.get(1000)));
  getMainWindow().addWindow(subWindow);
  lazyMode=new CheckBox("Lazy resize");
  lazyMode.setImmediate(true);
  lazyMode.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      setLazy((Boolean)lazyMode.getValue());
    }
  }
);
  resizeListenerCheckBox=new CheckBox("Resize listener");
  resizeListenerCheckBox.setImmediate(true);
  resizeListenerCheckBox.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      if ((Boolean)resizeListenerCheckBox.getValue()) {
        subWindow.addListener(resizeListener);
        mainWindow.addListener(resizeListener);
      }
 else {
        subWindow.removeListener(resizeListener);
        mainWindow.removeListener(resizeListener);
      }
    }
  }
);
  immediateCheckBox=new CheckBox("Windows immediate");
  immediateCheckBox.setImmediate(true);
  immediateCheckBox.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      mainWindow.setImmediate((Boolean)immediateCheckBox.getValue());
      subWindow.setImmediate((Boolean)immediateCheckBox.getValue());
    }
  }
);
  mainWindow.addComponent(lazyMode);
  mainWindow.addComponent(resizeListenerCheckBox);
  mainWindow.addComponent(immediateCheckBox);
  mainWindow.addComponent(log);
  mainWindow.addComponent(new Label("<br/><br/>",Label.CONTENT_XHTML));
  mainWindow.addComponent(new Label(LoremIpsum.get(10000)));
  setLazy(false);
}
