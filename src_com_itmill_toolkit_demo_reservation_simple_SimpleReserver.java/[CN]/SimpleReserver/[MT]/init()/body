{
  final Window w=new Window("Simple Reserver");
  w.addStyleName("simplereserver");
  if (getContext() instanceof PortletApplicationContext) {
    isPortlet=true;
    PortletApplicationContext context=(PortletApplicationContext)getContext();
    context.addPortletListener(this,new PortletListener(){
      public void handleActionRequest(      ActionRequest request,      ActionResponse response){
      }
      public void handleRenderRequest(      RenderRequest request,      RenderResponse response){
        if ((request.getPortletMode() == PortletMode.EDIT && !isAdminView) || (request.getPortletMode() == PortletMode.VIEW && isAdminView)) {
          toggleMode();
        }
      }
    }
);
    w.setTheme("liferay");
    w.getLayout().setMargin(false);
  }
 else {
    w.setTheme("reservr");
  }
  setMainWindow(w);
  if (!isPortlet) {
    w.addComponent(toggleMode);
    toggleMode.addListener(new ClickListener(){
      public void buttonClick(      ClickEvent event){
        toggleMode();
      }
    }
);
  }
  w.addComponent(stdView);
}
