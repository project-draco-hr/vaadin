{
  DOM.removeEventPreview(this);
  cancelDelay();
  final int msec=fadeMsec / (startOpacity / 5);
  fader=new Timer(){
    long timestamp=0;
    int opacity=startOpacity;
    @Override public void run(){
      double adjust=(timestamp == 0 ? 1 : (new Date().getTime() - timestamp) / msec);
      opacity-=adjust * 5d;
      setOpacity(getElement(),opacity);
      if (opacity <= 0) {
        cancel();
        hide();
        if (BrowserInfo.get().isOpera()) {
          DOM.setStyleAttribute(getElement(),"width","");
          DOM.setStyleAttribute(getElement(),"height","");
        }
      }
      timestamp=new Date().getTime();
    }
  }
;
  fader.scheduleRepeating(msec);
}
