{
  rendering=true;
  boolean measure=false;
  if (this.client == null) {
    this.client=client;
    measure=true;
  }
  if (client.updateComponent(this,uidl,false)) {
    rendering=false;
    return;
  }
  if (measure) {
    borderPaddingVertical=getOffsetHeight();
    int ow=getOffsetWidth();
    int dow=desc.getOffsetWidth();
    borderPaddingHorizontal=ow - dow;
  }
  boolean legendEmpty=true;
  if (uidl.hasAttribute("caption")) {
    DOM.setInnerText(caption,uidl.getStringAttribute("caption"));
    legendEmpty=false;
  }
 else {
    DOM.setInnerText(caption,"");
  }
  if (uidl.hasAttribute("icon")) {
    if (icon == null) {
      icon=new Icon(client);
      DOM.insertChild(legend,icon.getElement(),0);
    }
    icon.setUri(uidl.getStringAttribute("icon"));
    legendEmpty=false;
  }
 else {
    if (icon != null) {
      DOM.removeChild(legend,icon.getElement());
    }
  }
  if (legendEmpty) {
    DOM.setStyleAttribute(legend,"display","none");
  }
 else {
    DOM.setStyleAttribute(legend,"display","");
  }
  if (uidl.hasAttribute("error")) {
    final UIDL errorUidl=uidl.getErrors();
    errorMessage.updateFromUIDL(errorUidl);
    errorMessage.setVisible(true);
  }
 else {
    errorMessage.setVisible(false);
  }
  if (uidl.hasAttribute("description")) {
    DOM.setInnerHTML(desc,uidl.getStringAttribute("description"));
  }
 else {
    DOM.setInnerHTML(desc,"");
  }
  updateSize();
  client.runDescendentsLayout(this);
  final UIDL layoutUidl=uidl.getChildUIDL(0);
  Container newLo=(Container)client.getPaintable(layoutUidl);
  if (lo == null) {
    lo=newLo;
    add((Widget)lo,fieldContainer);
  }
 else   if (lo != newLo) {
    client.unregisterPaintable(lo);
    remove((Widget)lo);
    lo=newLo;
    add((Widget)lo,fieldContainer);
  }
  lo.updateFromUIDL(layoutUidl,client);
  if (uidl.getChildCount() > 1) {
    Container newFooter=(Container)client.getPaintable(uidl.getChildUIDL(1));
    if (footer == null) {
      add((Widget)newFooter,footerContainer);
      footer=newFooter;
    }
 else     if (newFooter != footer) {
      remove((Widget)footer);
      client.unregisterPaintable(footer);
      add((Widget)newFooter,footerContainer);
    }
    footer=newFooter;
    footer.updateFromUIDL(uidl.getChildUIDL(1),client);
  }
 else {
    if (footer != null) {
      remove((Widget)footer);
      client.unregisterPaintable(footer);
    }
  }
  rendering=false;
}
