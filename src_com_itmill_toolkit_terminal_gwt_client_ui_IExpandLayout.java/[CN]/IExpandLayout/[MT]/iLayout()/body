{
  if (orientationMode == ORIENTATION_HORIZONTAL) {
    int pixels;
    if ("".equals(height)) {
      int maxHeight=0;
      Iterator iterator=getPaintables().iterator();
      while (iterator.hasNext()) {
        Widget w=(Widget)iterator.next();
        int h=w.getOffsetHeight();
        if (h > maxHeight) {
          maxHeight=h;
        }
      }
      pixels=maxHeight;
    }
 else {
      pixels=getOffsetHeight() - getTopMargin() - getBottomMargin();
      if (pixels < 0) {
        pixels=0;
      }
    }
    DOM.setStyleAttribute(marginElement,"height",pixels + "px");
    DOM.setStyleAttribute(marginElement,"overflow","hidden");
  }
  if (expandedWidget == null) {
    return;
  }
  final int availableSpace=getAvailableSpace();
  final int usedSpace=getUsedSpace();
  int spaceForExpandedWidget=availableSpace - usedSpace;
  if (spaceForExpandedWidget < EXPANDED_ELEMENTS_MIN_WIDTH) {
    spaceForExpandedWidget=EXPANDED_ELEMENTS_MIN_WIDTH;
  }
  final WidgetWrapper wr=getWidgetWrapperFor(expandedWidget);
  wr.setExpandedSize(spaceForExpandedWidget);
  Util.runDescendentsLayout(this);
}
