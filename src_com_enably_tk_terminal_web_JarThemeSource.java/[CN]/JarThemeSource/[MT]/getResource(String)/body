{
  if (this.theme != null && this.theme.getName() != null && resourceId.startsWith(this.theme.getName() + "/")) {
    resourceId=resourceId.substring(this.theme.getName().length() + 1);
  }
  JarEntry entry=jar.getJarEntry(resourceId);
  if (entry != null)   try {
    byte[] data=(byte[])resourceCache.get(entry);
    if (data != null)     return new ByteArrayInputStream(data);
    int bufSize=1024;
    ByteArrayOutputStream out=new ByteArrayOutputStream(bufSize);
    InputStream in=jar.getInputStream(entry);
    byte[] buf=new byte[bufSize];
    int n=0;
    while ((n=in.read(buf)) >= 0) {
      out.write(buf,0,n);
    }
    in.close();
    data=out.toByteArray();
    resourceCache.put(entry,data);
    return new ByteArrayInputStream(data);
  }
 catch (  IOException e) {
  }
  throw new ThemeSource.ThemeException("Resource " + resourceId + " not found.");
}
