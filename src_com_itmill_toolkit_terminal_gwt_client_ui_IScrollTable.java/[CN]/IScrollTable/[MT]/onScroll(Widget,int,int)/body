{
  if (!initializedAndAttached) {
    return;
  }
  if (!enabled) {
    bodyContainer.setScrollPosition(firstRowInViewPort * tBody.getRowHeight());
    return;
  }
  rowRequestHandler.cancel();
  tHead.setHorizontalScrollPosition(scrollLeft);
  firstRowInViewPort=(int)Math.ceil(scrollTop / (double)tBody.getRowHeight());
  int postLimit=(int)(firstRowInViewPort + pageLength + pageLength * CACHE_REACT_RATE);
  if (postLimit > totalRows - 1) {
    postLimit=totalRows - 1;
  }
  int preLimit=(int)(firstRowInViewPort - pageLength * CACHE_REACT_RATE);
  if (preLimit < 0) {
    preLimit=0;
  }
  final int lastRendered=tBody.getLastRendered();
  final int firstRendered=tBody.getFirstRendered();
  if (postLimit <= lastRendered && preLimit >= firstRendered) {
    client.updateVariable(paintableId,"firstvisible",firstRowInViewPort,false);
    return;
  }
  if (firstRowInViewPort - pageLength * CACHE_RATE > lastRendered || firstRowInViewPort + pageLength + pageLength * CACHE_RATE < firstRendered) {
    rowRequestHandler.setReqFirstRow((int)(firstRowInViewPort - pageLength * CACHE_RATE));
    int last=firstRowInViewPort + (int)CACHE_RATE * pageLength + pageLength;
    if (last > totalRows) {
      last=totalRows - 1;
    }
    rowRequestHandler.setReqRows(last - rowRequestHandler.getReqFirstRow() + 1);
    rowRequestHandler.deferRowFetch();
    return;
  }
  if (preLimit < firstRendered) {
    rowRequestHandler.setReqFirstRow((int)(firstRowInViewPort - pageLength * CACHE_RATE));
    rowRequestHandler.setReqRows(firstRendered - rowRequestHandler.getReqFirstRow());
    rowRequestHandler.deferRowFetch();
    return;
  }
  if (postLimit > lastRendered) {
    rowRequestHandler.setReqFirstRow(lastRendered + 1);
    rowRequestHandler.setReqRows((int)((firstRowInViewPort + pageLength + pageLength * CACHE_RATE) - lastRendered));
    rowRequestHandler.deferRowFetch();
  }
}
