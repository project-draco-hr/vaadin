{
  @SuppressWarnings("unchecked") Set<String> values=(Set<String>)options.getValue();
  LegacyTextField[] tfs=new LegacyTextField[]{tf1,tf2};
  for (  LegacyTextField tf : tfs) {
    tf.setCaption(null);
    tf.setComponentError(null);
    tf.setRequired(false);
    tf.setIcon(null);
    for (    String value : values) {
      if (value.equals("Caption")) {
        tf.setCaption(caption);
      }
 else       if (value.equals("Icon")) {
        String timestamp=String.valueOf(new Date().getTime());
        tf.setIcon(new ThemeResource(icons.get(random.nextInt(icons.size())) + "?" + timestamp));
      }
 else       if (value.equals("Required")) {
        tf.setRequired(true);
      }
 else       if (value.equals("Error")) {
        tf.setComponentError(new UserError("Nooooo..."));
      }
    }
  }
}
