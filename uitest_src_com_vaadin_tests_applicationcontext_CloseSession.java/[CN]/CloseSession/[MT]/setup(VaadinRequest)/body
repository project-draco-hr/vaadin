{
  final int sessionHash=getSession().hashCode();
  final String sessionId=request.getWrappedSession().getId();
  log.log("Current session hashcode: " + sessionHash);
  log.log("Current WrappedSession id: " + sessionId);
  String oldHashValue=request.getParameter(OLD_HASH_PARAM);
  if (oldHashValue != null) {
    log.log("Old session hashcode: " + oldHashValue);
    log.log("Same hash as current? " + oldHashValue.equals(Integer.toString(sessionHash)));
  }
  String oldSessionId=request.getParameter(OLD_SESSION_ID_PARAM);
  if (oldSessionId != null) {
    log.log("Old WrappedSession id: " + oldSessionId);
    log.log("Same WrappedSession id? " + oldSessionId.equals(sessionId));
  }
  final String reopenUrl=getPage().getLocation().getPath() + "?" + OLD_HASH_PARAM+ "="+ sessionHash+ "&"+ OLD_SESSION_ID_PARAM+ "="+ sessionId;
  addComponent(log);
  addComponent(new Button("Close VaadinServiceSession and redirect to Google",new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      getPage().setLocation("/statictestfiles/static.html");
      getSession().close();
    }
  }
));
  addComponent(new Button("Close VaadinServiceSession and reopen page",new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      getPage().setLocation(reopenUrl);
      getSession().close();
    }
  }
));
  addComponent(new Button("Just close session",new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      getSession().close();
    }
  }
));
  addComponent(new Button("Invalidate HttpSession and reopen page",new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      getPage().setLocation(reopenUrl);
      VaadinService.getCurrentRequest().getWrappedSession().invalidate();
    }
  }
));
}
