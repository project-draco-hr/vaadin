{
  super.init();
  registerRpc(PageClientRpc.class,new PageClientRpc(){
    @Override public void setTitle(    String title){
      com.google.gwt.user.client.Window.setTitle(title);
    }
  }
);
  final int heartbeatInterval=getState().getHeartbeatInterval();
  new Timer(){
    @Override public void run(){
      sendHeartbeat();
      schedule(heartbeatInterval);
    }
  }
.schedule(heartbeatInterval);
  getWidget().addResizeHandler(new ResizeHandler(){
    @Override public void onResize(    ResizeEvent event){
      rpc.resize(event.getHeight(),event.getWidth(),Window.getClientWidth(),Window.getClientHeight());
      if (getState().isImmediate()) {
        getConnection().sendPendingVariableChanges();
      }
    }
  }
);
}
