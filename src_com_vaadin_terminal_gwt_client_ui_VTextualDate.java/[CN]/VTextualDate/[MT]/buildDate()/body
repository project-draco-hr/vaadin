{
  removeStyleName(PARSE_ERROR_CLASSNAME);
  String dateText;
  if (date != null) {
    String formatStr=getFormatString();
    if (formatStr.contains("MMM")) {
      String monthName=getDateTimeService().getMonth(date.getMonth());
      if (monthName != null) {
        monthName=Character.toUpperCase(monthName.charAt(0)) + monthName.substring(1);
        formatStr=formatStr.replaceAll("[M]{3,}","'" + monthName + "'");
      }
    }
    DateTimeFormat format=DateTimeFormat.getFormat(formatStr);
    dateText=format.format(date);
  }
 else {
    dateText="";
  }
  setText(dateText);
  text.setEnabled(enabled);
  text.setReadOnly(readonly);
  if (readonly) {
    text.addStyleName("v-readonly");
  }
 else {
    text.removeStyleName("v-readonly");
  }
}
