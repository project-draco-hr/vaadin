{
  final Form form=new Form();
  form.setCaption("Contact Information");
  form.setDescription("Please enter valid name and address. Fields marked with * are required.");
  form.setFieldFactory(new MyFieldFactory());
  ContactBean bean=new ContactBean();
  BeanItem item=new BeanItem(bean);
  form.setItemDataSource(item);
  Vector order=new Vector();
  order.add("name");
  order.add("address");
  order.add("postalCode");
  order.add("city");
  form.setVisibleItemProperties(order);
  form.getField("name").setRequired(true);
  form.getField("name").setRequiredError("Name is missing");
  form.getField("address").setRequired(true);
  form.getField("address").setRequiredError("Address is missing");
  form.setImmediate(true);
  form.setValidationVisible(false);
  form.setRequired(true);
  form.setWriteThrough(false);
  form.setReadThrough(false);
  ExpandLayout footer=new ExpandLayout(OrderedLayout.ORIENTATION_HORIZONTAL);
  Button commit=new Button("Commit");
  commit.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      form.setValidationVisible(true);
      form.commit();
    }
  }
);
  Button discard=new Button("Discard",form,"discard");
  footer.addComponent(commit);
  footer.setComponentAlignment(commit,ExpandLayout.ALIGNMENT_RIGHT,ExpandLayout.ALIGNMENT_TOP);
  footer.setHeight("25px");
  footer.addComponent(discard);
  form.setFooter(footer);
  OrderedLayout root=new OrderedLayout();
  root.setWidth(400,OrderedLayout.UNITS_PIXELS);
  root.addComponent(form);
  setCompositionRoot(root);
}
