{
  WrappedRequest request=context.getRequest();
  DeploymentConfiguration deploymentConfiguration=request.getDeploymentConfiguration();
  String staticFileLocation=deploymentConfiguration.getStaticFileLocation(request);
  Element applicationTag=context.getBootstrapResponse().getApplicationTag();
  applicationTag.appendElement("iframe").attr("tabIndex","-1").attr("id","__gwt_historyFrame").attr("style","position:absolute;width:0;height:0;border:0;overflow:hidden").attr("src","javascript:false");
  String bootstrapLocation=staticFileLocation + "/VAADIN/vaadinBootstrap.js";
  applicationTag.appendElement("script").attr("type","text/javascript").attr("src",bootstrapLocation);
  Element mainScriptTag=applicationTag.appendElement("script").attr("type","text/javascript");
  StringBuilder builder=new StringBuilder();
  builder.append("//<![CDATA[\n");
  builder.append("if (!window.vaadin) alert(" + JSONObject.quote("Failed to load the bootstrap javascript: " + bootstrapLocation) + ");\n");
  appendMainScriptTagContents(context,builder);
  builder.append("//]]>");
  mainScriptTag.appendChild(new DataNode(builder.toString(),mainScriptTag.baseUri()));
}
