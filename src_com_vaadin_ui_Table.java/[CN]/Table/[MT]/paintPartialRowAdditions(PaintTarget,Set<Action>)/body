{
  final boolean[] iscomponent=findCellsWithComponents();
  int firstIx=getFirstAddedItemIndex();
  int count=getAddedRowCount();
  target.startTag("prows");
  int maxRows=(int)(getPageLength() * getCacheRate());
  if (!shouldHideAddedRows() && count > maxRows) {
    count=maxRows + 1;
    target.addAttribute("delbelow",true);
  }
  target.addAttribute("firstprowix",firstIx);
  target.addAttribute("numprows",count);
  if (!shouldHideAddedRows()) {
    logger.finest("Paint rows for add. Index: " + firstIx + ", count: "+ count+ ". Max rows: "+ maxRows);
    Object[][] cells=getVisibleCellsInsertIntoCache(firstIx,count);
    for (int indexInRowbuffer=0; indexInRowbuffer < count; indexInRowbuffer++) {
      final Object itemId=cells[CELL_ITEMID][indexInRowbuffer];
      if (shouldHideNullSelectionItem()) {
        continue;
      }
      paintRow(target,cells,isEditable(),actionSet,iscomponent,indexInRowbuffer,itemId);
    }
  }
 else {
    logger.finest("Paint rows for remove. Index: " + firstIx + ", count: "+ count+ ". Max rows: "+ maxRows);
    removeRowsFromCacheAndFillBottom(firstIx,count);
    target.addAttribute("hide",true);
  }
  target.endTag("prows");
}
