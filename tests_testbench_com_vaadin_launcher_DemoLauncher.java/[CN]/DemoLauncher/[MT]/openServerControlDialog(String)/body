{
  final String title="Desktop Server";
  final JFrame frame=new JFrame(title);
  frame.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
  final JLabel link=new JLabel("<html>" + "<center>Desktop Server is running at: <br>" + "<a href=\"" + applicationUrl + "\">"+ applicationUrl+ "</a><br>Close this window to shutdown the server.</center>"+ "</html>");
  link.addMouseListener(new MouseAdapter(){
    @Override public void mouseClicked(    MouseEvent e){
      BrowserLauncher.openBrowser(applicationUrl);
    }
  }
);
  final JPanel contentPane=new JPanel(new FlowLayout());
  frame.setContentPane(contentPane);
  contentPane.add(link);
  final JLabel question=new JLabel("This will stop the server. Are you sure?");
  final JButton okButton=new JButton("OK");
  final JButton cancelButton=new JButton("Cancel");
  final ActionListener buttonListener=new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (e.getSource() == okButton) {
        System.exit(0);
      }
 else {
        Rectangle bounds=frame.getBounds();
        frame.setTitle(title);
        contentPane.removeAll();
        contentPane.add(link);
        contentPane.setBounds(bounds);
        frame.setBounds(bounds);
        frame.setVisible(true);
        frame.repaint();
      }
    }
  }
;
  okButton.addActionListener(buttonListener);
  cancelButton.addActionListener(buttonListener);
  frame.addWindowListener(new WindowAdapter(){
    @Override public void windowClosing(    WindowEvent e){
      final Rectangle bounds=frame.getBounds();
      frame.setTitle("Confirm close");
      contentPane.removeAll();
      contentPane.add(question);
      contentPane.add(okButton);
      contentPane.add(cancelButton);
      frame.setBounds(bounds);
      frame.setVisible(true);
      frame.repaint();
    }
  }
);
  final java.awt.Dimension screenSize=java.awt.Toolkit.getDefaultToolkit().getScreenSize();
  final int w=270;
  final int h=95;
  final int margin=20;
  frame.setBounds(new Rectangle(screenSize.width - w - margin,screenSize.height - h - margin * 2,w,h));
  frame.toFront();
  frame.setVisible(true);
}
