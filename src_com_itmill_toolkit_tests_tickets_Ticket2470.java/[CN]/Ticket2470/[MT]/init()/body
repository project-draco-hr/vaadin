{
  final Window main=new Window();
  setMainWindow(main);
  final Embedded embedded=new Embedded();
  embedded.setDescription("Click on the grid cells to switch them.");
  final MyImageSource imageSource=new MyImageSource();
  final StreamResource imageResource=new StreamResource(imageSource,"testimage.png",this);
  imageResource.setCacheTime(0);
  embedded.setSource(imageResource);
  main.addComponent(embedded);
  Button button=new Button("Click to Update");
  button.addListener(new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      embedded.requestRepaint();
    }
  }
);
  main.addComponent(button);
}
