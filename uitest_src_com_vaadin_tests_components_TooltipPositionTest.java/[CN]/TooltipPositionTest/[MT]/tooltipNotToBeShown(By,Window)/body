{
  return new ExpectedCondition<Boolean>(){
    @Override public Boolean apply(    WebDriver input){
      List<WebElement> elements=findElements(tooltipLocator);
      if (elements.isEmpty()) {
        return true;
      }
      WebElement tooltip=elements.get(0);
      try {
        if (!tooltip.isDisplayed()) {
          return true;
        }
        Point topLeft=tooltip.getLocation();
        Dimension tooltipSize=tooltip.getSize();
        Dimension windowSize=window.getSize();
        int xLeft=topLeft.getX();
        int yTop=topLeft.getY();
        int xRight=xLeft + tooltipSize.getWidth() - 1;
        int yBottom=yTop + tooltipSize.getHeight() - 1;
        boolean overlapHorizontally=!(xRight < 0 || xLeft >= windowSize.getWidth());
        boolean overlapVertically=!(yBottom < 0 || yTop >= windowSize.getHeight());
        return !(overlapHorizontally && overlapVertically);
      }
 catch (      StaleElementReferenceException e) {
        return true;
      }
    }
    @Override public String toString(){
      return "the tooltip not to be displayed inside the window";
    }
  }
;
}
