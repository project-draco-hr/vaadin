{
  String response=token;
  String tc=token.substring(0,1);
  if (DateLocale.TOKEN_DAY_OF_WEEK.equals(tc)) {
    if (token.length() > 3) {
      response=locale.getWEEKDAY_LONG()[date.getDay()];
    }
 else {
      response=locale.getWEEKDAY_SHORT()[date.getDay()];
    }
  }
 else   if (DateLocale.TOKEN_DAY_OF_MONTH.equals(tc)) {
    if (token.length() == 1) {
      response=Integer.toString(date.getDate());
    }
 else {
      response=twoCharDateField(date.getDate());
    }
  }
 else   if (DateLocale.TOKEN_MONTH.equals(tc)) {
switch (token.length()) {
case 1:
      response=Integer.toString(date.getMonth() + 1);
    break;
case 2:
  response=twoCharDateField(date.getMonth() + 1);
break;
case 3:
response=locale.MONTH_SHORT[date.getMonth()];
break;
default :
response=locale.MONTH_LONG[date.getMonth()];
break;
}
}
 else if (DateLocale.TOKEN_YEAR.equals(tc)) {
if (token.length() >= 2) {
response=Integer.toString(date.getYear() + 1900);
}
 else {
response=twoCharDateField(date.getYear());
}
}
 else if (DateLocale.TOKEN_HOUR_12.equals(tc)) {
int h=date.getHours();
if (h == 0) {
h=12;
}
 else if (h > 12) {
h-=12;
}
response=twoCharDateField(h);
}
 else if (DateLocale.TOKEN_HOUR_24.equals(tc)) {
response=twoCharDateField(date.getHours());
}
 else if (DateLocale.TOKEN_MINUTE.equals(tc)) {
response=twoCharDateField(date.getMinutes());
}
 else if (DateLocale.TOKEN_SECOND.equals(tc)) {
response=twoCharDateField(date.getSeconds());
}
 else if (DateLocale.TOKEN_AM_PM.equals(tc)) {
int hour=date.getHours();
if (hour > 11) {
response=DateLocale.getPM();
}
 else {
response=DateLocale.getAM();
}
}
return response;
}
