{
  Collection<VPaintableWidget> children=MeasureManager.getChildren(this,client);
  int maxSize=0;
  for (  VPaintableWidget child : children) {
    Widget widget=child.getWidgetForPaintable();
    int captionAllocation;
    if (!isVertical) {
      captionAllocation=getCaptionHeight(child);
      getWrapper(widget).getStyle().setPaddingTop(captionAllocation,Unit.PX);
    }
 else {
      captionAllocation=0;
    }
    if (!isRelativeInDirection(widget,!isVertical)) {
      int childSize=getMeasuredInDirection(child,!isVertical) + captionAllocation;
      maxSize=Math.max(maxSize,childSize);
    }
  }
  int startMargin=getStartMarginInDirection(!isVertical);
  int totalMargins=startMargin + getEndMarginInDirection(!isVertical);
  double availableSpace;
  Style ownStyle=getElement().getStyle();
  if (isUndefinedInDirection(this,!isVertical)) {
    ownStyle.setProperty(getMinPropertyName(!isVertical),maxSize + totalMargins,Unit.PX);
    availableSpace=maxSize;
  }
 else {
    ownStyle.clearProperty(getMinPropertyName(!isVertical));
    availableSpace=getMeasuredInDirection(this,!isVertical) - totalMargins;
  }
  for (  VPaintableWidget child : children) {
    Widget widget=child.getWidgetForPaintable();
    Element wrapper=getWrapper(widget);
    Style wrapperStyle=wrapper.getStyle();
    boolean relative=isRelativeInDirection(widget,!isVertical);
    int captionHeight=getCaptionHeight(child);
    double allocatedSize=getMeasuredInDirection(child,!isVertical);
    if (!isVertical) {
      allocatedSize+=captionHeight;
    }
 else     if (!relative) {
      allocatedSize=Math.max(allocatedSize,getCaptionWidth(child));
    }
    int alignment=getAlignmentInDirection(getAlignment(child),!isVertical);
    double startPosition=startMargin;
    if (alignment == 0) {
      startPosition+=(availableSpace - allocatedSize) / 2;
    }
 else     if (alignment == 1) {
      startPosition+=(availableSpace - allocatedSize);
    }
    wrapperStyle.setProperty(getStartProperty(!isVertical),startPosition,Unit.PX);
    if (relative) {
      double captionReservation=!isVertical ? captionHeight : 0;
      wrapperStyle.setProperty(getSizeProperty(!isVertical),availableSpace - captionReservation,Unit.PX);
    }
 else {
      wrapperStyle.clearProperty(getSizeProperty(!isVertical));
    }
  }
}
