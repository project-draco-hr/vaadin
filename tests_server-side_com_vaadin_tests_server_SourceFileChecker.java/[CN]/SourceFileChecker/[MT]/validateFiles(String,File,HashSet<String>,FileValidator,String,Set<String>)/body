{
  Assert.assertTrue("Directory " + directory + " does not exist",directory.exists());
  File[] files=directory.listFiles();
  if (files == null) {
    throw new RuntimeException("Listing of directory " + directory.getPath() + " failed");
  }
  for (  File f : files) {
    boolean ignoreThis=false;
    for (    String ignore : ignores) {
      if (new File(baseDirectory,ignore).equals(f)) {
        ignoreThis=true;
        continue;
      }
    }
    if (ignoreThis) {
      continue;
    }
    if (f.isDirectory()) {
      validateFiles(baseDirectory,f,missing,validator,suffix,ignores);
    }
 else     if (f.getName().endsWith(suffix)) {
      try {
        validator.validateFile(f);
      }
 catch (      Throwable t) {
        missing.add(f.getPath());
      }
    }
  }
}
