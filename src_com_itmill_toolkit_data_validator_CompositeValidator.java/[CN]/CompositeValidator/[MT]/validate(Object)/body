{
switch (mode) {
case MODE_AND:
    for (final Iterator i=validators.iterator(); i.hasNext(); ) {
      ((Validator)i.next()).validate(value);
    }
  return;
case MODE_OR:
Validator.InvalidValueException first=null;
for (final Iterator i=validators.iterator(); i.hasNext(); ) {
try {
  ((Validator)i.next()).validate(value);
  return;
}
 catch (final Validator.InvalidValueException e) {
  if (first == null) {
    first=e;
  }
}
}
if (first == null) {
return;
}
final String em=getErrorMessage();
if (em != null) {
throw new Validator.InvalidValueException(em);
}
 else {
throw first;
}
}
throw new IllegalStateException("The validator is in unsupported operation mode");
}
