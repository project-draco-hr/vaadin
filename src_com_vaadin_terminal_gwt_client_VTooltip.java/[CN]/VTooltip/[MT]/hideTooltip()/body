{
  if (opening) {
    showTimer.cancel();
    opening=false;
  }
  if (!isAttached()) {
    return;
  }
  if (closing) {
    return;
  }
  closeTimer.schedule(CLOSE_TIMEOUT);
  closing=true;
  justClosed=true;
  justClosedTimer.schedule(QUICK_OPEN_TIMEOUT);
}
