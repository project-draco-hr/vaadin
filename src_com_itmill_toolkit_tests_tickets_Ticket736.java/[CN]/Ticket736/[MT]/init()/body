{
  final Window mainWin=new Window("Test app for #736");
  setMainWindow(mainWin);
  final Form f=new Form();
  f.setItemDataSource(new BeanItem(address,new String[]{"name","street","zip","city","state","country"}));
  f.setCaption("Office address");
  mainWin.addComponent(f);
  f.setWriteThrough(false);
  f.setReadThrough(false);
  Button commit=new Button("Commit",f,"commit");
  Button discard=new Button("Discard",f,"discard");
  OrderedLayout ol=new OrderedLayout(OrderedLayout.ORIENTATION_HORIZONTAL);
  ol.addComponent(commit);
  ol.addComponent(discard);
  mainWin.addComponent(ol);
  f.getField("zip").addValidator(new IsInteger());
  f.getField("state").addValidator(new IsValidState());
  f.getField("name").addValidator(new IsNotEmpty());
  f.getField("street").addValidator(new IsNotEmpty());
  f.getField("city").addValidator(new IsNotEmpty());
  final Panel formProperties=new Panel("Form properties");
  formProperties.setWidth(200);
  final String[] visibleProps={"required","invalidAllowed","readOnly","readThrough","writeThrough","invalidCommitted","validationVisible","immediate"};
  for (int i=0; i < visibleProps.length; i++) {
    Button b=new Button(visibleProps[i],new MethodProperty(f,visibleProps[i]));
    b.setImmediate(true);
    formProperties.addComponent(b);
  }
  mainWin.addComponent(formProperties);
  mainWin.addComponent(new Button("Show state of the address object",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      mainWin.showNotification(address.toString());
    }
  }
));
  final AddressValidator av=new AddressValidator();
  mainWin.addComponent(new Button("Add addressvalidator",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      f.addValidator(av);
    }
  }
));
  mainWin.addComponent(new Button("Remove addressvalidator",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      f.removeValidator(av);
    }
  }
));
}
