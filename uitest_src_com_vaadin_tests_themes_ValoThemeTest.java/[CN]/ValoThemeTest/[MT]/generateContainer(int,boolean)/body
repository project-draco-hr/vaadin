{
  IndexedContainer container=hierarchical ? new HierarchicalContainer() : new IndexedContainer();
  container.addContainerProperty(CAPTION_PROPERTY,String.class,null);
  container.addContainerProperty(ICON_PROPERTY,Resource.class,null);
  container.addContainerProperty(INDEX_PROPERTY,Integer.class,null);
  container.addContainerProperty(DESCRIPTION_PROPERTY,String.class,null);
  for (int i=1; i < size + 1; i++) {
    Item item=container.addItem(i);
    item.getItemProperty(CAPTION_PROPERTY).setValue(nextString(true));
    item.getItemProperty(INDEX_PROPERTY).setValue(i);
    item.getItemProperty(DESCRIPTION_PROPERTY).setValue(nextString(false));
    item.getItemProperty(ICON_PROPERTY).setValue(icon(false));
  }
  container.getItem(container.getIdByIndex(0)).getItemProperty(ICON_PROPERTY).setValue(icon(false));
  if (hierarchical) {
    for (int i=1; i < size + 1; i++) {
      for (int j=1; j < 5; j++) {
        String id=i + " -> " + j;
        Item child=container.addItem(id);
        child.getItemProperty(CAPTION_PROPERTY).setValue(getCaption());
        ((Hierarchical)container).setChildrenAllowed(id,true);
        ((Hierarchical)container).setParent(id,i);
      }
    }
  }
  return container;
}
