{
  if (!isAttached()) {
    return;
  }
  String zIndex=null;
  try {
    zIndex=DOM.getStyleAttribute(getElement(),"zIndex");
  }
 catch (  Exception ignore) {
    zIndex="1000";
  }
  if (zIndex == null) {
    zIndex="" + Z_INDEX;
  }
  if (BrowserInfo.get().isIE()) {
    getOffsetHeight();
    getOffsetWidth();
  }
  if (isShadowEnabled() || needsShimElement()) {
    PositionAndSize positionAndSize=new PositionAndSize(getActualLeft(),getActualTop(),getOffsetWidth(),getOffsetHeight());
    positionAndSize.setAnimationFromCenterProgress(progress);
    Element container=getElement().getParentElement().cast();
    if (isShadowEnabled()) {
      updateShadowPosition(progress,zIndex,positionAndSize);
      if (shadow.getParentElement() == null) {
        container.insertBefore(shadow,getElement());
        sinkShadowEvents();
      }
    }
    if (needsShimElement()) {
      updateShimPosition(positionAndSize);
      if (shimElement.getParentElement() == null) {
        container.insertBefore(shimElement,getElement());
      }
    }
  }
}
