{
  IMocksControl control=EasyMock.createControl();
  FragmentManager manager=control.createMock(FragmentManager.class);
  ViewDisplay display=control.createMock(ViewDisplay.class);
  ViewProvider provider=control.createMock(ViewProvider.class);
  View view1=control.createMock(View.class);
  View view2=control.createMock(View.class);
  ViewChangeListener listener1=control.createMock(ViewChangeListener.class);
  ViewChangeListener listener2=control.createMock(ViewChangeListener.class);
  EasyMock.expect(provider.getViewName("test1")).andReturn("test1");
  EasyMock.expect(provider.getView("test1")).andReturn(view1);
  view1.init();
  EasyMock.expect(manager.getFragment()).andReturn("");
  EasyMock.expect(listener1.isViewChangeAllowed(null,view1,"test1",null,new Object[0])).andReturn(false);
  EasyMock.expect(provider.getViewName("test1/test")).andReturn("test1");
  EasyMock.expect(provider.getView("test1")).andReturn(view1);
  view1.init();
  EasyMock.expect(manager.getFragment()).andReturn("");
  EasyMock.expect(listener1.isViewChangeAllowed(null,view1,"test1","test",new Object[0])).andReturn(true);
  EasyMock.expect(listener2.isViewChangeAllowed(null,view1,"test1","test",new Object[0])).andReturn(false);
  EasyMock.expect(provider.getViewName("test1/bar")).andReturn("test1");
  EasyMock.expect(provider.getView("test1")).andReturn(view1);
  view1.init();
  EasyMock.expect(manager.getFragment()).andReturn("");
  EasyMock.expect(listener1.isViewChangeAllowed(null,view1,"test1","bar",new Object[0])).andReturn(true);
  EasyMock.expect(listener2.isViewChangeAllowed(null,view1,"test1","bar",new Object[0])).andReturn(true);
  view1.navigateTo("bar");
  display.showView(view1);
  manager.setFragment("test1/bar");
  listener1.navigatorViewChanged(null,view1);
  listener2.navigatorViewChanged(null,view1);
  EasyMock.expect(provider.getViewName("test2")).andReturn("test2");
  EasyMock.expect(provider.getView("test2")).andReturn(view2);
  view2.init();
  EasyMock.expect(manager.getFragment()).andReturn("view1");
  EasyMock.expect(listener1.isViewChangeAllowed(view1,view2,"test2",null,new Object[0])).andReturn(true);
  EasyMock.expect(listener2.isViewChangeAllowed(view1,view2,"test2",null,new Object[0])).andReturn(true);
  view2.navigateTo(null);
  display.showView(view2);
  manager.setFragment("test2");
  listener1.navigatorViewChanged(view1,view2);
  listener2.navigatorViewChanged(view1,view2);
  control.replay();
  Navigator navigator=new Navigator(manager,display);
  navigator.registerProvider(provider);
  navigator.addListener(listener1);
  navigator.addListener(listener2);
  navigator.navigateTo("test1");
  navigator.navigateTo("test1/test");
  navigator.navigateTo("test1/bar");
  navigator.navigateTo("test2");
}
