{
  ComboBoxElement comboBox=$(ComboBoxElement.class).all().get(1);
  assertEquals("correct input prompt not found","Please select",comboBox.findElement(By.tagName("input")).getAttribute("value"));
  comboBox.findElement(By.tagName("input")).click();
  assertEquals("correct input prompt not found","",comboBox.findElement(By.tagName("input")).getAttribute("value"));
  assertFalse("suggestions not found even if there should be several",comboBox.getPopupSuggestions().isEmpty());
  WebElement popup=driver.findElement(By.className("v-filterselect-suggestpopup"));
  List<WebElement> filteredItems=popup.findElement(By.className("v-filterselect-suggestmenu")).findElements(By.className("gwt-MenuItem"));
  assertEquals("unexpected amount of suggestions found",4,filteredItems.size());
  assertEquals("wrong filtering result"," ",filteredItems.get(0).getText());
  assertEquals("wrong filtering result","Value 1",filteredItems.get(1).getText());
  assertEquals("wrong filtering result","Value 3",filteredItems.get(3).getText());
  filteredItems.get(3).click();
  assertFalse("popup found when there should be none",comboBox.isElementPresent(By.vaadin("#popup")));
  assertEquals("correct selection not found","Value 3",comboBox.findElement(By.tagName("input")).getAttribute("value"));
}
