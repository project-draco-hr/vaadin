{
  int colCount=state.columns.size();
  assertEquals(colCount,state.columnOrder.size());
  for (  Object propertyId : grid.getContainerDatasource().getContainerPropertyIds()) {
    GridColumn column=grid.getColumn(propertyId);
    column.setHeaderCaption("Old " + column.getHeaderCaption());
  }
  grid.setContainerDataSource(new GeneratedPropertyContainer(grid.getContainerDatasource()));
  assertEquals(colCount,state.columns.size());
  assertEquals(colCount,state.columnOrder.size());
  int i=0;
  for (  Object propertyId : grid.getContainerDatasource().getContainerPropertyIds()) {
    GridColumn column=grid.getColumn(propertyId);
    assertNotNull(column);
    assertEquals(propertyId.toString(),grid.getHeader().getDefaultRow().getCell(propertyId).getText());
  }
}
