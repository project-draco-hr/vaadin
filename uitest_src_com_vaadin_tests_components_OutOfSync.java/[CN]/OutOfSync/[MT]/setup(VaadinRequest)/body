{
  Button b=new Button("Click me after 1s to be out of sync");
  b.addClickListener(new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      Notification.show("This code will never be reached");
    }
  }
);
  setContent(b);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        Thread.sleep(500);
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
      getSession().lock();
      try {
        setContent(null);
        getConnectorTracker().markClean(OutOfSync.this);
      }
  finally {
        getSession().unlock();
      }
    }
  }
);
  t.start();
}
