{
  String rootClassName=getRootClassName(request);
  try {
    ClassLoader classLoader=getClassLoader();
    if (classLoader == null) {
      classLoader=getClass().getClassLoader();
    }
    Class<? extends Root> rootClass=Class.forName(rootClassName,true,classLoader).asSubclass(Root.class);
    try {
      Root root=rootClass.newInstance();
      return root;
    }
 catch (    Exception e) {
      throw new RuntimeException("Could not instantiate root class " + rootClassName,e);
    }
  }
 catch (  ClassNotFoundException e) {
    throw new RuntimeException("Could not load root class " + rootClassName,e);
  }
}
