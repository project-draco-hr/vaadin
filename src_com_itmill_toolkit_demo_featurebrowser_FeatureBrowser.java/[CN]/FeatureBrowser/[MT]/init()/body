{
  Window main=new Window("IT Mill Toolkit 5");
  setMainWindow(main);
  SplitPanel split=new SplitPanel(SplitPanel.ORIENTATION_HORIZONTAL);
  split.setSplitPosition(200,Sizeable.UNITS_PIXELS);
  main.setLayout(split);
  HashMap sectionIds=new HashMap();
  HierarchicalContainer container=createContainer();
  Object rootId=container.addItem();
  Item item=container.getItem(rootId);
  Property p=item.getItemProperty(PROPERTY_ID_NAME);
  p.setValue("All examples");
  for (int i=0; i < demos.length; i++) {
    Object[] demo=demos[i];
    String section=(String)demo[0];
    Object sectionId;
    if (sectionIds.containsKey(section)) {
      sectionId=sectionIds.get(section);
    }
 else {
      sectionId=container.addItem();
      sectionIds.put(section,sectionId);
      container.setParent(sectionId,rootId);
      item=container.getItem(sectionId);
      p=item.getItemProperty(PROPERTY_ID_NAME);
      p.setValue(section);
    }
    Object id=container.addItem();
    container.setParent(id,sectionId);
    initItem(container.getItem(id),demo);
  }
  tree=new Tree();
  tree.setSelectable(true);
  tree.setMultiSelect(false);
  tree.setNullSelectionAllowed(false);
  tree.setContainerDataSource(container);
  tree.setItemCaptionMode(Tree.ITEM_CAPTION_MODE_PROPERTY);
  tree.setItemCaptionPropertyId(PROPERTY_ID_NAME);
  tree.addListener(this);
  tree.setImmediate(true);
  tree.expandItemsRecursively(rootId);
  split.addComponent(tree);
  SplitPanel split2=new SplitPanel();
  split2.setSplitPosition(200,Sizeable.UNITS_PIXELS);
  split.addComponent(split2);
  table=new Table();
  table.setSizeFull();
  table.setColumnReorderingAllowed(true);
  table.setColumnCollapsingAllowed(true);
  table.setSelectable(true);
  table.setMultiSelect(false);
  table.setNullSelectionAllowed(false);
  try {
    table.setContainerDataSource((IndexedContainer)container.clone());
  }
 catch (  Exception e) {
    e.printStackTrace(System.err);
  }
  table.addListener(this);
  table.setImmediate(true);
  split2.addComponent(table);
  ExpandLayout exp=new ExpandLayout();
  exp.setMargin(true);
  split2.addComponent(exp);
  OrderedLayout wbLayout=new OrderedLayout(OrderedLayout.ORIENTATION_HORIZONTAL);
  wbLayout.addComponent(new Button("Open in popup window",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      Component component=(Component)ts.getComponentIterator().next();
      String caption=ts.getTabCaption(component);
      try {
        component=(Component)component.getClass().newInstance();
      }
 catch (      Exception e) {
        return;
      }
      Window w=new Window(caption);
      if (Layout.class.isAssignableFrom(component.getClass())) {
        w.setLayout((Layout)component);
      }
 else {
        w.getLayout().setSizeFull();
        w.addComponent(component);
      }
      getMainWindow().addWindow(w);
    }
  }
));
  wbLayout.addComponent(new Button("Open in native window",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      Component component=(Component)ts.getComponentIterator().next();
      String caption=ts.getTabCaption(component);
      Window w=getWindow(caption);
      if (w == null) {
        try {
          component=(Component)component.getClass().newInstance();
        }
 catch (        Exception e) {
          return;
        }
        w=new Window(caption);
        w.setName(caption);
        if (Layout.class.isAssignableFrom(component.getClass())) {
          w.setLayout((Layout)component);
        }
 else {
          w.getLayout().setSizeFull();
          w.addComponent(component);
        }
        addWindow(w);
      }
      getMainWindow().open(new ExternalResource(w.getURL()),caption);
    }
  }
));
  exp.addComponent(wbLayout);
  exp.setComponentAlignment(wbLayout,exp.ALIGNMENT_RIGHT,exp.ALIGNMENT_TOP);
  ts=new TabSheet();
  ts.setSizeFull();
  ts.addTab(new Label("Choose demo (Only Notification and CliensSideCaching yet"),"Demo",null);
  exp.addComponent(ts);
  exp.expand(ts);
  Label status=new Label("Copyright IT Mill 2007");
  exp.addComponent(status);
  exp.setComponentAlignment(status,exp.ALIGNMENT_RIGHT,exp.ALIGNMENT_VERTICAL_CENTER);
  tree.setValue(rootId);
}
