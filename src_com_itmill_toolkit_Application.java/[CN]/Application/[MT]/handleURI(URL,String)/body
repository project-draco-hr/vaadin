{
  if (relativeUri == null) {
    return null;
  }
  String prefix=relativeUri;
  final int index=relativeUri.indexOf('/');
  if (index >= 0) {
    prefix=relativeUri.substring(0,index);
  }
  if (prefix.equals("APP")) {
    final int next=relativeUri.indexOf('/',index + 1);
    if (next < 0) {
      return null;
    }
    final String key=relativeUri.substring(index + 1,next);
    final ApplicationResource resource=(ApplicationResource)keyResourceMap.get(key);
    if (resource != null) {
      DownloadStream stream=resource.getStream();
      if (stream != null) {
        stream.setCacheTime(resource.getCacheTime());
        return stream;
      }
    }
    return null;
  }
  Window window=getWindow(prefix);
  if (window != null) {
    URL windowContext;
    try {
      windowContext=new URL(context,prefix + "/");
      final String windowUri=relativeUri.length() > prefix.length() + 1 ? relativeUri.substring(prefix.length() + 1) : "";
      return window.handleURI(windowContext,windowUri);
    }
 catch (    final MalformedURLException e) {
      return null;
    }
  }
  window=getMainWindow();
  if (window != null) {
    return window.handleURI(context,relativeUri);
  }
  return null;
}
