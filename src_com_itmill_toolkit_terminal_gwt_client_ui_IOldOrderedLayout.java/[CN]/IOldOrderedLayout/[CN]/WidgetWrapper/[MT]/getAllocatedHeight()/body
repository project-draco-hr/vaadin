{
  int reduce=verticalPadding;
  if (caption != null) {
    if (orientationMode == ORIENTATION_VERTICAL || (orientationMode == ORIENTATION_HORIZONTAL && !caption.shouldBePlacedAfterComponent())) {
      reduce+=caption.getHeight();
    }
  }
  if (lastForcedPixelHeight == -1) {
    if (height == null) {
      return getElementWrappingClipperDiv().getOffsetHeight() - reduce;
    }
    return 0;
  }
 else {
    return lastForcedPixelHeight;
  }
}
