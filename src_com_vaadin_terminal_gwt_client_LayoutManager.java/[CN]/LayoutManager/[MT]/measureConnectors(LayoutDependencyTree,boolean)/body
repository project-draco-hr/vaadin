{
  int measureCount=0;
  if (measureAll) {
    ComponentConnector[] connectors=ConnectorMap.get(connection).getComponentConnectors();
    for (    ComponentConnector connector : connectors) {
      measueConnector(layoutDependencyTree,connector);
    }
    for (    ComponentConnector connector : connectors) {
      layoutDependencyTree.setNeedsMeasure(connector,false);
    }
    measureCount+=connectors.length;
  }
  while (layoutDependencyTree.hasConnectorsToMeasure()) {
    Collection<ComponentConnector> measureTargets=layoutDependencyTree.getMeasureTargets();
    for (    ComponentConnector connector : measureTargets) {
      measueConnector(layoutDependencyTree,connector);
    }
    for (    ComponentConnector connector : measureTargets) {
      layoutDependencyTree.setNeedsMeasure(connector,false);
    }
    measureCount++;
  }
  return measureCount;
}
