{
  timer.cancel();
  final RequestBuilder rb=new RequestBuilder(RequestBuilder.POST,uri);
  final RequestCallback callback=new RequestCallback(){
    @Override public void onResponseReceived(    Request request,    Response response){
      int status=response.getStatusCode();
      boolean reschedule=true;
      if (status == Response.SC_OK) {
        connection.getCommunicationProblemHandler().heartbeatOk();
      }
 else {
        reschedule=connection.getCommunicationProblemHandler().heartbeatInvalidStatusCode(request,response);
      }
      if (reschedule) {
        schedule();
      }
    }
    @Override public void onError(    Request request,    Throwable exception){
      boolean reschedule=connection.getCommunicationProblemHandler().heartbeatException(request,exception);
      if (reschedule) {
        schedule();
      }
    }
  }
;
  rb.setCallback(callback);
  try {
    getLogger().fine("Sending heartbeat request...");
    rb.send();
  }
 catch (  RequestException re) {
    callback.onError(null,re);
  }
}
