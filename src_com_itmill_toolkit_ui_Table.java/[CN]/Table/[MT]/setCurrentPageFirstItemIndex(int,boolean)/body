{
  if (newIndex < 0) {
    newIndex=0;
  }
  final int size=size();
  int maxIndex=size - pageLength;
  if (maxIndex < 0) {
    maxIndex=0;
  }
  if (newIndex > maxIndex) {
    newIndex=maxIndex;
  }
  if (items instanceof Container.Indexed) {
    try {
      currentPageFirstItemId=((Container.Indexed)items).getIdByIndex(newIndex);
    }
 catch (    final IndexOutOfBoundsException e) {
      currentPageFirstItemId=null;
    }
    currentPageFirstItemIndex=newIndex;
  }
 else {
    currentPageFirstItemId=((Container.Ordered)items).firstItemId();
    while (currentPageFirstItemIndex < newIndex && !((Container.Ordered)items).isLastId(currentPageFirstItemId)) {
      currentPageFirstItemIndex++;
      currentPageFirstItemId=((Container.Ordered)items).nextItemId(currentPageFirstItemId);
    }
    if (((Container.Ordered)items).isLastId(currentPageFirstItemId)) {
      currentPageFirstItemIndex=size - 1;
    }
    while (currentPageFirstItemIndex > newIndex && !((Container.Ordered)items).isFirstId(currentPageFirstItemId)) {
      currentPageFirstItemIndex--;
      currentPageFirstItemId=((Container.Ordered)items).prevItemId(currentPageFirstItemId);
    }
    if (((Container.Ordered)items).isFirstId(currentPageFirstItemId)) {
      currentPageFirstItemIndex=0;
    }
    while (currentPageFirstItemIndex < newIndex && !((Container.Ordered)items).isLastId(currentPageFirstItemId)) {
      currentPageFirstItemIndex++;
      currentPageFirstItemId=((Container.Ordered)items).nextItemId(currentPageFirstItemId);
    }
    if (((Container.Ordered)items).isLastId(currentPageFirstItemId)) {
      newIndex=currentPageFirstItemIndex=size - 1;
    }
  }
  if (needsPageBufferReset) {
    resetPageBuffer();
    refreshRenderedCells();
  }
}
