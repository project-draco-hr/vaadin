{
  getWidget().client=client;
  getWidget().paintableId=uidl.getId();
  if (!isRealUpdate(uidl)) {
    return;
  }
  getWidget().setReadOnly(isReadOnly());
  getWidget().setInputPrompt(getState().getInputPrompt());
  getWidget().setMaxLength(getState().getMaxLength());
  getWidget().setImmediate(getState().isImmediate());
  getWidget().listenTextChangeEvents=hasEventListener("ie");
  if (getWidget().listenTextChangeEvents) {
    getWidget().textChangeEventMode=uidl.getStringAttribute(VTextField.ATTR_TEXTCHANGE_EVENTMODE);
    if (getWidget().textChangeEventMode.equals(VTextField.TEXTCHANGE_MODE_EAGER)) {
      getWidget().textChangeEventTimeout=1;
    }
 else {
      getWidget().textChangeEventTimeout=uidl.getIntAttribute(VTextField.ATTR_TEXTCHANGE_TIMEOUT);
      if (getWidget().textChangeEventTimeout < 1) {
        getWidget().textChangeEventTimeout=1;
      }
    }
    getWidget().sinkEvents(VTextField.TEXTCHANGE_EVENTS);
    getWidget().attachCutEventListener(getWidget().getElement());
  }
  getWidget().setColumns(getState().getColumns());
  final String text=getState().getText();
  if (!(uidl.getBooleanAttribute(VTextField.ATTR_NO_VALUE_CHANGE_BETWEEN_PAINTS) && getWidget().valueBeforeEdit != null && text.equals(getWidget().valueBeforeEdit))) {
    getWidget().updateFieldContent(text);
  }
  if (uidl.hasAttribute("selpos")) {
    final int pos=uidl.getIntAttribute("selpos");
    final int length=uidl.getIntAttribute("sellen");
    Scheduler.get().scheduleDeferred(new Command(){
      @Override public void execute(){
        getWidget().setSelectionRange(pos,length);
      }
    }
);
  }
}
