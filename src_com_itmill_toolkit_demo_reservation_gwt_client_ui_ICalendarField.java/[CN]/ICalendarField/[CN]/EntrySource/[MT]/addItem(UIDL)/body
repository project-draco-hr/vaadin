{
  final String styleName=item.getStringAttribute("styleName");
  DateTimeFormat dtf=DateTimeFormat.getFormat("d MM yyyy HH:mm:ss Z");
  Date startDate=dtf.parse(item.getStringAttribute("start"));
  int diff=(startDate.getTimezoneOffset() - item.getIntAttribute("Z")) * 60000;
  startDate=new Date(startDate.getTime() + diff);
  Date endDate;
  if (item.hasAttribute("end")) {
    endDate=dtf.parse(item.getStringAttribute("end"));
    endDate=new Date(endDate.getTime() + diff);
  }
 else {
    endDate=(Date)startDate.clone();
  }
  final String title=item.getStringAttribute("title");
  final String desc=item.getStringAttribute("description");
  final boolean notime=item.getBooleanAttribute("notime");
  final CalendarEntry entry=new CalendarEntry(styleName,startDate,endDate,title,desc,notime);
  for (final Date d=entry.getStart(); d.getYear() <= entry.getEnd().getYear() && d.getMonth() <= entry.getEnd().getYear() && d.getDate() <= entry.getEnd().getDate(); d.setTime(d.getTime() + 86400000)) {
    final String key=d.getYear() + "" + d.getMonth()+ ""+ d.getDate();
    ArrayList l=(ArrayList)dates.get(key);
    if (l == null) {
      l=new ArrayList();
      dates.put(key,l);
    }
    l.add(entry);
  }
}
