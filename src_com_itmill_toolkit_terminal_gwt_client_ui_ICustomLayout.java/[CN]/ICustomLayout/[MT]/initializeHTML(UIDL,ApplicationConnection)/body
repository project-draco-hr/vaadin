{
  final String newTemplate=uidl.getStringAttribute("template");
  String template=client.getResource("layouts/" + newTemplate + ".html");
  if (template == null) {
    template="<em>Layout file layouts/" + newTemplate + ".html is missing. Components will be drawn for debug purposes.</em>";
  }
 else {
    currentTemplate=newTemplate;
  }
  template=extractBodyAndScriptsFromTemplate(template);
  DOM.setInnerHTML(getElement(),template);
  locationToElement.clear();
  scanForLocations(getElement());
  String themeName=client.getTheme();
  String prefix;
  if (uriEndsWithSlash()) {
    prefix="../ITMILL/themes/";
  }
 else {
    prefix="ITMILL/themes/";
  }
  prefixImgSrcs(getElement(),prefix + themeName + "/layouts/");
  publishResizedFunction(DOM.getFirstChild(getElement()));
}
