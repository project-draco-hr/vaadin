{
  String newTemplate=uidl.getStringAttribute("template");
  if (currentTemplate != null && currentTemplate.equals(newTemplate))   return;
  String template=client.getResource("layouts/" + newTemplate + ".html");
  if (template == null) {
    template="Layout file layouts/" + newTemplate + ".html is missing.";
  }
 else {
    currentTemplate=newTemplate;
  }
  template=extractBodyAndScriptsFromTemplate(template);
  DOM.setInnerHTML(getElement(),template);
  locationToElement.clear();
  scanForLocations(getElement());
  Widget parent=getParent();
  while (parent != null && !(parent instanceof IView))   parent=parent.getParent();
  if (parent != null && ((IView)parent).getTheme() != null)   ;
  prefixImgSrcs(getElement(),"../ITK-INF/themes/" + ((IView)parent).getTheme() + "/layouts/");
}
