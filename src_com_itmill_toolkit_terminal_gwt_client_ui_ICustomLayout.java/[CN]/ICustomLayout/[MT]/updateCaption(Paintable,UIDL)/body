{
  ICaptionWrapper wrapper=(ICaptionWrapper)widgetToCaptionWrapper.get(component);
  if (ICaption.isNeeded(uidl)) {
    if (wrapper == null) {
      final String loc=getLocation((Widget)component);
      super.remove((Widget)component);
      wrapper=new ICaptionWrapper(component,client);
      super.add(wrapper,(Element)locationToElement.get(loc));
      widgetToCaptionWrapper.put(component,wrapper);
    }
    wrapper.updateCaption(uidl);
  }
 else {
    if (wrapper != null) {
      final String loc=getLocation((Widget)component);
      super.remove(wrapper);
      super.add((Widget)wrapper.getPaintable(),(Element)locationToElement.get(loc));
      widgetToCaptionWrapper.remove(component);
    }
  }
}
