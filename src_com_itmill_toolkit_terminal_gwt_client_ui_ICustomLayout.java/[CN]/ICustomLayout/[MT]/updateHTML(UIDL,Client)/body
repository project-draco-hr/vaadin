{
  String newStyle=uidl.getStringAttribute("style");
  if (currentStyle != null && currentStyle.equals(newStyle))   return;
  String template=client.getResource("layout/" + newStyle + ".html");
  if (template == null) {
    template="Layout " + newStyle + " is missing";
  }
 else {
    currentStyle=newStyle;
  }
  template=extractBodyAndScriptsFromTemplate(template);
  html=new HTMLPanel(template);
  addUniqueIdsForLocations(html.getElement(),locationPrefix);
  Widget parent=getParent();
  while (parent != null && !(parent instanceof IWindow))   parent=parent.getParent();
  if (parent != null && ((IWindow)parent).getTheme() != null)   ;
  prefixImgSrcs(html.getElement(),"../theme/" + ((IWindow)parent).getTheme() + "/layout/");
  add(html);
}
