{
  this.maxWidth=maxWidth;
  DOM.setStyleAttribute(getElement(),"width",maxWidth + "px");
  if (icon != null) {
    DOM.setStyleAttribute(icon.getElement(),"width","");
  }
  if (captionText != null) {
    DOM.setStyleAttribute(captionText,"width","");
  }
  int requiredWidth=getRequiredWidth();
  if (requiredWidth > maxWidth) {
    int availableWidth=maxWidth;
    if (requiredFieldIndicator != null) {
      availableWidth-=Util.getRequiredWidth(requiredFieldIndicator);
    }
    if (errorIndicatorElement != null) {
      availableWidth-=Util.getRequiredWidth(errorIndicatorElement);
    }
    if (availableWidth < 0) {
      availableWidth=0;
    }
    if (icon != null) {
      int iconRequiredWidth=Util.getRequiredWidth(icon.getElement());
      if (availableWidth > iconRequiredWidth) {
        availableWidth-=iconRequiredWidth;
      }
 else {
        DOM.setStyleAttribute(icon.getElement(),"width",availableWidth + "px");
        availableWidth=0;
      }
    }
    if (captionText != null) {
      int captionWidth=Util.getRequiredWidth(captionText);
      if (availableWidth > captionWidth) {
        availableWidth-=captionWidth;
      }
 else {
        DOM.setStyleAttribute(captionText,"width",availableWidth + "px");
        availableWidth=0;
      }
    }
  }
}
