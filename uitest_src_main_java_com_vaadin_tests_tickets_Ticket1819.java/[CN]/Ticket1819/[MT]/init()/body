{
  final LegacyWindow main=new LegacyWindow("#1819");
  setMainWindow(main);
  com.vaadin.ui.Select s;
  s=new Select("Select with null selection allowed");
  s.setNullSelectionAllowed(true);
  listOfAllFields.add(s);
  s=new Select("Select with null selection NOT allowed");
  s.setNullSelectionAllowed(false);
  listOfAllFields.add(s);
  for (Iterator<Select> i=listOfAllFields.iterator(); i.hasNext(); ) {
    s=i.next();
    main.addComponent(s);
    s.addItem("-null-");
    s.addItem("");
    s.addItem("foo");
    s.addItem("bar");
    s.setNullSelectionItemId("-null-");
    s.setImmediate(true);
  }
  Button checkValidity=new Button("Check validity of the fields");
  main.addComponent(checkValidity);
  checkValidity.addListener(new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      StringBuffer msg=new StringBuffer();
      for (Iterator<Select> i=listOfAllFields.iterator(); i.hasNext(); ) {
        AbstractField<?> af=i.next();
        msg.append("<h1>" + af.getCaption() + "</h1>\n");
        msg.append("Value=" + af.getValue() + "<br/>\n");
      }
      Window w=new Window("Status of the fields");
      w.setModal(true);
      w.setContent(new Label(msg.toString(),ContentMode.HTML));
      main.addWindow(w);
    }
  }
);
}
