{
  currentSuggestion=suggestion;
  String newKey;
  if (suggestion.key.equals("")) {
    newKey="";
  }
 else {
    newKey=String.valueOf(suggestion.getOptionKey());
  }
  String text=suggestion.getReplacementString();
  if ("".equals(newKey)) {
    tb.setText(inputPrompt);
    prompting=true;
    addStyleDependentName(CLASSNAME_PROMPT);
  }
 else {
    tb.setText(text);
    prompting=false;
    removeStyleDependentName(CLASSNAME_PROMPT);
  }
  setSelectedItemIcon(suggestion.getIconUri());
  if (!newKey.equals(selectedOptionKey)) {
    selectedOptionKey=newKey;
    client.updateVariable(paintableId,"selected",new String[]{selectedOptionKey},immediate);
  }
  suggestionPopup.hide();
}
