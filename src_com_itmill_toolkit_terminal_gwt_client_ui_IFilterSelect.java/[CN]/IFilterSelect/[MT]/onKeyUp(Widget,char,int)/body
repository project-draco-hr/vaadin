{
  if (enabled) {
switch (keyCode) {
case KeyboardListener.KEY_ENTER:
case KeyboardListener.KEY_TAB:
case KeyboardListener.KEY_SHIFT:
case KeyboardListener.KEY_CTRL:
case KeyboardListener.KEY_ALT:
      ;
    break;
case KeyboardListener.KEY_DOWN:
case KeyboardListener.KEY_UP:
case KeyboardListener.KEY_PAGEDOWN:
case KeyboardListener.KEY_PAGEUP:
  if (suggestionPopup.isAttached()) {
    break;
  }
 else {
    filterOptions(-1,"");
    lastFilter="";
    tb.selectAll();
    break;
  }
case KeyboardListener.KEY_ESCAPE:
if (currentSuggestion != null) {
  String text=currentSuggestion.getReplacementString();
  tb.setText(text);
  prompting=false;
  removeStyleDependentName(CLASSNAME_PROMPT);
  selectedOptionKey=currentSuggestion.key;
}
 else {
  tb.setText(inputPrompt);
  prompting=true;
  addStyleDependentName(CLASSNAME_PROMPT);
  selectedOptionKey=null;
}
lastFilter="";
suggestionPopup.hide();
break;
default :
filterOptions(currentPage);
break;
}
}
}
