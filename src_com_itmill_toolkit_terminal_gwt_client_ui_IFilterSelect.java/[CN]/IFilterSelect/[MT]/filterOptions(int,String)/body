{
  if (filter.equals(lastFilter) && currentPage == page) {
    if (!suggestionPopup.isAttached())     suggestionPopup.showSuggestions(currentSuggestions,currentPage,totalSuggestions);
    return;
  }
  if (!filter.equals(lastFilter)) {
    page=0;
  }
  if (clientSideFiltering) {
    currentSuggestions.clear();
    for (Iterator it=allSuggestions.iterator(); it.hasNext(); ) {
      FilterSelectSuggestion s=(FilterSelectSuggestion)it.next();
      String string=s.getDisplayString().toLowerCase();
      if (string.startsWith(filter.toLowerCase())) {
        currentSuggestions.add(s);
      }
    }
    lastFilter=filter;
    currentPage=page;
    suggestionPopup.showSuggestions(currentSuggestions,page,currentSuggestions.size());
  }
 else {
    filtering=true;
    client.updateVariable(paintableId,"filter",filter,false);
    client.updateVariable(paintableId,"page",page,true);
    lastFilter=filter;
    currentPage=page;
  }
}
