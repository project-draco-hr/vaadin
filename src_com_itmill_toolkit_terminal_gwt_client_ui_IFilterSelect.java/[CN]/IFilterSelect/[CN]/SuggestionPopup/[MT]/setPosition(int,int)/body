{
  menu.setHeight("");
  offsetHeight=getOffsetHeight();
  int desiredWidth=IFilterSelect.this.getOffsetWidth() - popupOpener.getOffsetWidth();
  int w2=DOM.getElementPropertyInt(DOM.getFirstChild(menu.getElement()),"offsetWidth");
  if (w2 < desiredWidth) {
    menu.setWidth(desiredWidth + "px");
    DOM.setStyleAttribute(DOM.getFirstChild(menu.getElement()),"width","100%");
    w2=desiredWidth;
  }
  if (Util.isIE()) {
    DOM.setStyleAttribute(getElement(),"width",w2 + "px");
  }
  if (!isPagingEnabled && offsetHeight > Window.getClientHeight()) {
    offsetHeight=Window.getClientHeight();
    menu.setHeight((offsetHeight - EXTRASPACE) + "px");
    DOM.setStyleAttribute(menu.getElement(),"overflow","auto");
    menu.setWidth((menu.getOffsetWidth() * 2 - DOM.getElementPropertyInt(menu.getElement(),"clientWidth")) + "px");
  }
  if (offsetHeight + getPopupTop() > Window.getClientHeight()) {
    int top=Window.getClientHeight() - offsetHeight - EXTRASPACE / 2;
    setPopupPosition(getPopupLeft(),top);
  }
}
