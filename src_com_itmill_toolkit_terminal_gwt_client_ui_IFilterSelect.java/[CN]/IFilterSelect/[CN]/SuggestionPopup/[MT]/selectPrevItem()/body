{
  MenuItem cur=menu.getSelectedItem();
  int index=-1 + menu.getItems().indexOf(cur);
  if (index > -1) {
    MenuItem newSelectedItem=(MenuItem)menu.getItems().get(index);
    menu.selectItem(newSelectedItem);
    tb.setText(newSelectedItem.getText());
    tb.setSelectionRange(lastFilter.length(),newSelectedItem.getText().length() - lastFilter.length());
  }
 else   if (index == -1) {
    if (currentPage > 0)     filterOptions(currentPage - 1);
  }
 else {
    MenuItem newSelectedItem=(MenuItem)menu.getItems().get(menu.getItems().size() - 1);
    menu.selectItem(newSelectedItem);
    tb.setText(newSelectedItem.getText());
    tb.setSelectionRange(lastFilter.length(),newSelectedItem.getText().length() - lastFilter.length());
  }
}
