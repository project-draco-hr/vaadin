{
  final Table table=new Table("Test table");
  table.addContainerProperty("Name",String.class,null,"Name",null,null);
  table.setItemCaptionPropertyId("Name");
  table.setHeight("100px");
  table.setImmediate(true);
  final CheckBox showHeaders=new CheckBox("Show headers");
  showHeaders.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      if (showHeaders.getValue()) {
        table.setColumnHeaderMode(Table.COLUMN_HEADER_MODE_EXPLICIT_DEFAULTS_ID);
      }
 else {
        table.setColumnHeaderMode(Table.COLUMN_HEADER_MODE_HIDDEN);
      }
    }
  }
);
  showHeaders.setImmediate(true);
  showHeaders.setValue(true);
  addComponent(showHeaders);
  addComponent(table);
}
