{
  if (propertyId != null && field != null) {
    fields.put(propertyId,field);
    field.addListener(fieldValueChangeListener);
    if (!propertyIds.contains(propertyId)) {
      propertyIds.addLast(propertyId);
    }
    field.setReadThrough(readThrough);
    field.setWriteThrough(writeThrough);
    if (isImmediate() && field instanceof AbstractComponent) {
      ((AbstractComponent)field).setImmediate(true);
    }
    if (layout instanceof CustomLayout) {
      ((CustomLayout)layout).addComponent(field,propertyId.toString());
    }
 else {
      layout.addComponent(field);
    }
    requestRepaint();
  }
}
