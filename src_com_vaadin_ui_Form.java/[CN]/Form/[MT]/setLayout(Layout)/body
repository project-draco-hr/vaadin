{
  if (newLayout == null) {
    newLayout=new FormLayout();
  }
  gridlayoutCursorX=-1;
  gridlayoutCursorY=-1;
  if (layout != null) {
    final Object[] properties=propertyIds.toArray();
    for (int i=0; i < properties.length; i++) {
      Field<?> f=getField(properties[i]);
      detachField(f);
      if (newLayout instanceof CustomLayout) {
        ((CustomLayout)newLayout).addComponent(f,properties[i].toString());
      }
 else {
        newLayout.addComponent(f);
      }
    }
    layout.setParent(null);
  }
  newLayout.setParent(this);
  layout=newLayout;
  requestRepaint();
}
