{
  final Form form=new Form();
  form.setWriteThrough(false);
  form.setImmediate(true);
  dateProperty=new ObjectProperty<Date>(new Date(2009 - 1900,4 - 1,1));
  dateField=new DateField("Year",dateProperty);
  dateField.setLocale(new Locale("fi","FI"));
  dateField.setResolution(DateField.RESOLUTION_DAY);
  dateField.setDebugId("_DF");
  form.addField("date",dateField);
  integerProperty=new ObjectProperty<Integer>(42);
  integerField=new TextField("Another Field",integerProperty);
  integerField.setDebugId("_IF");
  form.addField("text",integerField);
  Button validate=new Button("Validate");
  validate.setDebugId("_validate");
  validate.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      try {
        form.validate();
        log.log("Form is valid");
      }
 catch (      InvalidValueException e) {
        log.log("Validation failed:" + e.getLocalizedMessage());
      }
 finally {
        printState();
      }
    }
  }
);
  form.getFooter().addComponent(validate);
  Button commit=new Button("Commit");
  commit.setDebugId("_commit");
  commit.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      try {
        form.commit();
        log.log("Commit succeeded");
      }
 catch (      InvalidValueException e) {
        log.log("Commit failed : " + e.getLocalizedMessage());
      }
 finally {
        printState();
      }
    }
  }
);
  form.getFooter().addComponent(commit);
  Button printState=new Button("printState");
  printState.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      printState();
    }
  }
);
  form.getFooter().addComponent(printState);
  log=new Log(7);
  log.log("Test app started");
  printState();
  addComponent(form);
  addComponent(log);
}
