{
  Object prevUser=this.user;
  if (user != prevUser && (user == null || !user.equals(prevUser))) {
    this.user=user;
    if (userChangeListeners != null) {
      Object[] listeners=userChangeListeners.toArray();
      UserChangeEvent event=new UserChangeEvent(this,user,prevUser);
      for (int i=0; i < listeners.length; i++) {
        ((UserChangeListener)listeners[i]).applicationUserChanged(event);
      }
    }
  }
}
