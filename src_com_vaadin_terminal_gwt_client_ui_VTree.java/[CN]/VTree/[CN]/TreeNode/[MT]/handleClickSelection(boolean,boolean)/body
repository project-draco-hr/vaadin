{
  if (multiSelectMode == MULTISELECT_MODE_SIMPLE || !isMultiselect) {
    toggleSelection();
    setFocusedNode(this);
    lastSelection=this;
  }
 else   if (multiSelectMode == MULTISELECT_MODE_DEFAULT) {
    if (isMultiselect && ctrl && !shift) {
      toggleSelection();
      setFocusedNode(this);
      lastSelection=this;
    }
 else     if (isMultiselect && !ctrl && shift) {
      deselectAll();
      selectNodeRange(lastSelection.key,key);
      sendSelectionToServer();
    }
 else     if (isMultiselect && ctrl && shift) {
      selectNodeRange(lastSelection.key,key);
    }
 else {
      deselectAll();
      toggleSelection();
      setFocusedNode(this);
      lastSelection=this;
    }
  }
  return true;
}
