def addSummary(self, m, target_milestone=None):
    ticketnum = int(m.group(1))
    context = m.group(2)
    if re.match(' *\\(', context):
        return ('#%d%s' % (ticketnum, context))
    if tickets.has_key(ticketnum):
        summary = tickets[ticketnum].summary
        ticket_milestone = tickets[ticketnum].milestone
    else:
        (summary, ticket_milestone) = fetchSummary(ticketnum)
        tickets[ticketnum] = Ticket(ticketnum, summary, ticket_milestone)
    self.tickets.append(ticketnum)
    if summary.startswith('"'):
        summary = summary.strip('"')
        summary = summary.replace('""', '"')
    ticketnum = ('#%s' % ticketnum)
    if target_milestone:
        if (ticket_milestone.find(target_milestone) != (-1)):
            ticketnum = ('<b>%s</b>' % ticketnum)
    context = re.sub('#([0-9]+)(.*)', (lambda m: self.addSummary(m, target_milestone=target_milestone)), context)
    return ('%s (<i>%s</i>) %s' % (ticketnum, summary, context))
