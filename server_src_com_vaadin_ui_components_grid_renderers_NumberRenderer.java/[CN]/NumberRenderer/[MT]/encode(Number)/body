{
  if (formatString != null && locale != null) {
    return String.format(locale,formatString,value);
  }
 else   if (decimalFormat != null) {
    return decimalFormat.format(value);
  }
 else {
    throw new IllegalStateException(String.format("Internal bug: " + "%s is in an illegal state: " + "[locale: %s, decimalFormat: %s, formatString: %s]",getClass().getSimpleName(),locale,decimalFormat,formatString));
  }
}
