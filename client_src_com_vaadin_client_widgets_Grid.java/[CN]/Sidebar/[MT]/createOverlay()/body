{
  overlay=new PopupPanel(){
    @Override protected void onAttach(){
      BodyElement body=Document.get().getBody();
      Element target=body.getFirstChildElement();
      while (!target.hasClassName("v-overlay-container") && target != null) {
        target=target.getNextSiblingElement();
      }
      if (target != null) {
        target.appendChild(getElement());
      }
      super.onAttach();
    }
  }
;
  overlay.setAutoHideEnabled(true);
  overlay.addStyleDependentName("popup");
  overlay.add(content);
  overlay.addAutoHidePartner(rootContainer.getElement());
  overlay.addCloseHandler(new CloseHandler<PopupPanel>(){
    @Override public void onClose(    CloseEvent<PopupPanel> event){
      removeStyleName("open");
      addStyleName("closed");
    }
  }
);
}
