{
  for (  ColumnGroupRow<JSONObject> row : getWidget().getColumnGroupRows()) {
    getWidget().removeColumnGroupRow(row);
  }
  for (  ColumnGroupRowState rowState : getState().columnGroupRows) {
    ColumnGroupRow<JSONObject> row=getWidget().addColumnGroupRow();
    row.setFooterVisible(rowState.footerVisible);
    row.setHeaderVisible(rowState.headerVisible);
    for (    ColumnGroupState groupState : rowState.groups) {
      List<GridColumn<Object,JSONObject>> columns=new ArrayList<GridColumn<Object,JSONObject>>();
      for (      String columnId : groupState.columns) {
        CustomGridColumn column=columnIdToColumn.get(columnId);
        columns.add(column);
      }
      @SuppressWarnings("unchecked") final GridColumn<?,JSONObject>[] gridColumns=columns.toArray(new GridColumn[columns.size()]);
      ColumnGroup<JSONObject> group=row.addGroup(gridColumns);
      group.setFooterCaption(groupState.footer);
      group.setHeaderCaption(groupState.header);
    }
  }
}
