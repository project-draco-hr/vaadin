{
  Object cxattr=session.getAttribute(PortletApplicationContext2.class.getName());
  PortletApplicationContext2 cx=null;
  if (cxattr instanceof PortletApplicationContext2) {
    cx=(PortletApplicationContext2)cxattr;
  }
  if (cx == null) {
    cx=new PortletApplicationContext2();
    session.setAttribute(PortletApplicationContext2.class.getName(),cx);
  }
  cx.setSession(new WrappedPortletSession(session));
  return cx;
}
