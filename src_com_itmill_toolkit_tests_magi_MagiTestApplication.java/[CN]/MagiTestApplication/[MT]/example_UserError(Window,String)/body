{
  if (param != null) {
    if (param.equals("form")) {
      final FormLayout layout=new FormLayout();
      main.addComponent(layout);
      final TextField textfield=new TextField("Enter name");
      layout.addComponent(textfield);
      textfield.setComponentError(null);
      final Button button=new Button("Click me!");
      layout.addComponent(button);
      button.addListener(new Button.ClickListener(){
        public void buttonClick(        ClickEvent event){
          if (((String)textfield.getValue()).length() == 0)           textfield.setComponentError(new UserError("Must not be empty"));
 else           textfield.setComponentError(null);
        }
      }
);
    }
  }
 else {
    final TextField textfield=new TextField("Enter name");
    main.addComponent(textfield);
    textfield.setComponentError(null);
    final Button button=new Button("Click me!");
    main.addComponent(button);
    button.addListener(new Button.ClickListener(){
      public void buttonClick(      ClickEvent event){
        if (((String)textfield.getValue()).length() == 0)         textfield.setComponentError(new UserError("Must not be empty"));
 else         textfield.setComponentError(null);
      }
    }
);
  }
}
