{
  String portalInfo=request.getPortalContext().getPortalInfo().toLowerCase();
  if (portalInfo.contains("liferay")) {
    return new WrappedLiferayRequest(request,getVaadinService());
  }
 else   if (portalInfo.contains("gatein")) {
    return new WrappedGateinRequest(request,getVaadinService());
  }
 else {
    return new WrappedPortletRequest(request,getVaadinService());
  }
}
