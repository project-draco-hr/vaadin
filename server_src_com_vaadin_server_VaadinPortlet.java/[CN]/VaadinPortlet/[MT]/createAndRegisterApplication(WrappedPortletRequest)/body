{
  VaadinPortletSession newApplication=createApplication();
  newApplication.storeInSession(new WrappedPortletSession(request.getPortletRequest().getPortletSession()));
  Locale locale=request.getLocale();
  newApplication.setLocale(locale);
  newApplication.start(new SessionStartEvent(null,getVaadinService().getDeploymentConfiguration(),new PortletCommunicationManager(newApplication)));
  onVaadinSessionStarted(request,newApplication);
  return newApplication;
}
