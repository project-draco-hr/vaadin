{
  String portalInfo=request.getPortalContext().getPortalInfo().toLowerCase();
  if (portalInfo.contains("liferay")) {
    return new VaadinLiferayRequest(request,getService());
  }
 else   if (portalInfo.contains("gatein")) {
    return new VaadinGateinRequest(request,getService());
  }
 else {
    return new VaadinPortletRequest(request,getService());
  }
}
