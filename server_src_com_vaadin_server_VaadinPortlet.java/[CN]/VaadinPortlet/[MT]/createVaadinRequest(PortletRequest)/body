{
  String portalInfo=request.getPortalContext().getPortalInfo().toLowerCase();
  if (portalInfo.contains("liferay")) {
    return new VaadinLiferayRequest(request,getVaadinService());
  }
 else   if (portalInfo.contains("gatein")) {
    return new VaadinGateinRequest(request,getVaadinService());
  }
 else {
    return new VaadinPortletRequest(request,getVaadinService());
  }
}
