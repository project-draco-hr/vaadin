{
  AbstractComponentState state=getState();
  String primaryStyleName=getWidget().getStylePrimaryName();
  if (state.primaryStyleName != null) {
    getWidget().setStylePrimaryName(state.primaryStyleName);
  }
  setWidgetStyleName(StyleConstants.UI_WIDGET,true);
  setWidgetStyleName("v-readonly",isReadOnly());
  setWidgetStyleNameWithPrefix(primaryStyleName,ApplicationConnection.ERROR_CLASSNAME_EXT,null != state.errorMessage);
  if (ComponentStateUtil.hasStyles(state)) {
    for (    String oldStyle : styleNames) {
      setWidgetStyleName(oldStyle,false);
      setWidgetStyleNameWithPrefix(primaryStyleName + "-",oldStyle,false);
    }
    for (    String newStyle : state.styles) {
      setWidgetStyleName(newStyle,true);
      setWidgetStyleNameWithPrefix(primaryStyleName + "-",newStyle,true);
    }
    styleNames.clear();
    styleNames.addAll(state.styles);
  }
 else {
    for (    String oldStyle : styleNames) {
      setWidgetStyleName(oldStyle,false);
      setWidgetStyleNameWithPrefix(primaryStyleName + "-",oldStyle,false);
    }
    styleNames.clear();
  }
}
