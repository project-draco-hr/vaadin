{
  ComponentState state=getState();
  String primaryStyleName=state.primaryStyleName == null ? "" : state.primaryStyleName;
  setWidgetStyleName("v-readonly",isReadOnly());
  setWidgetStyleNameWithPrefix(primaryStyleName,ApplicationConnection.ERROR_CLASSNAME_EXT,null != state.errorMessage);
  if (ComponentStateUtil.hasStyles(state)) {
    List<String> newStyles=new ArrayList<String>();
    newStyles.addAll(state.styles);
    newStyles.removeAll(styleNames);
    for (    String newStyle : newStyles) {
      setWidgetStyleName(newStyle,true);
      setWidgetStyleNameWithPrefix(primaryStyleName + "-",newStyle,true);
    }
    styleNames.removeAll(state.styles);
    for (    String oldStyle : styleNames) {
      setWidgetStyleName(oldStyle,false);
      setWidgetStyleNameWithPrefix(primaryStyleName + "-",oldStyle,false);
    }
    styleNames.clear();
    styleNames.addAll(state.styles);
  }
 else {
    for (    String oldStyle : styleNames) {
      setWidgetStyleName(oldStyle,false);
      setWidgetStyleNameWithPrefix(primaryStyleName + "-",oldStyle,false);
    }
    styleNames.clear();
  }
}
