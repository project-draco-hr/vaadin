{
  setCompositionRoot(lo);
  ic.addContainerProperty("foo",String.class,"");
  ic.addContainerProperty("bar",String.class,"");
  for (int i=0; i < 1000; i++) {
    Object id=ic.addItem();
    ic.getContainerProperty(id,"foo").setValue(randomWord());
    ic.getContainerProperty(id,"bar").setValue(randomWord());
  }
  Panel filterPanel=new Panel("Filter",new OrderedLayout(OrderedLayout.ORIENTATION_HORIZONTAL));
  filterPanel.setWidth(100);
  filterPanel.setWidthUnits(Panel.UNITS_PERCENTAGE);
  lo.addComponent(filterPanel);
  filterPanel.addComponent(fooFilter);
  filterPanel.addComponent(barFilter);
  filterPanel.addComponent(filterButton);
  fooFilter.setDescription("Filters foo column in case-sensitive contains manner.");
  barFilter.setDescription("Filters bar column in case-insensitive prefix manner.");
  filterPanel.addComponent(count);
  lo.addComponent(t);
  t.setPageLength(12);
  t.setWidth(100);
  t.setWidthUnits(Table.UNITS_PERCENTAGE);
  t.setContainerDataSource(ic);
  filterButton.addListener(new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      ic.removeAllContainerFilters();
      if (fooFilter.toString().length() > 0)       ic.addContainerFilter("foo",fooFilter.toString(),false,false);
      if (barFilter.toString().length() > 0)       ic.addContainerFilter("bar",barFilter.toString(),true,true);
      count.setValue("Rows in table: " + ic.size());
    }
  }
);
  lo.addComponent(new Button("Rebind table datasource",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      t.setContainerDataSource(ic);
    }
  }
));
}
