{
  final VaadinServiceSession fieldAppWithCustomIntegerConverter=new VaadinServiceSession(null);
  fieldAppWithCustomIntegerConverter.setConverterFactory(new ConverterFactory42());
  VaadinServiceSession.setCurrent(new VaadinServiceSession(null));
  TextField tf=new TextField("","123"){
    @Override public VaadinServiceSession getSession(){
      return fieldAppWithCustomIntegerConverter;
    }
  }
;
  tf.setConverter(Integer.class);
  assertEquals(42,tf.getConvertedValue());
}
