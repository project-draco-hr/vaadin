{
  String name=this.getName();
  int namelen=name.length();
  if (resourceId == null || !resourceId.startsWith(name + "/") || resourceId.length() <= (namelen + 1)) {
    return null;
  }
  String streamName=this.path + resourceId.substring(namelen + 1);
  InputStream stream=context.getResourceAsStream(streamName);
  if (stream != null)   try {
    byte[] data=(byte[])resourceCache.get(stream);
    if (data != null)     return new ByteArrayInputStream(data);
    int bufSize=1024;
    ByteArrayOutputStream out=new ByteArrayOutputStream(bufSize);
    byte[] buf=new byte[bufSize];
    int n=0;
    while ((n=stream.read(buf)) >= 0) {
      out.write(buf,0,n);
    }
    try {
      stream.close();
    }
 catch (    IOException ignored) {
    }
    data=out.toByteArray();
    resourceCache.put(stream,data);
    return new ByteArrayInputStream(data);
  }
 catch (  IOException e) {
  }
  throw new ThemeSource.ThemeException("Resource " + resourceId + " not found.");
}
