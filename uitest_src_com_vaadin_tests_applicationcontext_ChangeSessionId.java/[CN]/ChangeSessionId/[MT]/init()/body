{
  LegacyWindow mainWindow=new LegacyWindow("Sestest Application");
  mainWindow.addComponent(log);
  mainWindow.addComponent(loginButton);
  mainWindow.addComponent(new Button("Show session id",new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      logSessionId();
    }
  }
));
  setMainWindow(mainWindow);
  loginButton.addListener(new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      VaadinServletSession context=((VaadinServletSession)getContext());
      String oldSessionId=context.getHttpSession().getId();
      context.getService().reinitializeSession(VaadinService.getCurrentRequest());
      String newSessionId=context.getHttpSession().getId();
      if (oldSessionId.equals(newSessionId)) {
        log.log("FAILED! Both old and new session id is " + newSessionId);
      }
 else {
        log.log("Session id changed successfully from " + oldSessionId + " to "+ newSessionId);
      }
    }
  }
);
  logSessionId();
}
