{
  if (getFilteredItemIds() != null) {
    if (itemId == null || !getFilteredItemIds().contains(itemId)) {
      return null;
    }
    final Iterator<?> i=getFilteredItemIds().iterator();
    while (i.hasNext() && !itemId.equals(i.next())) {
      ;
    }
    if (i.hasNext()) {
      return i.next();
    }
    return null;
  }
  try {
    int idx=allItemIds.indexOf(itemId);
    if (idx == -1) {
      return null;
    }
    return allItemIds.get(idx + 1);
  }
 catch (  final IndexOutOfBoundsException e) {
    return null;
  }
}
