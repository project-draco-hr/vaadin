{
  if (!hasFilters) {
    filteredItemIds=null;
    if (filters != null) {
      filters=null;
      return true;
    }
    return false;
  }
  if (filteredItemIds == null) {
    filteredItemIds=new LinkedHashSet<Object>();
  }
 else {
    filteredItemIds.clear();
  }
  for (final Iterator<?> i=itemIds.iterator(); i.hasNext(); ) {
    final Object id=i.next();
    if (passesFilters(id)) {
      filteredItemIds.add(id);
    }
  }
  return true;
}
