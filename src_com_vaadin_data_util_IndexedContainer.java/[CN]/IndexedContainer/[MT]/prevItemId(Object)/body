{
  if (filteredItemIds != null) {
    if (!filteredItemIds.contains(itemId)) {
      return null;
    }
    final Iterator<?> i=filteredItemIds.iterator();
    if (itemId == null) {
      return null;
    }
    Object prev=null;
    Object current;
    while (i.hasNext() && !itemId.equals(current=i.next())) {
      prev=current;
    }
    return prev;
  }
  try {
    return itemIds.get(itemIds.indexOf(itemId) - 1);
  }
 catch (  final IndexOutOfBoundsException e) {
    return null;
  }
}
