{
  if (getFilteredItemIds() != null) {
    int index=0;
    if (itemId == null) {
      return -1;
    }
    final Iterator<?> i=getFilteredItemIds().iterator();
    while (i.hasNext()) {
      Object id=i.next();
      if (itemId.equals(id)) {
        return index;
      }
      index++;
    }
    return -1;
  }
  return allItemIds.indexOf(itemId);
}
