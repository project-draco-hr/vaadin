{
  SelectorFactoryImpl factory=new SelectorFactoryImpl();
  ElementSelector es=factory.createElementSelector(null,((ElementSelector)selector).getLocalName().replaceAll(variable,value));
  if (selector instanceof ConditionalSelector) {
    return factory.createConditionalSelector(es,((ConditionalSelector)selector).getCondition());
  }
 else   if (selector instanceof DescendantSelector) {
    return factory.createDescendantSelector(es,((DescendantSelector)selector).getSimpleSelector());
  }
 else   if (selector instanceof ChildSelectorImpl) {
    return factory.createChildSelector(es,((DescendantSelector)selector).getSimpleSelector());
  }
 else {
    throw new Exception("Invalid selector type");
  }
}
