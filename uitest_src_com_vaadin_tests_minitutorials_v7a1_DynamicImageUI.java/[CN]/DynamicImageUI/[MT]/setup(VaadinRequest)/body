{
  getSession().addRequestHandler(new DynamicImageRequestHandler());
  URL imageUrl;
  try {
    imageUrl=new URL(getSession().getURL(),DynamicImageRequestHandler.IMAGE_URL + "?text=Hello!");
  }
 catch (  MalformedURLException e) {
    throw new RuntimeException(e);
  }
  Embedded embedded=new Embedded("A dynamically generated image",new ExternalResource(imageUrl));
  embedded.setType(Embedded.TYPE_IMAGE);
  getContent().addComponent(embedded);
}
