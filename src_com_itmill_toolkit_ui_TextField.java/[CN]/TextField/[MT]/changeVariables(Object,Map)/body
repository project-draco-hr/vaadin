{
  if (variables.containsKey("text") && !isReadOnly()) {
    String newValue=(String)variables.get("text");
    final String oldValue=getFormattedValue();
    if (newValue != null && (oldValue == null || isNullSettingAllowed()) && newValue.equals(getNullRepresentation())) {
      newValue=null;
    }
    if (newValue != oldValue && (newValue == null || !newValue.equals(oldValue))) {
      setValue(newValue,true);
    }
  }
}
