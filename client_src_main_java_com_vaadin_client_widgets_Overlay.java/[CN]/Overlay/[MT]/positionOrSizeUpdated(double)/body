{
  if (!isAttached()) {
    return;
  }
  int zIndex=-1;
  try {
    zIndex=Integer.parseInt(getElement().getStyle().getZIndex());
  }
 catch (  Exception ignore) {
    zIndex=1000;
  }
  if (zIndex == -1) {
    zIndex=Z_INDEX;
  }
  if (BrowserInfo.get().isIE()) {
    getOffsetHeight();
    getOffsetWidth();
  }
  if (isShadowEnabled() || needsShimElement()) {
    PositionAndSize positionAndSize=new PositionAndSize(getActualLeft(),getActualTop(),getOffsetWidth(),getOffsetHeight());
    positionAndSize.setAnimationFromCenterProgress(progress);
    Element container=getElement().getParentElement();
    if (isShadowEnabled()) {
      updateShadowPosition(progress,zIndex,positionAndSize);
      if (shadow.getParentElement() == null) {
        container.insertBefore(shadow,getElement());
        sinkShadowEvents();
      }
    }
    if (needsShimElement()) {
      updateShimPosition(positionAndSize);
      if (shimElement.getParentElement() == null) {
        container.insertBefore(shimElement,getElement());
      }
    }
  }
  if (BrowserInfo.get().isIE9() || BrowserInfo.get().isIE10()) {
    WidgetUtil.forceIERedraw(getElement());
  }
}
