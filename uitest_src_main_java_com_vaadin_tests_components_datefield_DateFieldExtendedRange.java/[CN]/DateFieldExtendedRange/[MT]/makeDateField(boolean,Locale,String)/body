{
  LegacyDateField df=isPopup ? new LegacyPopupDateField() : new LegacyInlineDateField();
  df.setResolution(LegacyDateField.RESOLUTION_DAY);
  df.setValue(date.getTime());
  df.setLocale(locale);
  df.setCaption(caption);
  return df;
}
