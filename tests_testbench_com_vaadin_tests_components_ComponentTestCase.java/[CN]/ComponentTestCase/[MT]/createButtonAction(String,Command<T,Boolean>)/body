{
  Button button=new Button(caption);
  button.setData(Boolean.FALSE);
  button.addListener(new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      Button b=event.getButton();
      boolean state=(Boolean)b.getData();
      b.setData(!state);
      doCommand(command,state);
    }
  }
);
  button.setDebugId("buttonaction-" + caption);
  button.setImmediate(true);
  return button;
}
