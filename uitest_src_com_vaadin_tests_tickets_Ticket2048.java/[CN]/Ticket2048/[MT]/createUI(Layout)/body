{
  Layout ol=new GridLayout(1,2);
  p=new Panel("Panel",ol);
  p.setSizeFull();
  Label l=new Label("Spacer");
  l.setHeight("400px");
  p.addComponent(l);
  embedded=new Embedded(null,new ThemeResource("icons/64/folder-add.png"));
  layout.addComponent(embedded);
  Button b=new Button("Replace image with new embedded component (flashes)",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      Embedded newEmbedded=new Embedded(null,new ThemeResource("icons/64/folder-add.png"));
      getMainWindow().getContent().replaceComponent(embedded,newEmbedded);
      embedded=newEmbedded;
    }
  }
);
  p.addComponent(b);
  b=new Button("Change image source (is fine)",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      String img="folder-add";
      if (((ThemeResource)embedded.getSource()).getResourceId().contains("folder-add")) {
        img="folder-delete";
      }
      embedded.setSource(new ThemeResource("icons/64/" + img + ".png"));
    }
  }
);
  p.addComponent(b);
  layout.addComponent(p);
}
