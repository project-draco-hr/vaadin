{
  LegacyWindow w=new LegacyWindow();
  setMainWindow(w);
  Label help=new Label("Use CTRL X to fire action, CTRL C to remove it (fails before fix)");
  w.addComponent(help);
  w.addActionHandler(new Handler(){
    final ShortcutAction a1=new ShortcutAction("action",KeyCode.X,new int[]{ModifierKey.CTRL});
    final ShortcutAction a2=new ShortcutAction("action",KeyCode.C,new int[]{ModifierKey.CTRL});
    Action[] actions=new Action[]{a1,a2};
    @Override public Action[] getActions(    Object target,    Object sender){
      return actions;
    }
    @Override public void handleAction(    Action action,    Object sender,    Object target){
      if (action == a1) {
        getMainWindow().addComponent(new Label("CTRL X hit"));
      }
 else {
        actions=new Action[]{a2};
        getMainWindow().removeActionHandler(this);
        getMainWindow().addActionHandler(this);
      }
    }
  }
);
}
