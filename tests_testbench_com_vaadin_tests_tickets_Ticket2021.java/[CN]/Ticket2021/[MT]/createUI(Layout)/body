{
  Label l=new Label("Label");
  Button b=new Button("Enable/disable caption and watch button move",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      System.out.println("Enable/disable caption");
      for (      AbstractComponent l : new AbstractComponent[]{tf1,tf2,tf3}) {
        if (l.getCaption() == null) {
          l.setCaption("Expand layout caption");
        }
 else {
          l.setCaption(null);
        }
      }
    }
  }
);
  b.setData(layout);
  Label l2=new Label("This should always be visible");
  layout.addComponent(l);
  layout.addComponent(b);
  layout.addComponent(l2);
  if (layout instanceof AbstractOrderedLayout) {
    ((AbstractOrderedLayout)layout).setExpandRatio(l,1);
  }
}
