{
  return new BrowserDetails(){
    @Override public URI getLocation(){
      String location=secondRequest.getParameter("loc");
      if (location == null) {
        return null;
      }
 else {
        try {
          return new URI(location);
        }
 catch (        URISyntaxException e) {
          throw new RuntimeException("Invalid location URI received from client",e);
        }
      }
    }
    @Override public String getWindowName(){
      return secondRequest.getParameter("wn");
    }
    @Override public WebBrowser getWebBrowser(){
      return VaadinServiceSession.getCurrent().getBrowser();
    }
  }
;
}
