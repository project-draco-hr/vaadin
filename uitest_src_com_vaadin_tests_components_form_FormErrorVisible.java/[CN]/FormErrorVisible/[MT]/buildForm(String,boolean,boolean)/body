{
  Form form=new Form();
  form.setCaption(caption);
  form.addField("value",new TextField("MyField"));
  if (withError) {
    form.setComponentError(new UserError("Has error"));
  }
  if (withFooter) {
    form.getFooter().addComponent(new Button("Footer button"));
  }
 else {
    form.setFooter(null);
  }
  return form;
}
