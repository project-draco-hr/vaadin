{
  subwindow=new Window("A subwindow w/ close-listener");
  subwindow.addListener(new Window.CloseListener(){
    public void windowClose(    CloseEvent e){
      getApplication().getMainWindow().showNotification("Window closed");
    }
  }
);
  VerticalLayout layout=(VerticalLayout)subwindow.getContent();
  layout.setMargin(true);
  layout.setSpacing(true);
  Label message=new Label("This is a subwindow with a close-listener.");
  subwindow.addComponent(message);
  Button open=new Button("Open window",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      if (subwindow.getParent() != null) {
        getWindow().showNotification("Window is already open");
      }
 else {
        getApplication().getMainWindow().addWindow(subwindow);
      }
    }
  }
);
  addComponent(open);
}
