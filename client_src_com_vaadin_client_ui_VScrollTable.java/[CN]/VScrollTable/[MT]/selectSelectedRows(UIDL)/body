{
  boolean keyboardSelectionOverRowFetchInProgress=false;
  if (uidl.hasVariable("selected")) {
    final Set<String> selectedKeys=uidl.getStringArrayVariableAsSet("selected");
    removeUnselectedRowKeys(selectedKeys);
    if (scrollBody != null) {
      Iterator<Widget> iterator=scrollBody.iterator();
      while (iterator.hasNext()) {
        VScrollTableRow row=(VScrollTableRow)iterator.next();
        boolean selected=selectedKeys.contains(row.getKey());
        if (!selected && unSyncedselectionsBeforeRowFetch != null && unSyncedselectionsBeforeRowFetch.contains(row.getKey())) {
          selected=true;
          keyboardSelectionOverRowFetchInProgress=true;
        }
        if (isSingleSelectMode() && selected) {
          if (focusedRow == null || !selectedRowKeys.contains(focusedRow.getKey())) {
            setRowFocus(row);
          }
        }
        if (selected != row.isSelected()) {
          row.toggleSelection();
          if (!isSingleSelectMode() && !selected) {
            removeRowFromUnsentSelectionRanges(row);
          }
        }
      }
    }
  }
  unSyncedselectionsBeforeRowFetch=null;
  return keyboardSelectionOverRowFetchInProgress;
}
