{
  if (feature != currentFeature) {
    currentFeature=feature;
    right.removeAllComponents();
    left.removeAllComponents();
    left.addComponent(controls);
    controls.setCaption(feature.getName());
    left.addComponent(getExampleFor(feature));
    right.setCaption("Description and Resources");
    final Feature parent=(Feature)SamplerApplication.getAllFeatures().getParent(feature);
    String desc=parent.getDescription();
    boolean hasParentDesc=false;
    final Label parentLabel=new Label(parent.getDescription());
    if (desc != null && desc != "") {
      parentLabel.setContentMode(Label.CONTENT_XHTML);
      right.addComponent(parentLabel);
      hasParentDesc=true;
    }
    desc=feature.getDescription();
    if (desc != null && desc != "") {
      final Label l=new Label("<div class=\"outer-deco\"><div class=\"deco\"><span class=\"deco\"></span>" + desc + "</div></div>",Label.CONTENT_XHTML);
      right.addComponent(l);
      if (hasParentDesc) {
        l.setStyleName("sample-description");
      }
 else {
        l.setStyleName("description");
      }
    }
{
      String path=SamplerApplication.getPathFor(currentFeature);
      showSrc.setTargetName(path);
      showSrc.setResource(new ExternalResource(getApplication().getURL() + "src/" + path));
    }
    NamedExternalResource[] resources=feature.getRelatedResources();
    if (resources != null) {
      VerticalLayout res=new VerticalLayout();
      Label caption=new Label("<span>Additional Resources</span>",Label.CONTENT_XHTML);
      caption.setStyleName("section");
      caption.setWidth("100%");
      res.addComponent(caption);
      res.setMargin(false,false,true,false);
      for (      NamedExternalResource r : resources) {
        final Link l=new Link(r.getName(),r);
        l.setIcon(new ThemeResource("../runo/icons/16/note.png"));
        res.addComponent(l);
      }
      right.addComponent(res);
    }
    APIResource[] apis=feature.getRelatedAPI();
    if (apis != null) {
      VerticalLayout api=new VerticalLayout();
      Label caption=new Label("<span>API Documentation</span>",Label.CONTENT_XHTML);
      caption.setStyleName("section");
      caption.setWidth("100%");
      api.addComponent(caption);
      api.setMargin(false,false,true,false);
      for (      APIResource r : apis) {
        final Link l=new Link(r.getName(),r);
        l.setIcon(new ThemeResource("../runo/icons/16/document-txt.png"));
        api.addComponent(l);
      }
      right.addComponent(api);
    }
    Class<? extends Feature>[] features=feature.getRelatedFeatures();
    if (features != null) {
      VerticalLayout rel=new VerticalLayout();
      Label caption=new Label("<span>Related Samples</span>",Label.CONTENT_XHTML);
      caption.setStyleName("section");
      caption.setWidth("100%");
      rel.addComponent(caption);
      rel.setMargin(false,false,true,false);
      for (      Class<? extends Feature> c : features) {
        final Feature f=SamplerApplication.getFeatureFor(c);
        if (f != null) {
          String path=SamplerApplication.getPathFor(f);
          ActiveLink al=new ActiveLink(f.getName(),new ExternalResource(getApplication().getURL() + "#" + path));
          al.setIcon(new ThemeResource((f instanceof FeatureSet ? "../sampler/icons/category.gif" : "../sampler/icons/sample.png")));
          al.addListener(new LinkActivatedListener(){
            public void linkActivated(            LinkActivatedEvent event){
              if (event.isLinkOpened()) {
                getWindow().showNotification(f.getName() + " opened if new window/tab");
              }
 else {
                SamplerWindow w=(SamplerWindow)getWindow();
                w.setFeature(f);
              }
            }
          }
);
          rel.addComponent(al);
        }
      }
      right.addComponent(rel);
    }
  }
}
