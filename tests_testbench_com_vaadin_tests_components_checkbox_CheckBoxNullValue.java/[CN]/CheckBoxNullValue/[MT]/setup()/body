{
  getLayout().setWidth("100%");
  final CheckBox checkbox=new CheckBox("A checkbox");
  checkbox.setValue(null);
  addComponent(checkbox);
  final CheckBox requiredCheckbox=new CheckBox("A required checkbox");
  requiredCheckbox.setRequired(true);
  requiredCheckbox.setValue(null);
  addComponent(requiredCheckbox);
  final Label valueLabel=new Label("");
  final Button button=new Button("Validate");
  addComponent(button);
  button.addListener(new Button.ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      checkbox.setComponentError(null);
      requiredCheckbox.setComponentError(null);
      try {
        checkbox.validate();
      }
 catch (      InvalidValueException e) {
        checkbox.setComponentError(AbstractErrorMessage.getErrorMessageForException(e));
      }
      try {
        requiredCheckbox.validate();
      }
 catch (      InvalidValueException e) {
        requiredCheckbox.setComponentError(AbstractErrorMessage.getErrorMessageForException(e));
      }
      valueLabel.setValue("Checkbox: " + checkbox.getValue() + "; Required checkbox: "+ requiredCheckbox.getValue());
    }
  }
);
  addComponent(valueLabel);
}
