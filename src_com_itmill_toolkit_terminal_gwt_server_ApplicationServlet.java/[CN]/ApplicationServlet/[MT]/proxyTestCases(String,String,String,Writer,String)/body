{
  URLConnection conn;
  if (testCaseId != null) {
    testServerUri+="/TT-TC/" + testCaseId;
  }
  if (testSuiteId != null) {
    testServerUri+="/TT-TS/" + testSuiteId;
  }
  if (testSuiteRunId != null) {
    testServerUri+="/TT-TS-RUN-ID/" + testSuiteRunId;
  }
  conn=new URL(testServerUri).openConnection();
  InputStream is=conn.getInputStream();
  StringBuffer builder=new StringBuffer();
  byte[] b=new byte[4096];
  for (int n; (n=is.read(b)) != -1; ) {
    builder.append(new String(b,0,n));
  }
  is.close();
  if (builder != null && builder.length() > 0) {
    page.write("<script language=\"JavaScript\" type=\"text/javascript\">\n");
    page.write("itmill.TTtestCaseId = \"" + testCaseId + "\";\n");
    if (testSuiteId != null) {
      page.write("itmill.TTtestSuiteId = \"" + testSuiteId + "\";\n");
    }
    if (testSuiteRunId != null) {
      page.write("itmill.TTtestSuiteRunId = \"" + testSuiteRunId + "\";\n");
    }
    page.write("itmill.TTtestCaseScript = " + builder.toString() + ";\n");
    page.write("</script>\n");
  }
}
