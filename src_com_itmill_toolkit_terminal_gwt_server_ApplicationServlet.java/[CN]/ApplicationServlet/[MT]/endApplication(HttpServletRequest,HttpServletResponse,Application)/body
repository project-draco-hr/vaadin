{
  String logoutUrl=application.getLogoutURL();
  if (logoutUrl == null) {
    logoutUrl=application.getURL().toString();
  }
  final HttpSession session=request.getSession();
  if (session != null) {
    WebApplicationContext.getApplicationContext(session).removeApplication(application);
  }
  response.sendRedirect(response.encodeRedirectURL(logoutUrl));
}
