{
  StackItem item;
  int itemIndex;
  if (stack.size() <= index) {
    item=new StackItem(tabUidl);
    if (stack.size() == 0) {
      item.addStyleDependentName("first");
    }
    stack.add(item);
    itemIndex=stack.size() - 1;
    add(item,getElement());
  }
 else {
    item=stack.get(index);
    itemIndex=index;
    item.updateCaption(tabUidl);
  }
  item.setVisible(!hidden);
  if (selected) {
    selectedUIDLItemIndex=itemIndex;
  }
  if (tabUidl.getChildCount() > 0) {
    lazyUpdateMap.put(item,tabUidl.getChildUIDL(0));
  }
}
