{
  int eventId=(Integer)variables.get("eventId");
  currentEventId=eventId;
  final Component sourceComponent=(Component)variables.get("component");
  variables=(Map<String,Object>)variables.get("tra");
  Transferable transferable=null;
  if (sourceComponent != null && sourceComponent instanceof DragSource) {
    transferable=((DragSource)sourceComponent).getTransferable(variables);
  }
 else {
    if (transferable == null) {
      if (sourceComponent != null) {
        transferable=new ComponentTransferable(sourceComponent,variables);
      }
 else {
        transferable=new Transferable(){
          private Map<String,Object> td=new HashMap<String,Object>();
          public Object getData(          String dataFlawor){
            return td.get(dataFlawor);
          }
          public void setData(          String dataFlawor,          Object value){
            td.put(dataFlawor,value);
          }
          public Collection<String> getDataFlawors(){
            return td.keySet();
          }
        }
;
      }
    }
  }
  return transferable;
}
