{
  addComponent(useFieldFactory);
  useFieldFactory.setImmediate(true);
  useFieldFactory.addListener(new ValueChangeListener(){
    @Override public void valueChange(    ValueChangeEvent event){
      if (useFieldFactory.getValue()) {
        table.setTableFieldFactory(new CachingFieldFactory());
      }
 else {
        table.setTableFieldFactory(DefaultFieldFactory.get());
      }
    }
  }
);
  addComponent(table);
  table.setEditable(true);
  table.setWidth("100%");
  table.setHeight("170px");
  table.setSelectable(true);
  table.setContainerDataSource(TestUtils.getISO3166Container());
  table.setColumnHeaders(new String[]{"Country","Code"});
  table.setColumnAlignment(TestUtils.iso3166_PROPERTY_SHORT,Table.ALIGN_CENTER);
  table.setColumnExpandRatio(TestUtils.iso3166_PROPERTY_NAME,1);
  table.setColumnWidth(TestUtils.iso3166_PROPERTY_SHORT,70);
  addComponent(sizeLabel);
  addComponent(new Button("Show size of the table",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      table.markAsDirtyRecursive();
      updateSize();
    }
  }
));
  addComponent(new Button("Select the second row",new ClickListener(){
    @Override public void buttonClick(    ClickEvent event){
      table.select("AL");
      updateSize();
    }
  }
));
}
