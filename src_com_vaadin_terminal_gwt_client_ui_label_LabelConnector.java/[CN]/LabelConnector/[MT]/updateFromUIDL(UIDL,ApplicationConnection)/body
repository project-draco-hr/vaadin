{
  super.updateFromUIDL(uidl,client);
  getWidget().setConnection(client);
  if (!isRealUpdate(uidl)) {
    return;
  }
  boolean sinkOnloads=false;
  final String mode=uidl.getStringAttribute("mode");
  if (mode == null || "text".equals(mode)) {
    getWidget().setText(uidl.getChildString(0));
  }
 else   if ("pre".equals(mode)) {
    PreElement preElement=Document.get().createPreElement();
    preElement.setInnerText(uidl.getChildUIDL(0).getChildString(0));
    getWidget().setHTML("");
    getWidget().getElement().appendChild(preElement);
  }
 else   if ("uidl".equals(mode)) {
    getWidget().setHTML(uidl.getChildrenAsXML());
  }
 else   if ("xhtml".equals(mode)) {
    UIDL content=uidl.getChildUIDL(0).getChildUIDL(0);
    if (content.getChildCount() > 0) {
      getWidget().setHTML(content.getChildString(0));
    }
 else {
      getWidget().setHTML("");
    }
    sinkOnloads=true;
  }
 else   if ("xml".equals(mode)) {
    getWidget().setHTML(uidl.getChildUIDL(0).getChildString(0));
  }
 else   if ("raw".equals(mode)) {
    getWidget().setHTML(uidl.getChildUIDL(0).getChildString(0));
    sinkOnloads=true;
  }
 else {
    getWidget().setText("");
  }
  if (sinkOnloads) {
    Util.sinkOnloadForImages(getWidget().getElement());
  }
}
