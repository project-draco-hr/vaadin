{
  theme=new ComboBox();
  theme.setWidth("32px");
  theme.setNewItemsAllowed(false);
  theme.setFilteringMode(ComboBox.FILTERINGMODE_CONTAINS);
  theme.setImmediate(true);
  theme.setNullSelectionAllowed(false);
  for (  String themeName : THEMES) {
    String id=SAMPLER_THEME_NAME + "-" + themeName;
    theme.addItem(id);
    theme.setItemCaption(id,themeName.substring(0,1).toUpperCase() + themeName.substring(1) + " theme");
    theme.setItemIcon(id,EMPTY_THEME_ICON);
  }
  theme.setValue(currentTheme);
  theme.setItemIcon(currentTheme,SELECTED_THEME_ICON);
  theme.addListener(new ComboBox.ValueChangeListener(){
    public void valueChange(    ValueChangeEvent event){
      final String newTheme=event.getProperty().getValue().toString();
      setTheme(newTheme);
      theme.setItemIcon(currentTheme,EMPTY_THEME_ICON);
      theme.setItemIcon(newTheme,SELECTED_THEME_ICON);
      currentTheme=newTheme;
    }
  }
);
  theme.setStyleName("theme-select");
  theme.setDescription("Select Theme");
  return theme;
}
