{
  VerticalLayout mainExpand=new VerticalLayout();
  setLayout(mainExpand);
  setSizeFull();
  mainExpand.setSizeFull();
  setCaption("Vaadin Sampler");
  HorizontalLayout nav=new HorizontalLayout();
  mainExpand.addComponent(nav);
  nav.setHeight("44px");
  nav.setWidth("100%");
  nav.setStyleName("topbar");
  nav.setSpacing(true);
  nav.setMargin(false,true,false,false);
  Component logo=createLogo();
  nav.addComponent(logo);
  nav.setComponentAlignment(logo,Alignment.MIDDLE_LEFT);
  nav.addComponent(breadcrumbs);
  nav.setExpandRatio(breadcrumbs,1);
  nav.setComponentAlignment(breadcrumbs,Alignment.MIDDLE_LEFT);
  nav.addComponent(webAnalytics);
  nav.addComponent(uriFragmentUtility);
  uriFragmentUtility.addListener(new FragmentChangedListener(){
    public void fragmentChanged(    FragmentChangedEvent source){
      String frag=source.getUriFragmentUtility().getFragment();
      setFeature(frag);
    }
  }
);
{
    final ComboBox themeSelect=new ComboBox();
    themeSelect.setWidth("120px");
    themeSelect.setStyleName("theme");
    themeSelect.setImmediate(true);
    themeSelect.setNullSelectionAllowed(false);
    themeSelect.addContainerProperty("name",String.class,null);
    themeSelect.setItemCaptionPropertyId("name");
    Item item=themeSelect.addItem("sampler-reindeer");
    item.getItemProperty("name").setValue("Reindeer theme");
    item=themeSelect.addItem("sampler-runo");
    item.getItemProperty("name").setValue("Runo theme");
    themeSelect.setValue(SamplerApplication.this.getTheme());
    themeSelect.addListener(new ValueChangeListener(){
      public void valueChange(      ValueChangeEvent event){
        Object theme=themeSelect.getValue();
        if (theme != null && !theme.equals(SamplerApplication.this.getTheme())) {
          SamplerApplication.this.setTheme((String)theme);
        }
      }
    }
);
    nav.addComponent(themeSelect);
    nav.setComponentAlignment(themeSelect,Alignment.MIDDLE_LEFT);
  }
  mainSplit=new SplitPanel(SplitPanel.ORIENTATION_HORIZONTAL);
  mainSplit.setSizeFull();
  mainSplit.setStyleName("main-split");
  mainExpand.addComponent(mainSplit);
  mainExpand.setExpandRatio(mainSplit,1);
  mode=createModeSwitch();
  mode.setMode(currentList);
  nav.addComponent(mode);
  nav.setComponentAlignment(mode,Alignment.MIDDLE_LEFT);
  HorizontalLayout quicknav=new HorizontalLayout();
  HorizontalLayout arrows=new HorizontalLayout();
  nav.addComponent(quicknav);
  nav.addComponent(arrows);
  nav.setComponentAlignment(quicknav,Alignment.MIDDLE_LEFT);
  nav.setComponentAlignment(arrows,Alignment.MIDDLE_LEFT);
  quicknav.setStyleName("segment");
  arrows.setStyleName("segment");
  previousSample=createPrevButton();
  arrows.addComponent(previousSample);
  nextSample=createNextButton();
  arrows.addComponent(nextSample);
  Component searchComponent=createSearch();
  quicknav.addComponent(searchComponent);
  navigationTree=createMenuTree();
  mainSplit.setFirstComponent(navigationTree);
  Component treeSwitch=createTreeSwitch();
  quicknav.addComponent(treeSwitch);
  addListener(new CloseListener(){
    public void windowClose(    CloseEvent e){
      if (getMainWindow() != SamplerWindow.this) {
        SamplerApplication.this.removeWindow(SamplerWindow.this);
      }
    }
  }
);
}
