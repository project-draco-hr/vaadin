{
  setStyleName("featuretable");
  alwaysRecalculateColumnWidths=true;
  setSelectable(false);
  setSizeFull();
  setColumnHeaderMode(Table.COLUMN_HEADER_MODE_HIDDEN);
  addGeneratedColumn(Feature.PROPERTY_ICON,new Table.ColumnGenerator(){
    public Component generateCell(    Table source,    Object itemId,    Object columnId){
      Feature f=(Feature)itemId;
      if (f instanceof FeatureSet) {
        return null;
      }
      String resId="75-" + f.getIconName();
      Resource res=iconCache.get(resId);
      if (res == null) {
        res=new ClassResource(f.getClass(),resId,SamplerApplication.this);
        iconCache.put(resId,res);
      }
      Embedded emb=new Embedded("",res);
      emb.setWidth("48px");
      emb.setHeight("48px");
      emb.setType(Embedded.TYPE_IMAGE);
      return emb;
    }
  }
);
  addGeneratedColumn("",new Table.ColumnGenerator(){
    public Component generateCell(    Table source,    Object itemId,    Object columnId){
      final Feature feature=(Feature)itemId;
      if (feature instanceof FeatureSet) {
        return null;
      }
 else {
        ActiveLink b=new ActiveLink("View sample ???",new ExternalResource("#" + getPathFor(feature)));
        b.addListener(new ActiveLink.LinkActivatedListener(){
          public void linkActivated(          LinkActivatedEvent event){
            if (!event.isLinkOpened()) {
              ((SamplerWindow)getWindow()).setFeature(feature);
            }
          }
        }
);
        b.setStyleName(Button.STYLE_LINK);
        return b;
      }
    }
  }
);
  addListener(new ItemClickListener(){
    public void itemClick(    ItemClickEvent event){
      Feature f=(Feature)event.getItemId();
      if (event.getButton() == ItemClickEvent.BUTTON_MIDDLE || event.isCtrlKey() || event.isShiftKey()) {
        getWindow().open(new ExternalResource(getURL() + "#" + getPathFor(f)),"_blank");
      }
 else {
        ((SamplerWindow)getWindow()).setFeature(f);
      }
    }
  }
);
  setCellStyleGenerator(new CellStyleGenerator(){
    public String getStyle(    Object itemId,    Object propertyId){
      if (propertyId == null && itemId instanceof FeatureSet) {
        if (allFeatures.isRoot(itemId)) {
          return "section";
        }
 else {
          return "subsection";
        }
      }
      return null;
    }
  }
);
}
