{
  String id=paintableIdMap.get(paintable);
  if (id == null) {
    id=paintable.getDebugId();
    if (id == null) {
      id="PID" + Integer.toString(idSequence++);
    }
 else {
      id="PID_S" + id;
    }
    Paintable old=idPaintableMap.put(id,paintable);
    if (old != null && old != paintable) {
      if (old instanceof Component && ((Component)old).getApplication() != null) {
        throw new IllegalStateException("Two paintables (" + paintable.getClass().getSimpleName() + ","+ old.getClass().getSimpleName()+ ") have been assigned the same id: "+ paintable.getDebugId());
      }
    }
    paintableIdMap.put(paintable,id);
  }
  return id;
}
