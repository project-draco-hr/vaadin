{
  HashSet resultset=new HashSet(dirtyPaintabletSet);
  for (Iterator i=dirtyPaintabletSet.iterator(); i.hasNext(); ) {
    Paintable p=(Paintable)i.next();
    if (p instanceof Component) {
      Component component=(Component)p;
      Window componentsRoot=component.getWindow();
      if (componentsRoot.getParent() != null) {
        componentsRoot=(Window)componentsRoot.getParent();
      }
      if (componentsRoot != w || dirtyPaintabletSet.contains(component.getParent())) {
        resultset.remove(p);
      }
    }
  }
  return resultset;
}
