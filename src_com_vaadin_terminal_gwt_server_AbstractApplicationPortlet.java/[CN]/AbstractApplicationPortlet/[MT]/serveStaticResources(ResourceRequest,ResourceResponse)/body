{
  final String resourceID=request.getResourceID();
  final PortletContext pc=getPortletContext();
  InputStream is=pc.getResourceAsStream(resourceID);
  if (is != null) {
    final String mimetype=pc.getMimeType(resourceID);
    if (mimetype != null) {
      response.setContentType(mimetype);
    }
    final OutputStream os=response.getPortletOutputStream();
    final byte buffer[]=new byte[DEFAULT_BUFFER_SIZE];
    int bytes;
    while ((bytes=is.read(buffer)) >= 0) {
      os.write(buffer,0,bytes);
    }
  }
 else {
    logger.info("Requested resource [" + resourceID + "] could not be found");
    response.setProperty(ResourceResponse.HTTP_STATUS_CODE,Integer.toString(HttpServletResponse.SC_NOT_FOUND));
  }
}
