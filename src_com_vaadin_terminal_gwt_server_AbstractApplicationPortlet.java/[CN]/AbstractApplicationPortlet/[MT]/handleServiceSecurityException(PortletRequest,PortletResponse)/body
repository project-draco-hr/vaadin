{
  if (isOnUnloadRequest(request)) {
    return;
  }
  try {
    Application.SystemMessages ci=getSystemMessages();
    if (getRequestType(request) != RequestType.UIDL) {
      if (response instanceof ActionResponse) {
        ((ActionResponse)response).sendRedirect(ci.getCommunicationErrorURL());
      }
 else {
      }
    }
 else {
      criticalNotification(request,(ResourceResponse)response,ci.getCommunicationErrorCaption(),ci.getCommunicationErrorMessage(),INVALID_SECURITY_KEY_MSG,ci.getCommunicationErrorURL());
      request.getPortletSession().invalidate();
    }
  }
 catch (  SystemMessageException ee) {
    throw new PortletException(ee);
  }
}
