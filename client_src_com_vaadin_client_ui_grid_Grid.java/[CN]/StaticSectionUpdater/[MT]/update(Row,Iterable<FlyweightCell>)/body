{
  GridStaticSection.StaticRow<?> staticRow=section.getRow(row.getRow());
  final List<GridColumn<?,T>> columns=getVisibleColumns();
  for (  FlyweightCell cell : cellsToUpdate) {
    final StaticCell metadata=staticRow.getCell(columns.get(cell.getColumn()));
    if (staticRow instanceof HeaderRow) {
      addSortingIndicatorsToHeaderRow((HeaderRow)staticRow,cell);
    }
    cell.setColSpan(metadata.getColspan());
    TableCellElement element=cell.getElement();
switch (metadata.getType()) {
case TEXT:
      element.setInnerText(metadata.getText());
    break;
case HTML:
  element.setInnerHTML(metadata.getHtml());
break;
case WIDGET:
preDetach(row,Arrays.asList(cell));
element.setInnerHTML("");
postAttach(row,Arrays.asList(cell));
break;
}
String oldStyleName=element.getPropertyString(CUSTOM_STYLE_PROPERTY_NAME);
String newStyleName=metadata.getStyleName();
if (!SharedUtil.equals(oldStyleName,newStyleName)) {
if (oldStyleName != null) {
element.removeClassName(oldStyleName);
}
if (newStyleName != null) {
element.addClassName(newStyleName);
}
element.setPropertyString(CUSTOM_STYLE_PROPERTY_NAME,newStyleName);
}
cellFocusHandler.updateFocusedCellStyle(cell,container);
}
}
