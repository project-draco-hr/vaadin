{
  if (filters == null || filters.isEmpty()) {
    filteredItemIds=null;
    if (filters != null) {
      filters=null;
      fireContentsChange();
    }
    return;
  }
  if (filteredItemIds == null) {
    filteredItemIds=new LinkedHashSet();
  }
 else {
    filteredItemIds.clear();
  }
  for (final Iterator i=itemIds.iterator(); i.hasNext(); ) {
    final Object id=i.next();
    if (passesFilters(new IndexedContainerItem(id))) {
      filteredItemIds.add(id);
    }
  }
  fireContentsChange();
}
