{
  if (width == null && initialMeasuredWidth == null) {
    int tbWidth=Util.getRequiredWidth(tb);
    int openerWidth=Util.getRequiredWidth(popupOpener);
    int iconWidth=selectedItemIcon.isAttached() ? Util.measureMarginLeft(tb.getElement()) - Util.measureMarginLeft(selectedItemIcon.getElement()) : 0;
    int w=tbWidth + openerWidth + iconWidth;
    if (suggestionPopupMinWidth > w) {
      setTextboxWidth(suggestionPopupMinWidth);
      w=suggestionPopupMinWidth;
    }
 else {
      tb.setWidth((tbWidth - getTextboxPadding()) + "px");
    }
    super.setWidth((w) + "px");
    width=w + "px";
    initialMeasuredWidth=width;
  }
 else   if (initialMeasuredWidth != null) {
    width=initialMeasuredWidth;
  }
 else {
    setTextboxWidth(getMainWidth() - getComponentPadding());
  }
}
