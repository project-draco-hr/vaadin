{
  focused=false;
  if (tabPressed) {
    tabPressed=false;
    suggestionPopup.menu.doSelectedItemAction();
    suggestionPopup.hide();
  }
 else   if (!suggestionPopup.isAttached() || suggestionPopup.isJustClosed()) {
    suggestionPopup.menu.doSelectedItemAction();
  }
  if (selectedOptionKey == null) {
    setPromptingOn();
  }
  removeStyleDependentName("focus");
}
