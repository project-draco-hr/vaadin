{
  CONTAINERTYPE container=prepareContainer();
  ItemSetChangeListener listener=EasyMock.createStrictMock(ItemSetChangeListener.class);
  for (int i=0; i < numEventsExpected; ++i) {
    listener.containerItemSetChange(EasyMock.isA(ItemSetChangeEvent.class));
  }
  EasyMock.replay(listener);
  ((ItemSetChangeNotifier)container).addListener(listener);
  performModification(container);
  EasyMock.verify(listener);
  ((ItemSetChangeNotifier)container).removeListener(listener);
  if (reinitializeContainer) {
    container=prepareContainer();
  }
  performModification(container);
  EasyMock.verify(listener);
}
