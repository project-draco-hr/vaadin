{
  setTheme("example");
  final Window main=new Window("Vaadin 6");
  setMainWindow(main);
  final SplitPanel split=new SplitPanel(SplitPanel.ORIENTATION_HORIZONTAL);
  split.setSplitPosition(200,SplitPanel.UNITS_PIXELS);
  main.setLayout(split);
  final HashMap sectionIds=new HashMap();
  final HierarchicalContainer container=createContainer();
  final Object rootId=container.addItem();
  Item item=container.getItem(rootId);
  Property p=item.getItemProperty(PROPERTY_ID_NAME);
  p.setValue("All examples");
  for (int i=0; i < demos.length; i++) {
    final Object[] demo=demos[i];
    final String section=(String)demo[0];
    Object sectionId;
    if (sectionIds.containsKey(section)) {
      sectionId=sectionIds.get(section);
    }
 else {
      sectionId=container.addItem();
      sectionIds.put(section,sectionId);
      container.setParent(sectionId,rootId);
      item=container.getItem(sectionId);
      p=item.getItemProperty(PROPERTY_ID_NAME);
      p.setValue(section);
    }
    final Object id=container.addItem();
    container.setParent(id,sectionId);
    initItem(container.getItem(id),demo);
  }
  tree=new Tree();
  tree.setDebugId("FeatureBrowser: Main Tree");
  tree.setSelectable(true);
  tree.setMultiSelect(false);
  tree.setNullSelectionAllowed(false);
  tree.setContainerDataSource(container);
  tree.setItemCaptionMode(AbstractSelect.ITEM_CAPTION_MODE_PROPERTY);
  tree.setItemCaptionPropertyId(PROPERTY_ID_NAME);
  tree.addListener(this);
  tree.setImmediate(true);
  tree.expandItemsRecursively(rootId);
  for (Iterator i=container.getItemIds().iterator(); i.hasNext(); ) {
    Object id=i.next();
    if (container.getChildren(id) == null) {
      tree.setChildrenAllowed(id,false);
    }
  }
  split.addComponent(tree);
  final SplitPanel split2=new SplitPanel();
  split2.setSplitPosition(200,SplitPanel.UNITS_PIXELS);
  split.addComponent(split2);
  table=new Table();
  table.setDebugId("FeatureBrowser: Main Table");
  table.setSizeFull();
  table.setColumnReorderingAllowed(true);
  table.setColumnCollapsingAllowed(true);
  table.setSelectable(true);
  table.setMultiSelect(false);
  table.setNullSelectionAllowed(false);
  try {
    table.setContainerDataSource((IndexedContainer)container.clone());
  }
 catch (  final Exception e) {
    e.printStackTrace(System.err);
  }
  table.setVisibleColumns(new Object[]{PROPERTY_ID_CATEGORY,PROPERTY_ID_NAME,PROPERTY_ID_DESC,PROPERTY_ID_VIEWED});
  table.addListener(this);
  table.setImmediate(true);
  split2.addComponent(table);
  final VerticalLayout exp=new VerticalLayout();
  exp.setSizeFull();
  exp.setMargin(true);
  split2.addComponent(exp);
  final HorizontalLayout wbLayout=new HorizontalLayout();
  Button b=new Button("Open in sub-window",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      Component component=(Component)ts.getComponentIterator().next();
      String caption=ts.getTabCaption(component);
      try {
        component=component.getClass().newInstance();
      }
 catch (      Exception e) {
        return;
      }
      Window w=new Window(caption);
      w.setWidth("640px");
      if (Layout.class.isAssignableFrom(component.getClass())) {
        w.setLayout((Layout)component);
      }
 else {
        w.addComponent(component);
      }
      getMainWindow().addWindow(w);
    }
  }
);
  b.setStyleName(Button.STYLE_LINK);
  wbLayout.addComponent(b);
  b=new Button("Open in native window",new Button.ClickListener(){
    public void buttonClick(    ClickEvent event){
      Component component=(Component)ts.getComponentIterator().next();
      final String caption=ts.getTabCaption(component);
      Window w=getWindow(caption);
      if (w == null) {
        try {
          component=component.getClass().newInstance();
        }
 catch (        final Exception e) {
          return;
        }
        w=new Window(caption);
        w.setName(caption);
        if (Layout.class.isAssignableFrom(component.getClass())) {
          w.setLayout((Layout)component);
        }
 else {
          w.addComponent(component);
        }
        addWindow(w);
      }
      getMainWindow().open(new ExternalResource(w.getURL()),caption);
    }
  }
);
  b.setStyleName(Button.STYLE_LINK);
  wbLayout.addComponent(b);
  exp.addComponent(wbLayout);
  exp.setComponentAlignment(wbLayout,Alignment.TOP_RIGHT);
  ts=new TabSheet();
  ts.setSizeFull();
  ts.addTab(new Label(""),"Choose example",null);
  exp.addComponent(ts);
  exp.setExpandRatio(ts,1);
  final Label status=new Label("<a href=\"http://www.vaadin.com/learn\">30 Seconds to Vaadin</a>" + " | <a href=\"http://www.vaadin.com/book\">Book of Vaadin</a>");
  status.setContentMode(Label.CONTENT_XHTML);
  exp.addComponent(status);
  exp.setComponentAlignment(status,Alignment.MIDDLE_RIGHT);
  tree.setValue(rootId);
  getMainWindow().showNotification("Welcome","Choose an example to begin.<br/><br/>And remember to experiment!",Window.Notification.TYPE_TRAY_NOTIFICATION);
}
