{
  URI baseUrl=new URI(url);
  Document doc=Jsoup.connect(url).timeout(10000).get();
  Elements elems=doc.select(String.format("a[href~=%s]",regexp));
  LinkedHashSet<URI> tests=new LinkedHashSet<URI>();
  for (  Element e : elems) {
    URI testUrl=new URI(e.attr("href"));
    if (!testUrl.isAbsolute()) {
      testUrl=baseUrl.resolve(testUrl);
    }
    if (tests.size() < maxTests) {
      if (!excludeUrls.contains(testUrl)) {
        tests.add(testUrl);
      }
    }
 else {
      break;
    }
  }
  return tests;
}
