{
  boolean changed=false;
  List<String> stateKeys=getState().selectedKeys;
  for (  String key : selectedKeys) {
    if (!stateKeys.contains(key)) {
      changed=true;
      deselectByHandle(dataSource.getHandleByKey(key));
    }
  }
  for (  String key : stateKeys) {
    if (!selectedKeys.contains(key)) {
      changed=true;
      selectByHandle(dataSource.getHandleByKey(key));
    }
  }
  selectedKeys=new LinkedHashSet<String>(stateKeys);
  if (changed) {
    updatedFromState=true;
    getWidget().fireEvent(new SelectionEvent<JsonObject>(getWidget(),(List<JsonObject>)null,null,false));
  }
}
