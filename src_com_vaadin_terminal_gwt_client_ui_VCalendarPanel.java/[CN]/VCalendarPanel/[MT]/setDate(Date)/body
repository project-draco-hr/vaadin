{
  if (currentDate == value && currentDate != null) {
    return;
  }
  Date oldValue=value;
  value=currentDate;
  if (value == null) {
    focusedDate=null;
  }
 else {
    focusedDate=(Date)value.clone();
  }
  if (oldValue == null || value == null || oldValue.getYear() != value.getYear() || oldValue.getMonth() != value.getMonth()) {
    renderCalendar();
  }
 else {
    focusDay(currentDate.getDate());
    selectFocused();
  }
  if (!hasFocus) {
    focusDay(-1);
  }
}
