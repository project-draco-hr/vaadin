{
  if (forceRedraw) {
    if (prevMonth == null) {
      getFlexCellFormatter().setStyleName(0,0,VDateField.CLASSNAME + "-calendarpanel-prevyear");
      getFlexCellFormatter().setStyleName(0,4,VDateField.CLASSNAME + "-calendarpanel-nextyear");
      getFlexCellFormatter().setStyleName(0,3,VDateField.CLASSNAME + "-calendarpanel-nextmonth");
      getFlexCellFormatter().setStyleName(0,1,VDateField.CLASSNAME + "-calendarpanel-prevmonth");
      getRowFormatter().addStyleName(0,VDateField.CLASSNAME + "-calendarpanel-header");
      prevYear=new VEventButton();
      prevYear.setHTML("&laquo;");
      prevYear.setStyleName("v-button-prevyear");
      nextYear=new VEventButton();
      nextYear.setHTML("&raquo;");
      nextYear.setStyleName("v-button-nextyear");
      prevYear.addMouseListener(this);
      nextYear.addMouseListener(this);
      setWidget(0,0,prevYear);
      setWidget(0,4,nextYear);
      if (needsMonth) {
        prevMonth=new VEventButton();
        prevMonth.setHTML("&lsaquo;");
        prevMonth.setStyleName("v-button-prevmonth");
        nextMonth=new VEventButton();
        nextMonth.setHTML("&rsaquo;");
        nextMonth.setStyleName("v-button-nextmonth");
        prevMonth.addMouseListener(this);
        nextMonth.addMouseListener(this);
        setWidget(0,3,nextMonth);
        setWidget(0,1,prevMonth);
      }
    }
 else     if (!needsMonth) {
      prevMonth.removeMouseListener(this);
      nextMonth.removeMouseListener(this);
      remove(prevMonth);
      remove(nextMonth);
      prevMonth=null;
      nextMonth=null;
    }
  }
  final String monthName=needsMonth ? datefield.getDateTimeService().getMonth(datefield.getShowingDate().getMonth()) : "";
  final int year=datefield.getShowingDate().getYear() + 1900;
  getFlexCellFormatter().setStyleName(0,2,VDateField.CLASSNAME + "-calendarpanel-month");
  setHTML(0,2,"<span class=\"" + VDateField.CLASSNAME + "-calendarpanel-month\">"+ monthName+ " "+ year+ "</span>");
}
